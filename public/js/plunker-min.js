!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a){(function(){var b,c;b=a("fs"),a("../../vendor/angular/angular"),a("../../vendor/angular/angular-cookies"),a("../../vendor/angular-ui/ui-bootstrap"),a("../../vendor/angular-ui/ui-router"),a("../services/session.coffee"),a("../services/notifier.coffee"),a("../services/disabler.coffee"),a("../services/basePlunk.coffee"),a("../services/layout.coffee"),a("../services/updater.coffee"),a("../services/importer.coffee"),a("../services/collab.coffee"),a("../services/api.coffee"),a("../services/dirty.coffee"),a("../services/oauth.coffee"),a("../services/multipane.coffee"),a("../services/project.coffee"),a("../services/workspace.coffee"),a("../services/keybindings.coffee"),a("../directives/borderLayout.coffee"),a("../directives/aceEditor.coffee"),a("../directives/previewer.coffee"),a("../directives/taglist.coffee"),a("../directives/stopPropagation.coffee"),a("../panes/config.coffee"),c=angular.module("plunker.app.editor",["ui.bootstrap","ui.router","fa.borderLayout","plunker.service.session","plunker.service.notifier","plunker.service.disabler","plunker.service.basePlunk","plunker.service.layout","plunker.service.updater","plunker.service.importer","plunker.service.collab","plunker.service.api","plunker.service.dirty","plunker.service.multipane","plunker.service.project","plunker.service.workspace","plunker.service.oauth","plunker.service.keybindings","plunker.directive.aceEditor","plunker.directive.previewer","plunker.directive.taglist","plunker.directive.stopPropagation","plunker.pane.config"]),c.run(["keybindings",function(a){return a.addCommand({name:"Save",bindKey:{win:"Ctrl-S",mac:"Command-S"},exec:["project",function(){return console.log("Save")}]}),a.addCommand({name:"Reset",bindKey:{win:"Ctrl-R",mac:"Command-R"},exec:["$state",function(a){return a.go("editor.reset")}]}),a.addCommand({name:"Toggle Preview",bindKey:{win:"Ctrl-Shift-Enter",mac:"Command-Shift-Enter"},exec:["layout",function(a){return console.log("Toggling preview"),a.toggle("preview")}]}),a.addCommand({name:"Next",bindKey:{win:"Ctrl-Down",mac:"Command-Down"},exec:["workspace",function(a){return a.openNext()}]}),a.addCommand({name:"Prev",bindKey:{win:"Ctrl-Up",mac:"Command-Up"},exec:["workspace",function(a){return a.openPrev()}]})}]),c.config(["$stateProvider","$urlRouterProvider",function(a,b){return b.when("/edit/gist:{gistId:[0-9]+|[0-9a-z]{20}}",["$match",function(a){return"/edit/?import=gist:"+a.gistId}]),b.when("/edit/tpl:{gistId:[0-9]+|[0-9a-z]{20}}",["$match",function(a){return"/edit/?import=template:"+a.gistId}]),a.state("editor",{"abstract":!0,url:"/edit",views:{"templates@editor":{template:'<div class="header clearfix">\n  <button type="button" ng-click="pane.toggle()" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>\n  <h4>Search templates</h4>\n  <form ng-submit="search(templateSearch.taglist)">\n    <div class="input-group">\n      <span class="input-group-btn" ng-if="templateSearch.taglist.length">\n        <button type="button" class="btn btn-danger" ng-click="reset()"><i class="icon-remove"></i></button>\n      </span>\n      <input type="text" class="form-control" placeholder="Search by tags" ng-list="/, /" ng-model="templateSearch.taglist">\n      <span class="input-group-btn">\n        <button type="submit" class="btn btn-default"><i class="icon-search"></i></button>\n      </span>\n    </div>\n  </form>\n</div>\n<div class="list-group">\n  <a class="list-group-item" ui-sref="editor.new({import: \'tpl:\' + plunk.id})" ng-repeat="plunk in templates">\n    <span class="badge" ng-bind="plunk.views"></span>\n    <h4 ng-bind="plunk.description"></h4>\n    <plunker-taglist tags="plunk.tags" on-click="addTagToFilter(tag)"></plunker-taglist>\n  </a>\n</div>',controller:["$scope","$rootElement","api","keybindings",function(a,b,c,d){return a.templates=[],a.templateSearch={taglist:[]},d.attachTo(b[0]),a.reset=function(){return c.all("templates").getList().then(function(b){return angular.copy(b,a.templates)}),a.templateSearch={taglist:[]}},a.search=function(b){return c.all("templates").getList({taglist:b.join(",")}).then(function(b){return angular.copy(b,a.templates)})},a.reset()}]},"toolbar@editor":{template:'<div class="plunker-editor-toolbar">\n  <div class="pull-left">\n    <a class="plunker-brand" ui-sref="home">Plunker <sub class="version">1.7.0</sub></a>\n  </div>\n  <div class="pull-left toolbar-block">\n    <button class="btn btn-sm btn-primary" ng-class="{disabled: !project.canSave()}" ng-click="save()">\n      Save\n    </button>\n    \n    <div class="btn-group" ng-if="project.canFork()">\n      <button class="btn btn-sm btn-default" ng-click="project.fork()">\n        Fork\n      </button>\n      <button class="btn btn-sm btn-default dropdown-toggle" ng-if="visitor.isMember()">\n        <span class="caret"></span>\n      </button>\n      <ul class="dropdown-menu" ng-if="visitor.isMember()">\n        <li ng-if="project.isPublic()"><a ng-click="project.fork({private: true})">Fork as private</a></li>\n        <li ng-if="!project.isPublic()"><a ng-click="project.fork({private: false})">Fork as public</a></li>\n      </ul>\n    </div>\n    \n    <button class="btn btn-sm btn-success" ui-sref="editor.reset" tooltip="Start a new plunk and open the templates pane" tooltip-append-to-body="true" tooltip-placement="bottom">\n      New\n    </button>\n    \n    <button class="btn btn-sm btn-info" ng-class="{active: !layout.current.preview.closed}" ng-click="layout.current.preview.closed = !!!layout.current.preview.closed">\n      Preview\n    </button>\n  </div>\n  <div class="pull-right toolbar-block">\n    Layout: \n    <div class="btn-group btn-sm">\n      <button class="btn btn-sm btn-default" ng-click="layout.setLayout($index)" ng-class="{active: $index==layout.currentIndex}" ng-repeat="preset in layout.presets" tooltip="{{preset.name}}" tooltip-append-to-body="true" tooltip-placement="bottom">\n        <img ng-src="{{preset.img}}">\n      </button>\n    </div>\n    <div class="btn-group btn-sm" ng-if="!visitor.session.user">\n      <button class="btn btn-sm btn-default" ng-disabled="disableLogin" ng-class="{disabled: ngDisableLogin}" ng-click="login()" tooltip="Login using Github" tooltip-append-to-body="true" tooltip-placement="bottom">Login</button>\n    </div>\n    <div class="btn-group btn-sm" ng-if="visitor.session.user">\n      <button class="btn btn-sm btn-default dropdown-toggle" ng-disabled="disableLogout" ng-class="{disabled: disableLogout}">\n        <img class="gravatar" ng-src="http://www.gravatar.com/avatar/{{visitor.session.user.gravatar_id}}?s=20">\n        <span ng-bind="visitor.session.user.login"></span>\n        <span class="caret"></span>\n      </button>\n      <ul class="dropdown-menu pull-right">\n        <li><a ng-click="logout()">Logout</a></li>\n      </ul>\n    </div>\n  </div>\n</div>',controller:["$scope","workspace","project","visitor","oauth","layout",function(a,b,c,d,e,f){return a.workspace=b,a.project=c,a.visitor=d,a.layout=f,a.login=function(){var b;return a.disableLogin=!0,b=e.authenticate().then(function(a){return d.login(a)}),b["finally"](function(){return a.disableLogin=!1})},a.logout=function(){var b;return a.disableLogout=!0,b=d.logout(),b["finally"](function(){return a.disableLogout=!1})}}]},"sidebar@editor":{template:'<ul class="list-group">\n  <li class="list-group-item" ng-class="{active: $index==workspace.getActiveFileIndex()}" ng-repeat="file in project.getFiles() track by file.filename" ng-dblclick="fileRename(file.filename)" ng-click="workspace.open(file.filename)">\n    <button type="button"  ng-click="fileRemove(file.filename)" class="close remover" stop-propagation="click" data-dismiss="alert" aria-hidden="true" tooltip="Delete this file" tooltip-append-to-body="true" tooltip-placement="right">&times;</button>\n    <i class="icon-file-alt"></i>&nbsp;<span ng-bind="file.filename"></span>\n    <button class="btn btn-xs btn-link pull-right unsplit" ng-click="workspace.close(file.filename)" ng-if="workspace.isFileOpen(file.filename) && workspace.getSplitCount() > 1" stop-propagation="click" tooltip="Close this file\'s split" tooltip-append-to-body="true" tooltip-placement="right">\n      <i class="icon-resize-small"></i>\n    </button>\n    <button class="btn btn-xs btn-link pull-right split" ng-click="workspace.open(file.filename, {split: true})" ng-if="!workspace.isFileOpen(file.filename)" stop-propagation="click" tooltip="Open file in a new split" tooltip-append-to-body="true" tooltip-placement="right">\n      <i class="icon-columns"></i>\n    </button>\n  </li>\n  <li class="list-group-item add-new" ng-click="fileCreate()">\n    <i class="icon-file"></i>\n    Add file...\n  </li>\n</ul>\n<fieldset>\n  <form>\n    <div class="form-group">\n      <textarea class="form-control" rows="3" ng-model="plunkInfo.description" placeholder="Plunk description" tooltip="Add a brief description of your plunk" tooltip-append-to-body="true" tooltip-placement="right"></textarea>\n    </div>\n    <div class="checkbox">\n      <label tooltip="{{plunkInfo.private && \'Only users who know the url of the plunk will be able to view it\' || \'Anyone can discover this plunk\'}}" tooltip-append-to-body="true" tooltip-placement="right">\n        <input type="checkbox" ng-model="plunkInfo.private"> Private\n      </label>\n    </div>\n  </form>\n</fieldset>\n',controller:["$scope","project","workspace","notifier",function(a,b,c,d){return a.project=b,a.workspace=c,a.fileCreate=function(){return d.prompt("Filename?").then(function(a){return a?(b.fileCreate(a),c.open(a)):void 0})},a.fileRename=function(a){return b.hasFile(a)?d.prompt("Rename "+a+" to:").then(function(c){return c?b.fileRename(a,c):void 0}):void 0},a.fileRemove=function(a){return b.getFileCount()<=1?d.warn("Unable to delete all files"):b.hasFile(a)?d.confirm("Are you sure you would like to delete "+a+"?").then(function(c){return c?b.fileRemove(a):void 0}):void 0}}]},"paneselector@editor":{template:'<ul class="list-unstyled">\n  <li ng-repeat="(paneName, paneDef) in multipane.panes" tooltip="{{paneDef.description}}" tooltip-placement="left" tooltip-append-to-body="true">\n    <button class="btn btn-default" ng-class="{active: multipane.isActive(paneName) && multipane.isOpen()}" ng-click="multipane.toggle(paneName)">\n      <i ng-class="paneDef.class"></i>\n    </button>\n  </li>\n</ul>\n',controller:["$scope","multipane",function(a,b){return a.multipane=b}]},"":{template:'<div class="plunker-editor-layout">\n  <border-layout class="outer" plunker-disabler="editor">\n    <pane class="plunker-toolbar" options="layout.current.toolbar">\n      <div class="pull-left toolbar-template-toggler">\n        <button class="btn btn-sm btn-default" ng-class="{active: !layout.current.templates.closed}" ng-click="workspace.togglePane(\'templates\')" tooltip="Toggle the templates pane" tooltip-append-to-body="true" tooltip-placement="right">\n          <i class="icon-briefcase"></i>\n        </button>\n      </div>\n      <div ui-view="toolbar"></div>\n    </pane>\n    \n    <pane class="plunker-templates" options="layout.current.templates">\n      <div ui-view="templates"></div>\n    </pane>\n    \n    <pane class="plunker-paneselector" options="{anchor: \'east\', size: \'50px\', order: 8, closed: false}">\n      <div ui-view="paneselector"></div>\n    </pane>\n    \n    <pane class="plunker-multipane" options="layout.current.multipane">\n      <div plunker-multipane>\n      </div>\n    </pane>\n    \n    <pane class="plunker-sidebar" options="{anchor: \'west\', size: \'200px\', min: \'200px\', max: \'300px\', order: 1, handle: 4}">\n      <div ui-view="sidebar"></div>\n    </pane>\n    \n    <pane class="plunker-previewer" options="layout.current.preview">\n      <previewer></previewer>\n    </pane>\n    \n    <pane class="plunker-editor" options="{anchor: \'center\'}">\n      <border-layout>\n        <pane options="{order:workspace.getSplitCount()-$index, anchor: $index!=workspace.getSplitCount() - 1 && \'west\', size: 100/workspace.getSplitCount() + \'% - 1px\', handle: 2}" ng-repeat="fileIndex in workspace.getSplits() track by fileIndex"><div ace-editor="fileIndex"></div></pane>\n      </border-layout>\n    </pane>\n  </border-layout>\n  <div ui-view></div>\n</div>',onEnter:["layout",function(a){return a.current.templates.closed=!0}],controller:["$scope","workspace","project","layout",function(a,b,c,d){return a.workspace=b,a.project=c,a.layout=d}]}}}),a.state("editor.reset",{template:"",controller:["$state","project","dirty","notifier","updater","basePlunk","disabler",function(a,b,c,d,e,f){return b.reset(f),a.transitionTo("editor.new")}]}),a.state("editor.new",{url:"/?import",template:"",onEnter:["layout",function(a){return a.current.templates.closed=!1}],controller:["$q","$stateParams","disabler","workspace","project","basePlunk","notifier","updater","importer","dirty",function(a,b,c,d,e,f,g,h,i,j){var k;return k=a.when(function(){return b["import"]?i["import"](b["import"]):f}()),k=k.then(function(a){return h.update(a)}),k.then(function(a){return e.reset(a),g.success("Plunk reset")},function(){return g.warn("Unable to update dependencies")}),k["finally"](function(){return j.markClean(),e.hasFile("index.html")?d.open("index.html"):void 0}),c.enqueue("editor",k)}]}),a.state("editor.plunk",{url:"/{plunkId:[a-zA-Z0-9]+}",template:"",onEnter:["layout",function(a){return a.current.templates.closed=!0}],controller:["$stateParams","$state","disabler","workspace","project","basePlunk","notifier","updater","layout","dirty",function(a,b,c,d,e,f,g,h,i,j){var k;return c.enqueue("editor",k=e.openPlunk(a.plunkId).then(function(){return g.success("Opened plunk: "+a.plunkId),j.markClean(),e.hasFile("index.html")?d.open("index.html"):void 0},function(){return g.error("Failed to load plunk"),b.transitionTo("editor.reset")}))}]}),a.state("editor.gist",{url:"/gist:{gistId:[0-9]+|[0-9a-z]{20}}",template:"",controller:["$stateParams","$q","$http","$scope","$state","$timeout","project","notifier","disabler","layout","updater","dirty",function(a,b,c,d,e,f,g,h,i,j,k){var l,m;return i.enqueue("editor",m=c.jsonp("https://api.github.com/gists/"+a.gistId+"?callback=JSON_CALLBACK")),l=m.then(function(c){var d,e,f,g,i,j,l;if(c.data.meta.status>=400)return b.reject("Gist not found");if(g=c.data.data,i={"private":!0,files:[]},j=g.files["plunker.json"])try{angular.extend(i,angular.fromJson(j.content))}catch(m){d=m,h.warn("Unable to parse the plunker.json file")}i.description=g.description||"https://gist.github.com/"+a.gistId,l=g.files;for(f in l)e=l[f],"plunker.json"!==f&&i.files.push({filename:f,content:e.content});return k.update(i)["catch"](function(){return h.warn("Unable to update dependencies"),b.resolve(i)})}),l.then(function(b){return g.reset(b),h.success("Imported gist "+a.gistId),e.go("editor.edit")},function(){return h.error("Unable to import gist "+a.gistId),e.go("editor.reset")})}]})}]),c.run(["$rootScope","$state",function(a){return a.$on("$stateChangeStart",function(a,b,c,d){return console.log("$stateChangeStart",b.name,"<--",d.name)}),a.$on("$stateChangeError",function(a,b,c,d,e,f){return console.log("$stateChangeError",b.name,"-/-",d.name),console.error(f)}),a.$on("$stateChangeSuccess",function(a,b,c,d){console.log("$stateChangeSuccess",b.name,"<==",d.name,c),"editor.edit"===b.name&&"editor.new"===d.name})}])}).call(this)},{"../../vendor/angular-ui/ui-bootstrap":34,"../../vendor/angular-ui/ui-router":35,"../../vendor/angular/angular":37,"../../vendor/angular/angular-cookies":36,"../directives/aceEditor.coffee":3,"../directives/borderLayout.coffee":4,"../directives/previewer.coffee":5,"../directives/stopPropagation.coffee":6,"../directives/taglist.coffee":7,"../panes/config.coffee":8,"../services/api.coffee":11,"../services/basePlunk.coffee":12,"../services/collab.coffee":13,"../services/dirty.coffee":15,"../services/disabler.coffee":16,"../services/importer.coffee":18,"../services/keybindings.coffee":19,"../services/layout.coffee":20,"../services/multipane.coffee":21,"../services/notifier.coffee":22,"../services/oauth.coffee":23,"../services/project.coffee":24,"../services/session.coffee":25,"../services/updater.coffee":28,"../services/workspace.coffee":31,fs:43}],2:[function(a){(function(){var b,c;b=a("fs"),a("../../vendor/angular/angular"),a("../../vendor/angular-deckgrid/angular-deckgrid"),a("../services/api.coffee"),a("../services/url.coffee"),c=angular.module("plunker.app.landing",["ui.router","akoenig.deckgrid","plunker.service.api","plunker.service.url"]),c.run(["$templateCache",function(a){return a.put("/partials/card.html",'<div class="plunk-card" ng-show="card.id" ng-class="{starred: card.thumbed, owned: card.token}">\n  <dic class="plunk-card-body">\n    <div class="plunk-card-image">\n      <div class="plunk-card-meta">\n        <plunker-plunk-info plunk="plunk"></plunker-plunk-info>\n        <ul class="meta inline">\n          <li ng-show="card.fork_of" tooltip-placement="bottom" tooltip="This plunk was forked from another">\n            <plunker-inline-plunk plunk="card.parent"><i class="icon-share-alt"></i></plunker-inline-plunk>\n          </li>\n          <li ng-show="card.thumbed" tooltip-placement="bottom" tooltip="You starred this Plunk">\n            <a ng-href="/users/{{visitor.user.login}}/favorites"><i class="icon-pushpin"></i></a>\n          </li>\n          <li ng-show="card.private" tooltip-placement="bottom" tooltip="Private plunk - only you see this plunk listed here">\n            <a ng-href="{{card.id}}"><i class="icon-eye-close"></i></a>\n          </li>\n        </ul>\n      </div>\n      <ul class="plunk-card-operations">\n        <li><a class="btn" title="Edit this Plunk" ng-href="/edit/{{card.id}}"><i class="icon-edit"></i></a></li>\n        <li><a class="btn" title="View this Plunk in an overlay" ng-click="showQuickView(plunk, $event)"><i class="icon-play"></i></a></li>\n        <li><a class="btn" title="View the detailed information about this Plunk" ng-href="/{{card.id}}"><i class="icon-info-sign"></i></a></li>\n        <li><a class="btn" title="Open the embedded view of this Plunk" ng-href="{{url.embed}}/{{card.id}}/" target="_blank"><i class="icon-external-link"></i></a></li>\n        <li ng-show="card.isWritable()"><a class="btn btn-danger" title="Delete this plunk" ng-click="confirmDelete(plunk)"><i class="icon-trash"></i></a></li>\n        <li ng-show="visitor.logged_in && card.thumbed"><button title="Unstar this Plunk" class="btn starred" ng-click="card.star()"><i class="icon-star"></i></button></li>\n        <li ng-show="visitor.logged_in && !card.thumbed"><button title="Star this Plunk" class="btn" ng-click="card.star()"><i class="icon-star"></i></button></li>\n      </ul>\n      <div class="plunk-card-image-container">\n        <img src="http://placehold.it/248x186&text=Loading..." ng-src="http://immediatenet.com/t/l3?Size=1024x768&URL={{card.raw_url}}?_={{card.updated_at | date:\'yyyy-MM-ddTHH:mm:ssZ\'}}" />\n      </div>\n    </div>\n    <div class="plunk-card-about">\n      <h4 title="{{card.description}}" ng-bind="card.description"></h4>\n      <div class="plunk-card-about-author">\n        <plunker-inline-user user="card.user"></plunker-inline-user>\n        <abbr class="timeago updated_at" title="{{card.updated_at}}" ng-bind="card.updated_at | date:\'medium\'"></abbr>\n      </div>\n      <plunker-taglist tags="card.tags" ng-show="tags.length"></plunker-taglist>\n      <div class="plunk-card-about-readme" ng-show="markdown" markdown="markdown">\n      </div>\n    </div>\n  </div>\n</div>')}]),c.config(["$stateProvider","$urlRouterProvider",function(a){return a.state("home",{url:"/",template:'<nav class="navbar navbar-default navbar-fixed-top" role="navigation">\n  <div class="container">\n    <ul class="nav navbar-nav">\n      <li><a ui-sref="editor.reset">Editor</a></li>\n    </ul>\n  </div>\n</nav>\n<div class="container">\n  <div class="row">\n    <div deckgrid source="plunks" card-template="/partials/card.html" class="deckgrid"></div>\n  </div>\n</div>',controller:["$scope","api",function(a,b){return a.plunks=[],b.all("plunks").allUrl("plunks","trending").getList().then(function(b){return angular.copy(b,a.plunks)})}]}),a.state("view",{url:"/:plunkId",template:'<border-layout class="outer">\n  <pane class="plunker-toolbar" options="{anchor:\'north\',size:\'40px\'}">\n    <div class="pull-left">\n      <a class="plunker-brand" ui-sref="home">Plunker <sub class="version">1.7.0</sub></a>\n    </div>\n  </pane>\n  \n  <pane options="{anchor:\'east\',size:\'20%\',max:\'600px\',min:\'400px\',handle:4}">\n    <h1>Plunk info</h1>\n  </pane>\n  \n  <pane class="plunker-viewer">\n    <iframe ng-src="{{viewUrl}}" src="about:blank" width="100%" height="100%" frameborder="0"></iframe>    \n  </pane>\n</border-layout>',resolve:{plunk:["$stateParams","api",function(a,b){return b.all("plunks").one(a.plunkId).get()}]},controller:["$scope","$sce","plunk","url",function(a,b,c,d){return a.viewUrl=b.trustAsResourceUrl(""+d.run+"/plunks/"+c.id+"/"),a.plunk=c}]})}])}).call(this)},{"../../vendor/angular-deckgrid/angular-deckgrid":32,"../../vendor/angular/angular":37,"../services/api.coffee":11,"../services/url.coffee":29,fs:43}],3:[function(a){(function(){var b;a("../services/session.coffee"),a("../services/types.coffee"),a("../services/settings.coffee"),a("../services/workspace.coffee"),a("../services/keybindings.coffee"),b=angular.module("plunker.directive.aceEditor",["plunker.service.session","plunker.service.settings","plunker.service.types","plunker.service.workspace","plunker.service.keybindings"]),b.service("aceSessions",["$rootScope","session","settings","types",function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p;return e=ace.require("ace/edit_session").EditSession,h=ace.require("ace/undomanager").UndoManager,g=ace.require("ace/range").Range,f=function(){function b(b,f){var g=this;this.filename=b,this.$destructors=[],this.undoManager=new h,this.editSession=new e(f),this.editSession.setUndoManager(this.undoManager),this.editSession.setUseWorker(!0),this.editSession.setUseSoftTabs(!0),this.document=this.editSession.getDocument(),this.$destructors.push(a.$watch(function(){return g.filename},function(a){return g.editSession.setMode("ace/mode/"+d.getByFilename(a).name)})),this.$destructors.push(a.$watch(function(){return c.editor.tab_size},function(a){return null!=a?g.editSession.setTabSize(a):void 0})),this.$destructors.push(a.$watch(function(){return c.editor.wrap.enabled},function(a){return g.editSession.setUseWrapMode(a)})),this.$destructors.push(a.$watch(function(){return c.editor.wrap.range},function(a){return a?g.editSession.setWrapLimitRange(a.min,a.max):void 0},!0)),this.$setupEventHandlers()}return b.prototype.$setupEventHandlers=function(){var b,c=this;return b=function(b){return a.$$phase?void 0:a.$apply(function(){var a,d;if(!(a=j.getFileByIndex(c.getIndex())))throw new Error("Buffers and session are out of sync");switch(d=c.document.getNewLineCharacter(),b.data.action){case"insertText":j.textInsert(c.filename,c.document.positionToIndex(b.data.range.start),b.data.text);break;case"insertLines":j.textInsert(c.filename,c.document.positionToIndex(b.data.range.start),b.data.lines.join(d)+d);break;case"removeText":j.textRemove(c.filename,c.document.positionToIndex(b.data.range.start),b.data.text);break;case"removeLines":j.textRemove(c.filename,c.document.positionToIndex(b.data.range.start),b.data.lines.join(d)+d)}return a.content!==c.document.getValue()?console.error("[ERR] Local session out of sync",c.filename,a.content,c.document.getValue()):void 0})},this.editSession.on("change",b),this.$destructors.push(function(){return c.editSession.off("change",b)})},b.prototype.getIndex=function(){return i.indexOf(this)},b.prototype.rename=function(a){this.filename=a},b.prototype.textInsert=function(a,b){return this.document.insert(this.document.indexToPosition(a),b)},b.prototype.textRemove=function(a,b){return this.document.remove(g.fromPoints(this.document.indexToPosition(a),this.document.indexToPosition(a+b.length)))},b.prototype.destroy=function(){var a,b,c,d,e;for(d=this.$destructors,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(a());return e},b}(),j=b.createClient("project"),i=[],k=function(a,b,c){return null==c&&(c=""),i.splice(a,0,new f(b,c))},l=function(a){return i[a].destroy(),i.splice(a,1)},m=function(a,b){return i[a].rename(b)},o=function(a,b,c){return i[a].textInsert(b,c)},p=function(a,b,c){return i[a].textRemove(b,c)},n=function(a){for(var b,c,d,e,f;i.length;)l(i.length-1);for(f=[],c=d=0,e=a.length;e>d;c=++d)b=a[c],f.push(k(c,b.filename,b.content));return f},j.on("reset",function(a,b){return n(b.files)}),j.on("fileCreate",function(a){return k(a.index,a.filename,a.text)}),j.on("fileRemove",function(a){return l(a.index)}),j.on("fileRename",function(a){return m(a.index,a.filename)}),j.on("textInsert",function(a){return o(a.index,a.offset,a.text)}),j.on("textRemove",function(a){return p(a.index,a.offset,a.text)}),n(j.getSnapshot().files),{findByIndex:function(a){return i[a]},findByFilename:function(a){return i[j.getFileIndex(a)]}}}]),b.directive("aceEditor",["$rootScope","settings","aceSessions","session","workspace","project","keybindings",function(a,b,c,d,e,f,g){var h,i,j;return h=ace.require("ace/editor").Editor,i=ace.require("ace/virtual_renderer").VirtualRenderer,j=d.createClient("Editor"),{require:"^?aceSplitEditor",restrict:"A",link:function(d,k,l){var m;return m=new h(new i(k[0],"ace/theme/"+(b.editor.theme||"textmate"))),m.setBehavioursEnabled(!0),m.keyBinding.addKeyboardHandler(g.commands),m.setFontSize(b.editor.font_size||12),ace.config.loadModule("ace/ext/language_tools",function(){return m.setOptions({enableBasicAutocompletion:!0,enableSnippets:!0})}),d.$watch(function(){return b.editor.theme},function(){return m.setTheme("ace/theme/"+(b.editor.theme||"textmate"))}),d.$watch(function(){return b.editor.font_size},function(a){return m.setFontSize(a||12)}),d.$watch(function(){return f.getFileByIndex(d.$eval(l.aceEditor))},function(){var a;if(!(a=c.findByIndex(d.$eval(l.aceEditor))))throw new Error("Invalid file index");return m.setSession(a.editSession)}),d.$watch(function(){return e.getActiveFileIndex()},function(a){return a===d.$eval(l.aceEditor)?m.focus():void 0}),m.on("focus",function(){return a.$$phase?void 0:d.$apply(function(){var a,b;if(b=d.$eval(l.aceEditor),!(a=c.findByIndex(b)))throw new Error("Invalid file index");return j.cursorSetFile(a.filename)})}),d.$on("$destroy",function(){return m.destroy()}),d.$on("border-layout-reflow",function(){return m.resize()})}}}])}).call(this)},{"../services/keybindings.coffee":19,"../services/session.coffee":25,"../services/settings.coffee":26,"../services/types.coffee":27,"../services/workspace.coffee":31}],4:[function(){(function(){var a,b,c,d=[].slice;b=angular.module("fa.borderLayout",[]),c=function(a,b){var c;return c=!1,function(){return c?void 0:(c=!0,setTimeout(function(){return c=!1},a),b.call.apply(b,[this].concat(d.call(arguments))))}},a=function(){function a(a,b){this.width=null!=a?a:0,this.height=null!=b?b:0,this.top=0,this.right=0,this.bottom=0,this.left=0}return a.prototype.calculateSize=function(a,b){var c,d,e,f;if(null==b&&(b=0),f=this.getSize(a),c=this.getAvailableSize(a),angular.isNumber(b))return b>=1?Math.round(b):b>=0?Math.round(b*f):0;if(b=b.replace(/\s+/gm,""),(e=b.split("-")).length>1)return this.calculateSize(a,e.shift())-this.calculateSize(a,e.join("+"));if((e=b.split("+")).length>1)return this.calculateSize(a,e.shift())+this.calculateSize(a,e.join("+"));if(d=b.match(/^(\d+)px$/))return parseInt(d[1],10);if(d=b.match(/^(\d+(?:\.\d+)?)&$/))return Math.round(c*parseFloat(d[1])/100);if(d=b.match(/^(\d+(?:\.\d+)?)%$/))return Math.round(f*parseFloat(d[1])/100);throw new Error("Unsupported size: "+b)},a.prototype.consume=function(a,b){var c;switch(null==b&&(b=0),a){case"north":c={top:""+this.top+"px",right:""+this.right+"px",bottom:"auto",left:""+this.left+"px",height:""+b+"px",width:"auto"},this.top+=b;break;case"east":c={top:""+this.top+"px",right:""+this.right+"px",bottom:""+this.bottom+"px",left:"auto",width:""+b+"px",height:"auto"},this.right+=b;break;case"south":c={top:"auto",right:""+this.right+"px",bottom:""+this.bottom+"px",left:""+this.left+"px",height:""+b+"px",width:"auto"},this.bottom+=b;break;case"west":c={top:""+this.top+"px",right:"auto",bottom:""+this.bottom+"px",left:""+this.left+"px",width:""+b+"px",height:"auto"},this.left+=b}return 0===b&&(c.display="none"),c},a.prototype.getInnerRegion=function(){return new a(this.width-this.right-this.left,this.height-this.top-this.bottom)},a.prototype.getSize=function(a){switch(a){case"vertical":return this.height;case"horizontal":return this.width}},a.prototype.getAvailableSize=function(a){switch(a){case"vertical":return this.height-this.top-this.bottom;case"horizontal":return this.width-this.right-this.left}},a.prototype.toString=function(){return"{"+this.top+", "+this.right+", "+this.bottom+", "+this.left+"}, {"+this.width+", "+this.height+"}"},a}(),b.directive("pane",[function(){return{restrict:"E",replace:!0,require:["pane","^borderLayout"],transclude:!0,scope:!0,template:'<div class="border-layout-pane">\n  <div class="border-layout-pane-overlay" ng-style="styleContent"></div>\n  <div class="border-layout-pane-handle" layout-handle ng-style="styleHandle"></div>\n  <div class="border-layout-pane-scroller" ng-style="styleContent"></div>\n</div>',controller:["$scope","$element","$attrs","$parse",function(a,b,c){var d,e,f,g,h;return g=this,h=b.children(),e=h[0],d=h[1],f=h[2],a.$watch(c.options,function(a){return a?(g.anchor=a.anchor||"center",g.orientation=g.getOrientation(g.anchor),g.target=a.size,g.max=a.max||Number.MAX_VALUE,g.min=a.min||0,g.open=!a.closed,g.order=parseInt(a.order||0,10),g.handleSizeOpen=parseInt(a.handleOpen||a.handle||0,10),g.handleSizeClosed=parseInt(a.handleClosed||a.handle||0,10),g.layout.reflow()):void 0},!0),this.children=[],this.openSize=0,this.attachChild=function(a){return this.children.push(a)},this.getOrientation=function(a){switch(null==a&&(a=g.anchor),a){case"north":case"south":return"vertical";case"east":case"west":return"horizontal"}},this.getContentStyle=function(a,b){var c;switch(c={top:0,right:0,bottom:0,left:0},a){case"north":c.bottom=""+b+"px";break;case"east":c.left=""+b+"px";break;case"south":c.top=""+b+"px";break;case"west":c.right=""+b+"px"}return c},this.getHandleStyle=function(a,b,c){switch(a){case"north":return{height:""+b.calculateSize("vertical",c)+"px",right:0,left:0,bottom:0};case"south":return{height:""+b.calculateSize("vertical",c)+"px",right:0,left:0,top:0};case"east":return{width:""+b.calculateSize("horizontal",c)+"px",top:0,bottom:0,left:0};case"west":return{width:""+b.calculateSize("horizontal",c)+"px",top:0,bottom:0,right:0}}},this.onHandleDown=function(){return b.addClass("active"),this.layout.onHandleDown()},this.onHandleUp=function(){return b.removeClass("active"),this.layout.onHandleUp()},this.toggle=function(d){return null==d&&(d=!g.open),g.open=d,a.$eval(c.options).closed=!0,d?this.size=this.openSize:this.openSize=this.size,d?b.removeClass("closed"):b.addClass("closed"),this.layout.reflow()},this.reflow=function(a,c){var h,i,j,k,l,m,n,o,p,q,r,s;if(null==c&&(c=g.target),h=g.anchor||"center",open?b.removeClass("closed"):b.addClass("closed"),"center"===h?b.css({top:""+a.top+"px",right:""+a.right+"px",bottom:""+a.bottom+"px",left:""+a.left+"px",width:"auto",height:"auto"}):("north"===h||"east"===h||"south"===h||"west"===h)&&(l=this.getOrientation(h),g.open?(j=a.calculateSize(l,g.handleSizeOpen||0),m=a.calculateSize(l,c),m=Math.min(m,a.calculateSize(l,g.max)),m=Math.max(m,a.calculateSize(l,g.min)),m=Math.min(m,a.getAvailableSize(l)),m=Math.max(m,j+2)):(j=a.calculateSize(l,g.handleSizeClosed||0),m=j),this.size=m,n=a.consume(h,m),o=this.getContentStyle(h,j),p=this.getHandleStyle(h,a,j),b.attr("style","").css(n),angular.element(e).attr("style","").css(o),angular.element(f).attr("style","").css(o),angular.element(d).attr("style","").css(p)),this.children.length)for(k=a.getInnerRegion(),s=this.children,q=0,r=s.length;r>q;q++)i=s[q],k=i.reflow(k);
return a},this.resize=function(a){return g.target=a||0,this.layout.reflow()},this}],compile:function(a,b,c){return function(a,b,d,e){var f,g;return f=e[0],g=e[1],a=a.$new(),a.pane=f,f.layout=g,g.attachChild(f),a.$watch("constrained",function(a){return a?b.addClass("border-layout-constrained"):b.removeClass("border-layout-constrained")}),a.$on("$destroy",function(){return g.removeChild(f)}),c(a,function(a){return b.find("div").eq(2).append(a)})}}}}]),b.directive("layoutHandle",["$window",function(a){return{restrict:"A",require:["?^pane","^?borderLayout"],link:function(b,d,e,f){var g,h,i,j,k;return k=f[0],j=f[1],k?(i=d[0],g=5,h=300,b.$watch(function(){return k.getOrientation()},function(a){switch(d.removeClass("vertical"),d.removeClass("horizontal"),a){case"vertical":return d.addClass("vertical");case"horizontal":return d.addClass("horizontal")}}),i.addEventListener("mousedown",function(e){var f,j,l,m,n,o,p,q,r,s,t;if(0===e.button)return f=k.anchor,"north"===f||"south"===f?j="screenY":("west"===f||"east"===f)&&(j="screenX"),"north"===f||"west"===f?p=1:("south"===f||"east"===f)&&(p=-1),r={x:e.screenX,y:e.screenY},q=e[j],s=k.size,t=Date.now(),k.onHandleDown(),i.unselectable="on",i.onselectstart=function(){return!1},i.style.userSelect=i.style.MozUserSelect="none",e.preventDefault(),e.defaultPrevented=!0,e=null,l=function(){return b.$apply(function(){return k.toggle()})},m=function(a){return d.addClass("border-layout-pane-moving"),b.$apply(function(){var b;return k.resize(b=s+p*(a[j]-q))}),a.preventDefault(),a.defaultPrevented=!0,a=null},o=function(b){var c,d,e;return d=Math.pow(b.screenX-r.x,2)+Math.pow(b.screenY-r.y,2),e=Date.now()-t,a.removeEventListener("mousemove",n,!0),a.removeEventListener("mouseup",o,!0),c=function(){return b.preventDefault(),b.defaultPrevented=!0,b=null,k.onHandleUp()},d<=Math.pow(g,2)&&h>=e?(l(b),c(),void 0):(m(b),c())},n=c(10,m),a.addEventListener("mousemove",n,!0),a.addEventListener("mouseup",o,!0)})):void 0}}}]),b.directive("borderLayout",["$window","$timeout",function(b,c){return{restrict:"E",replace:!0,require:["borderLayout","^?pane"],transclude:!0,template:'<div class="border-layout">\n</div>',controller:["$scope","$element","$attrs",function(b,c){var d;return d=this,this.children=[],this.attachChild=function(a){return this.children.push(a)},this.removeChild=function(a){var b;return 0>(b=this.children.indexOf(a))?void 0:this.children.splice(b,1)},this.onHandleDown=function(){return c.addClass("active")},this.onHandleUp=function(){return c.removeClass("active"),b.$broadcast("border-layout-reflow")},this.reflow=function(e){var f,g,h,i,j,k;if(!d.reflowing){for(d.reflowing=!0,h=c[0].offsetWidth,g=c[0].offsetHeight,e||(e=new a(h,g)),this.children.sort(function(a,b){return b.order-a.order}),k=this.children,i=0,j=k.length;j>i;i++)f=k[i],e=f.reflow(e);return b.$broadcast("border-layout-reflow",Date.now()),d.reflowing=!1}},this}],compile:function(a,d,e){return function(a,d,f,g){var h,i;return h=g[0],i=g[1],a=a.$new(),i&&i.attachChild(h),a.$on("border-layout-reflow",function(){return i?void 0:h.reflow()}),b.addEventListener("resize",function(b){return b.stopPropagation(),a.$apply(function(){return h.reflow()})}),c(function(){return i?void 0:h.reflow()}),e(a,function(a){return d.html("").append(a)})}}}}])}).call(this)},{}],5:[function(a){(function(){var b,c,d;c=a("genid"),b=a("lodash.debounce"),a("../services/session.coffee"),a("../services/types.coffee"),a("../services/url.coffee"),a("../services/settings.coffee"),a("../services/annotations.coffee"),a("../services/layout.coffee"),a("../services/disabler.coffee"),a("../services/debounce.js"),d=angular.module("plunker.directive.previewer",["plunker.service.session","plunker.service.url","plunker.service.settings","plunker.service.annotations","plunker.service.layout","plunker.service.disabler","plunker.service.debounce"]),d.directive("previewer",["$timeout","$state","session","url","settings","annotations","layout","disabler","debounce",function(a,b,d,e,f,g,h,i,j){return{restrict:"E",replace:!0,scope:{session:"="},template:'<div>\n  <div class="plunker-preview-container" ng-class="{message: message}" plunker-disabler="previewer">\n    <iframe id="plunkerPreviewTarget" name="plunkerPreviewTarget" src="about:blank" width="100%" height="100%" frameborder="0"></iframe>\n  </div>\n  <div class="plunker-preview-message alert alert-danger" ng-show="message">\n    <button type="button" class="close" ng-click="message=\'\'" aria-hidden="true">&times;</button>\n    <span ng-bind="message"></span>\n  </div>\n</div>',link:function(a){var g,i,k,l,m,n,o,p,q;return a.previewUrl||(a.previewUrl=""+e.run+"/"+c()+"/"),n=document.getElementById("plunkerPreviewTarget"),o=!1,i=d.createClient("previewer"),p=function(){var c,d,e,f,g,h,j;if(b.includes("editor.new")||b.includes("editor.plunk")){for(f=i.getSnapshot(),e=document.createElement("form"),e.style.display="none",e.setAttribute("method","post"),e.setAttribute("action",a.previewUrl),e.setAttribute("target","plunkerPreviewTarget"),j=f.files,g=0,h=j.length;h>g;g++)d=j[g],c=document.createElement("input"),c.setAttribute("type","hidden"),c.setAttribute("name","files["+d.filename+"][content]"),c.setAttribute("value",d.content),e.appendChild(c);return document.body.appendChild(e),e.submit(),document.body.removeChild(e)}},k=j(p,f.previewer.delay),g=function(){return i.on("reset",k),i.on("fileCreate",k),i.on("fileRename",k),i.on("fileRemove",k),i.on("textInsert",k),i.on("textRemove",k),o=!0},q=function(){return i.off("reset",k),i.off("fileCreate",k),i.off("fileRename",k),i.off("fileRemove",k),i.off("textInsert",k),i.off("textRemove",k),o=!1},m=function(){return p(),g()},l=function(){return n.contentWindow.location="about:blank",q()},a.$on("$stateChangeSuccess",function(){return b.includes("editor.new")||b.includes("editor.plunk")?o?void 0:m():l()}),a.$watch(function(){return f.previewer.delay},function(a,b){return a!==b?k.setWait(a):void 0}),a.$watch(function(){return h.current.preview.closed},function(a){return a?l():m()})}}}])}).call(this)},{"../services/annotations.coffee":10,"../services/debounce.js":14,"../services/disabler.coffee":16,"../services/layout.coffee":20,"../services/session.coffee":25,"../services/settings.coffee":26,"../services/types.coffee":27,"../services/url.coffee":29,genid:42,"lodash.debounce":44}],6:[function(){(function(){var a;a=angular.module("plunker.directive.stopPropagation",[]),a.directive("stopPropagation",function(){return{restrict:"A",link:function(a,b,c){var d,e;return e=null,d=function(a){return a.stopPropagation()},c.$observe("stopPropagation",function(a){return e&&b.off(e,d),b.on(a,d)})}}})}).call(this)},{}],7:[function(a){(function(){var b;a("../directives/stopPropagation.coffee"),b=angular.module("plunker.directive.taglist",["plunker.directive.stopPropagation"]),b.directive("plunkerTaglist",function(){return{restrict:"E",replace:!0,scope:{tags:"="},template:'<ul class="plunker-taglist">\n  <li ng-repeat="tag in tags"><a stop-propagation="click" ng-bind="tag"></a></li>\n</ul>'}})}).call(this)},{"../directives/stopPropagation.coffee":6}],8:[function(a){(function(){var b;a("../services/multipane.coffee"),a("../services/settings.coffee"),b=angular.module("plunker.pane.config",["plunker.service.settings"]),b.run(["multipane","settings",function(a,b){return a.add("config",{"class":"icon-cogs",description:"Configure the editor",template:'<form role="form">\n  <fieldset>\n    <legend>Editor</legend>\n    <div class="form-group">\n      <label>Theme:</label>\n      <select class="form-control" id="opts-editor-theme" ng-model="settings.editor.theme" ng-options="theme for theme in themes"></select>\n    </div>\n    <div class="form-group">\n      <label>Font size:</label>\n      <input class="form-control" id="opts-editor-fontSize" ng-model="settings.editor.font_size" type="number" min="6" max="20" />\n    </div>\n    <div class="form-group">\n      <label>Tab size:</label>\n      <input class="form-control" id="opts-editor-tabSize" ng-model="settings.editor.tab_size" type="number" />\n    </div>\n    <div class="checkbox">\n      <label>\n        <input class="input-mini" id="opts-editor-lineWrap" ng-model="settings.editor.wrap.enabled" type="checkbox" />\n        Line wrapping\n      </label>\n    </div>\n  </fieldset>\n  <fieldset>\n    <legend>Previewer</legend>\n    <div class="form-group">\n      <label>Refresh interval:</label>\n      <input class="form-control" id="opts-previewer-delay" ng-model="settings.previewer.delay" ng-disabled="!settings.previewer.auto_refresh" type="number" />\n    </div>\n    <div class="checkbox">\n      <label>\n        <input type="checkbox" ng-model="settings.previewer.auto_refresh" />\n        Auto refresh\n      </label>\n    </div>\n  </fieldset>\n</form>',controller:["$scope",function(a){return a.settings=b,a.themes=["ambiance","chrome","clouds","clouds_midnight","crimson_editor","dawn","dreamweaver","eclipse","github","idle_fingers","kr_theme","merbivore","merbivore_soft","monokai","pastel_on_dark","solarized_dark","solarized_light","textmate","tomorrow","tomorrow_night","tomorrow_night_blue","tomorrow_night_bright","twilight","vibrant_ink","xcode"]}]})}])}).call(this)},{"../services/multipane.coffee":21,"../services/settings.coffee":26}],9:[function(a){(function(){var b;a("../vendor/angular/angular"),a("./apps/landing.coffee"),a("./apps/editor.coffee"),b=angular.module("plunker",["ui.router","plunker.app.landing","plunker.app.editor"]),b.config(["$stateProvider","$urlRouterProvider","$locationProvider",function(a,b,c){return c.html5Mode(!0).hashPrefix("!"),b.when("/edit","/edit/"),b.otherwise("/")}])}).call(this)},{"../vendor/angular/angular":37,"./apps/editor.coffee":1,"./apps/landing.coffee":2}],10:[function(){(function(){var a;a=angular.module("plunker.service.annotations",[]),a.factory("annotations",function(){return{annotations:{},update:function(a,b){var c;return null==b&&(b=[]),angular.copy(b,(c=this.annotations)[a]||(c[a]=[]))},rename:function(a,b){return this.annotations[b]=this.annotations[a]||[],delete this.annotations[a]},remove:function(a){return delete this.annotations[a]},hasError:function(){var a,b,c,d,e,f;f=this.annotations;for(c in f)for(b=f[c],d=0,e=b.length;e>d;d++)if(a=b[d],"error"===a.type)return c;return!1}}})}).call(this)},{}],11:[function(a){(function(){var b;window._=a("lodash"),a("../../vendor/restangular/restangular.js"),a("../services/url.coffee"),a("../services/visitor.coffee"),b=angular.module("plunker.service.api",["restangular","plunker.service.url","plunker.service.visitor"]),b.factory("api",["$rootScope","Restangular","url","visitor",function(a,b,c,d){return b.setBaseUrl(c.api),b.setDefaultRequestParams({sessid:d.session.id}),a.$watch(function(){return d.session.id},function(a){return b.setDefaultRequestParams({sessid:a})}),b}])}).call(this)},{"../../vendor/restangular/restangular.js":39,"../services/url.coffee":29,"../services/visitor.coffee":30,lodash:49}],12:[function(){(function(){var a;a=angular.module("plunker.service.basePlunk",[]),a.value("basePlunk",{files:[{filename:"index.html",content:'<!doctype html>\n<head>\n  <meta charset="utf-8">\n  <title>Base Plunk</title>\n  <link rel="stylesheet" href="style.css">\n  <script src="script.js"></script>\n</head>\n<body>\n  <h1>Hello Plunker</h1>\n</body>\n</html> '},{filename:"script.js",content:"// Add your code here\n\n"},{filename:"style.css",content:"/* Add your styles here */\n\n"}]})}).call(this)},{}],13:[function(a){(function(){var b,c,d,e=[].slice;b=a("../../vendor/share/bcsocket-uncompressed.js"),d=a("share/lib/client"),a("../services/session.coffee"),c=angular.module("plunker.service.collab",["plunker.service.session"]),c.factory("collab",["$rootScope","$q","session",function(a,c,f){var g,h,i;return console.log("Browserchannel",b),i=b.BCSocket(null,{reconnect:!0}),h=new d.Connection(i),g=f.createClient("share"),{connecting:!1,sessionId:null,connect:function(b){var d,f,i;return this.sessionId=b,f=c.defer(),d=this,i=h.get("json_test",this.sessionId),i.subscribe(),i.whenReady(function(){var b;return b=1<=arguments.length?e.call(arguments,0):[],console.log("[OK] Subscribed to stream",d.sessionId,i),a.$apply(function(){var a,b;return i.type?i.snapshot?(console.log("[OK] Got snapshot",i,i.getSnapshot()),g.reset(b=i.getSnapshot()),f.resolve(b)):(a={p:[],od:i.snapshot,oi:g.getSnapshot()},console.log("[OK] Document exists but is false, resetting",i,g.getSnapshot()),i.submitOp(a,function(){return f.resolve(i.snapshot)})):(console.log("[OK] Document does not exist, creating",i,g.getSnapshot()),i.create("json0",b=g.getSnapshot(),function(){return f.resolve(b)})),g.on("remoteOp",function(a){return i.submitOp(a.op)})})}),i.on("op",function(b){return a.$$phase?void 0:a.$apply(function(){return g._applyOps(b)})}),i.on("after op",function(){var a,b;return angular.equals(b=i.getSnapshot(),a=g.getSnapshot())?void 0:console.log("[ERR] Session out of sync",a,b)}),this.connecting=f.promise}}}])}).call(this)},{"../../vendor/share/bcsocket-uncompressed.js":40,"../services/session.coffee":25,"share/lib/client":53}],14:[function(a,b){b=angular.module("plunker.service.debounce",[]),b.factory("debounce",["$timeout","$q",function(a,b){return function(c,d,e){function f(){var f=this,i=arguments,j=function(){g=null,e||(h.resolve(c.apply(f,i)),h=b.defer())},k=e&&!g;return g&&a.cancel(g),g=a(j,d),k&&(h.resolve(c.apply(f,i)),h=b.defer()),h.promise}var g,h=b.defer();return f.setWait=function(a){d=a},f}}])},{}],15:[function(a){(function(){var b;a("../services/session.coffee"),a("../services/notifier.coffee"),b=angular.module("plunker.service.dirty",["plunker.service.session","plunker.service.notifier"]),b.factory("dirty",["session",function(a){var b,c;return b=a.createClient("plunker.service.dirty"),c=!1,b.on("reset",function(){return c=!0}),b.on("fileCreate",function(){return c=!0}),b.on("fileRemove",function(){return c=!0}),b.on("fileRename",function(){return c=!0}),b.on("textInsert",function(){return c=!0}),b.on("textRemove",function(){return c=!0}),{markClean:function(){return c=!1},markDirty:function(){return c=!0},isClean:function(){return!this.isDirty},isDirty:function(){return c}}}]),b.run(["$rootScope","$state","$location","dirty","notifier",function(a,b,c,d,e){return window.onbeforeunload=function(){return d.isDirty()?"You have unsaved changes. Are you sure you would like to leave this page?":void 0},a.$on("$stateChangeStart",function(a,c,f){return(b.includes("editor.new")||b.includes("editor.plunk"))&&d.isDirty()?(a.preventDefault(),e.confirm("You have unsaved changes. Are you would like to proceed?").then(function(a){return a?(d.markClean(),b.transitionTo(c,f)):void 0})):void 0})}])}).call(this)},{"../services/notifier.coffee":22,"../services/session.coffee":25}],16:[function(){(function(){var a;a=angular.module("plunker.service.disabler",[]),a.directive("plunkerDisabler",["disabler",function(a){return{link:function(b,c,d){var e;return e=angular.element('<div class="plunker-disabler"></div>'),b.$watch(function(){return a.state[d.plunkerDisabler]},function(a){return a?c.append(e):e.remove()})}}}]),a.factory("disabler",["$q",function(a){var b;return b={},this.state={},this.enqueue=function(b,c){var d;return d=this,d.state[b]=!0,a.when(c)["finally"](function(){return d.state[b]=!1}),c},this}])}).call(this)},{}],17:[function(a){(function(){var b,c,d,e,f=function(a,b){return function(){return a.apply(b,arguments)}};b=a("../../vendor/dominatrix/dominatrix"),d=a("semver"),e=a("lodash"),a("../services/api.coffee"),c=angular.module("plunker.service.htmlFile",["plunker.service.api"]),c.factory("htmlFile",["$q","api",function(a,c){var g;return g=function(){function g(a){this.loadPackageDefinitions=f(this.loadPackageDefinitions,this),this.updateAllPackageTags=f(this.updateAllPackageTags,this),this.toString=f(this.toString,this),this.findDeclaredDependencies=f(this.findDeclaredDependencies,this),this.write=f(this.write,this),this.doc=window.document.implementation.createHTMLDocument(""),a&&this.write(a)}return g.prototype.write=function(b){return null==b&&(b="<!doctype html>"),this.doc.open(),this.doc.write(this.originalMarkup=b),this.doc.close(),this.dependencies=[],this.packages={},a.when(this)},g.prototype.findDeclaredDependencies=function(){var b,c,d,e,f,g,h,i;for(d=this.doc.querySelectorAll("script[data-require], link[data-require]"),h=0,i=d.length;i>h;h++)c=d[h],b=angular.element(c),g="script"===c.nodeName.toLowerCase()?"scripts":"styles",(f=this.parsePackageRef(b.attr("data-require")))&&(e=this.getDependency(f.name,{range:f.range,textRange:f.textRange,version:this.parseSemver(b.attr("data-semver"))}),e[g].push(c));return a.when(this)},g.prototype.addDependency=function(a){return a=this.parsePackageRef(a),this.loadPackageDefinition(a.name,a.range)},g.prototype.getDependency=function(a,b){return null==b&&(b={}),b.textRange||(b.textRange="*"),b.range||(b.range=new d.Range(b.textRange)),this.packages[a]||(this.packages[a]={name:a,range:b.range,textRange:b.textRange,currentVersion:b.version,matchingVersions:[],scripts:[],styles:[],children:[],parents:[],loaded:null}),this.packages[a]},g.prototype.loadVersionsForPackage=function(a,b){var f;return null==b&&(b=new d.Range("*")),f=this.getDependency(a),f.loaded||(f.loaded=c.all("catalogue").all("packages").one(a).get().then(function(a){return f.versions=a.versions.sort(function(a,b){return d.rcompare(a.semver,b.semver)})})),f.loaded.then(function(a){return e.filter(a,function(a){return b.test(a.semver)})})},g.prototype.loadPackageDependencies=function(b,c){var d,f;return null==c&&(c=b.matchingVersions[0]),d=this,f=[],e.each(c.dependencies,function(a){var c;return(c=d.parsePackageRef(""+a.name+"@"+(a.range||"*")))?f.push(d.loadPackageDefinition(c.name,c.range).then(function(a){return a.parents.push(b),b.children.push(a),a})):void 0}),a.all(f).then(function(){return b})},g.prototype.loadPackageDefinition=function(b,c){var d,e;return e=this.getDependency(b,c),d=this,d.loadVersionsForPackage(b,c).then(function(f){return f.length?(e.matchingVersions=f,e.matchingVersions.length?d.loadPackageDependencies(e,e.matchingVersions[0]).then(function(){var a,b,c,f,g,h;if(0>d.dependencies.indexOf(e)){for(a=d.dependencies.length,h=e.parents,f=0,g=h.length;g>f;f++)c=h[f],0>(b=d.dependencies.indexOf(c))||(a=Math.min(a,b));d.dependencies.splice(a,0,e)}return e}):e):a.reject("No matching versions found for "+b+"@"+c)})},g.prototype.createScriptTags=function(a,b){var c,d,e,f,g,h;if(null==b&&(b=a.matchingVersions[0]),d=[],null!=b?b.scripts:void 0)for(h=b.scripts,f=0,g=h.length;g>f;f++)e=h[f],c=this.doc.createElement("script"),c.setAttribute("data-require",""+a.name+"@"+a.textRange),c.setAttribute("data-semver",b.semver),c.setAttribute("src",e),d.push(c);return d},g.prototype.createStyleTags=function(a,b){var c,d,e,f,g,h;if(null==b&&(b=a.matchingVersions[0]),d=[],null!=b?b.styles:void 0)for(h=b.styles,f=0,g=h.length;g>f;f++)e=h[f],c=this.doc.createElement("link"),c.setAttribute("data-require",""+a.name+"@"+a.textRange),c.setAttribute("data-semver",b.semver),c.setAttribute("rel","stylesheet"),c.setAttribute("href",e),d.push(c);return d},g.prototype.toString=function(){return b.domToHtml(this.doc)},g.prototype.updatePackageTags=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;if(d=function(a,b){var c,d,e,f,g;if(d=a.parentNode){for(g=[],e=0,f=b.length;f>e;e++)c=b[e],g.push(d.insertBefore(c,a));return g}},c=function(a,b){var c,d,e,f,g,h;if((d=a.nextSibling)&&(e=a.parentNode)){for(h=[],f=0,g=b.length;g>f;f++)c=b[f],h.push(e.insertBefore(c,d));return h}},e=this.createScriptTags(a),f=this.createStyleTags(a),i=!1,k=!1,e.length){for(t=a.parents,l=0,p=t.length;p>l;l++)if(g=t[l],g.scripts.length){d(g.scripts[0],e),i=!0,angular.element(a.scripts).remove();break}if(!i)for(u=a.children,m=0,q=u.length;q>m;m++)if(b=u[m],b.scripts.length){c(b.scripts[b.scripts.length-1],e),i=!0,angular.element(a.scripts).remove();break}i||(a.scripts.length?angular.element(a.scripts).replaceWith(e):(h=this.doc.querySelectorAll("head script")).length?d(h[0],e):angular.element(this.doc.getElementsByTagName("head")).append(e)),a.scripts=e}if(f.length){for(v=a.parents,n=0,r=v.length;r>n;n++)if(g=v[n],g.styles.length){d(g.styles[0],f),k=!0,angular.element(a.styles).remove();break}if(!k)for(w=a.children,o=0,s=w.length;s>o;o++)if(b=w[o],b.styles.length){c(b.styles[b.styles.length-1],f),k=!0,angular.element(a.styles).remove();break}return k||(a.styles.length?angular.element(a.styles).replaceWith(f):(j=this.doc.querySelectorAll("head link[rel=stylesheet]")).length?d(j[0],f):angular.element(this.doc.getElementsByTagName("head")).append(f)),a.styles=f}},g.prototype.updateAllPackageTags=function(){var b,c,d,e;for(e=this.dependencies.reverse(),c=0,d=e.length;d>c;c++)b=e[c],this.updatePackageTags(b);return a.when(this)},g.prototype.loadPackageDefinitions=function(){var b,c;return b=this,c=[],e.each(this.packages,function(a,d){return c.push(b.loadPackageDefinition(d,a.range))}),a.all(c).then(function(){return b.packages})},g.prototype.parsePackageRef=function(a){var b;return(b=a.split("@"))&&{name:b.shift(),textRange:b.join("@"),range:this.parseRange(b.join("@"))}},g.prototype.parseSemver=function(a){null==a&&(a="0.0.0");try{return new a.Semver(a)}catch(b){}},g.prototype.parseRange=function(a){null==a&&(a="*");try{return new d.Range(a)}catch(b){}},g}(),{create:function(a){return new g(a)}}}])}).call(this)},{"../../vendor/dominatrix/dominatrix":38,"../services/api.coffee":11,lodash:49,semver:50}],18:[function(a){(function(){var b,c,d,e,f,g;b=a("../../vendor/dominatrix/dominatrix"),g=a("lodash"),a("../services/api.coffee"),f=/^\s*tpl:([-\._a-zA-Z0-9]+)\s*$/i,c=/^\s*fiddle:([-\._a-zA-Z0-9]+)(?:@([0-9]*))?\s*$/i,d=/^\s*(?:(?:https?\:\/\/)?gist\.github\.com\/|gist\:)([0-9]+|[0-9a-z]{20})(?:#.+)?\s*$/i,e=angular.module("plunker.service.importer",["plunker.service.api"]),e.service("importer",["$q","$http","api","notifier",function(a,b,c){return{"import":function(e){var h,i,j;return(h=e.match(f))?c.all("plunks").one(h[1]).get().then(function(a){return a.files=g.values(a.files),a},function(){return deferred.reject("Plunk not found")}):(h=e.match(d))?(j=b.jsonp("https://api.github.com/gists/"+h[1]+"?callback=JSON_CALLBACK"),i=j.then(function(b){var c,d,e,f,g,h,i;if(b.data.meta.status>=400)return a.reject("Gist not found");if(f=b.data.data,g={"private":!0,files:[]},h=f.files["plunker.json"])try{angular.extend(g,angular.fromJson(h.content))}catch(j){return c=j,a.reject("Unable to parse the plunker.json file")}g.description=f.description||"https://gist.github.com/"+$stateParams.gistId,i=f.files;for(e in i)d=i[e],"plunker.json"!==e&&g.files.push({filename:e,content:d.content});return g})):a.reject("Not a recognized source")}}}])}).call(this)},{"../../vendor/dominatrix/dominatrix":38,"../services/api.coffee":11,lodash:49}],19:[function(){(function(){var a;a=angular.module("plunker.service.keybindings",[]),a.factory("keybindings",["$rootScope","$injector",function(a,b){var c,d,e,f;return d=ace.require("ace/keyboard/keybinding").KeyBinding,c=ace.require("ace/keyboard/hash_handler").HashHandler,f=ace.require("ace/lib/event"),new(e=function(){function e(){this.commands=new c,this.commands.exec=function(a){return a.exec(),!0},this.keyBinding=new d(this)}return e.prototype.attachTo=function(a){return f.addCommandKeyListener(a,this.keyBinding.onCommandKey.bind(this.keyBinding))},e.prototype.addCommand=function(c){var d;return d=c.exec||angular.noop,c.exec=function(){return a.$$phase?b.invoke(d):a.$apply(function(){return b.invoke(d)})},this.commands.addCommand(c)},e}())}])}).call(this)},{}],20:[function(){(function(){var a;a=angular.module("plunker.service.layout",[]),a.factory("layout",["$rootScope",function(a){var b,c,d;return b={toolbar:{anchor:"north",size:"40px",order:9},preview:{anchor:"south",order:0,size:"40& - 4px",closed:!1,handleOpen:4,handleClosed:0},templates:{anchor:"west",order:2,closed:!0,size:"30%"},multipane:{anchor:"east",order:0,closed:!0,size:"400px",handleOpen:4,handleClosed:0}},c=[{name:"Preview on the right",img:"/img/horizontal.png",layout:{preview:{anchor:"east",order:0,size:"50& - 4px"}}},{name:"Preview at the bottom",img:"/img/vertical.png",layout:{preview:{anchor:"south",order:1,size:"40& - 4px"},multipane:{order:3}}}],d={current:b,currentIndex:null,presets:c,isOpen:function(a){var b;return null!=(b=this.current)?b[a].closed:void 0},toggle:function(a){var b;return null!=(b=this.current)?b[a].closed=!this.current[a].closed:void 0},setLayout:function(b){var d,e,f,g,h;if(f=c[b]){this.currentIndex=b,h=f.layout;for(e in h)d=h[e],(g=this.current)[e]||(g[e]={}),angular.extend(this.current[e],d);a.$broadcast("reflow")}return this.current}},d.setLayout(1),d}])}).call(this)},{}],21:[function(a){(function(){var b;a("../services/layout.coffee"),b=angular.module("plunker.service.multipane",["plunker.service.layout"]),b.factory("multipane",["layout",function(a){return{panes:{},active:null,add:function(a,b){return b.name=a,this.panes[a]=b},activate:function(a){var b,c,d,e;this.active=null,d=this.panes,e=[];for(c in d)b=d[c],c===a&&e.push(this.active=b);return e},toggle:function(b){var c,d;return this.activate(b)?null!=(c=a.current.multipane)?c.closed=!(null!=(d=a.current.multipane)?d.closed:void 0):void 0:void 0},isActive:function(a){return this.active===this.panes[a]},isOpen:function(){var b;return!(null!=(b=a.current.multipane)?b.closed:void 0)}}}]),b.directive("plunkerMultipane",["$compile","$injector","multipane",function(a,b,c){return{restrict:"A",link:function(d,e){return d.$watch(function(){return c.active},function(c,f){var g;return f&&(e.removeClass("pane-"+f.name),c.onClose&&b.invoke(c.onClose,c,{$scope:c.scope})),c&&(g=!c.scope,c.scope||(c.scope=d.$new()),e.html(c.template),a(e.children())(c.scope),e.addClass("pane-"+c.name),c.onOpen&&b.invoke(c.onOpen,c,{$scope:c.scope}),c.controller&&g)?b.invoke(c.controller,c,{$scope:c.scope}):void 0})}}}])}).call(this)},{"../services/layout.coffee":20}],22:[function(a){(function(){var b,c=[].slice;a("../../vendor/angular-growl/angular-growl"),b=angular.module("plunker.service.notifier",["angular-growl"]),b.config(["growlProvider",function(a){return a.globalTimeToLive(3e3)}]),b.factory("notifier",["$q","growl",function(a,b){return{error:function(a){return console.log.apply(console,["[ERR]"].concat(c.call(arguments))),b.addErrorMessage(a)},warn:function(a){return console.log.apply(console,["[WARN]"].concat(c.call(arguments))),b.addWarnMessage(a)},success:function(a){return console.log.apply(console,["[OK]"].concat(c.call(arguments))),b.addSuccessMessage(a)},confirm:function(b){var c;return c=a.defer(),c.resolve(confirm(b)),c.promise},prompt:function(b){var c;return c=a.defer(),c.resolve(prompt(b)),c.promise}}}])}).call(this)},{"../../vendor/angular-growl/angular-growl":33}],23:[function(){(function(){var a;a=angular.module("plunker.service.oauth",[]),a.factory("oauth",["$window","$q","$rootScope","$timeout",function(a,b,c,d){var e,f;return e=null,f=function(a){if(e)try{return e.resolve(JSON.parse(a.data))}catch(b){return angular.noop()}},a.addEventListener("message",f),{authenticate:function(){var a,f,g,h,i,j,k,l,m,n,o;return j=this,e=b.defer(),k=!1,l=screen.height,o=640,g=480,i=Math.round(screen.width/2-o/2),n=0,l>g&&(n=Math.round(l/2-g/2)),a=window.open("/auth/github","plunker-oauth-window","left="+i+",top="+n+",width="+o+",height="+g+",personalbar=0,toolbar=0,scrollbars=1,resizable=1"),a.focus(),f=function(a){return function(){return e.reject(a),e=null,clearInterval(h),d.cancel(m),null}},m=d(f("Login timed out"),12e4),h=setInterval(function(){return a&&a.closed===!1?void 0:c.$apply(f("Auth window closed withotu logging in"))},200),e.promise.then(function(a){return a.event&&"auth_data"===a.event?a.message:a.event&&"auth_error"===a.event?b.reject(a.message):(console.log("[WARN] Got unknown message",a),b.reject("Unknown login payload"))})}}}])}).call(this)},{}],24:[function(a){(function(){var b;a("../services/api.coffee"),a("../services/dirty.coffee"),b=angular.module("plunker.service.project",["plunker.service.api","plunker.service.dirty"]),b.factory("project",["$rootScope","session","api","dirty",function(a,b,c,d){var e,f,g,h;return g={description:"Untitled project",tags:[],files:[{filename:"index.html",content:""}]},f=b.createClient("Project"),h=new(e=function(){function b(){this.plunk=null}return b.prototype.getIndexByFilename=function(a){return f.getFileIndex(a)},b.prototype.getFileByIndex=function(a){return f.getFileByIndex(a)},b.prototype.getState=function(){return f.getSnapshot()},b.prototype.getFileCount=function(){return this.getFiles().length},b.prototype.getFiles=function(){return this.getState().files},b.prototype.canSave=function(){return!this.isSaved()||this.isOwned()},b.prototype.hasFile=function(a){return angular.isNumber(a)?!!this.getFileByIndex(a):angular.isString(a)?0<=this.getIndexByFilename(a):void 0},b.prototype.isPublic=function(){return this.isSaved()&&this.plunk["public"]},b.prototype.isSaved=function(){return angular.isObject(this.plunk)},b.prototype.isOwned=function(){return this.isSaved()&&this.plunk.token},b.prototype.reset=function(a){return null==a&&(a=g),this.plunk=null,f.reset(a)},b.prototype.openPlunk=function(b){return c.all("plunks").one(b).get().then(function(b){var c,e;return b.files=function(){var a,d;a=b.files,d=[];for(e in a)c=a[e],d.push(c);return d}(),h.reset(angular.copy(b)),h.plunk=angular.copy(b),d.markClean(),a.$broadcast("plunkOpenSuccess",h.plunk)})},b.prototype.fileCreate=function(a,b){return null==b&&(b=""),f.fileCreate(a,b)},b.prototype.fileRename=function(a,b){return f.fileRename(a,b)},b.prototype.fileRemove=function(a){return f.fileRemove(a)},b}())}])}).call(this)},{"../services/api.coffee":11,"../services/dirty.coffee":15}],25:[function(a){(function(){var b,c;a("../../vendor/share/share.uncompressed.js"),c=angular.module("plunker.service.session",[]),c.service("session",b=function(){function a(){this.$clients={},this.snapshot={},this.iface=this.createClient("session"),this.iface.reset({files:[{filename:"index.html",content:""}]})}var b;return b=function(){function a(a,b){this.name=a,this.session=b,this.listeners={}}return a.prototype.on=function(a,b){var c;return((c=this.listeners)[a]||(c[a]=[])).push(b)},a.prototype.off=function(a,b){var c;return!this.listeners[a]||0>(c=this.listeners[a].indexOf(b))?void 0:this.listeners[a].splice(c,1)},a.prototype._applyOp=function(a){return this._applyOps([a])},a.prototype._applyOps=function(a){return this.session.applyOps(this.name,a)},a.prototype._handleOp=function(a,b,c){var d;if(0===b.p.length)this._emit("reset",{snapshot:b.oi,old_snapshot:b.od});else switch(b.p[0]){case"cursor":"fileIndex"===b.p[1]?this._emit("cursorSetFile",{filename:c.files[b.oi].filename,prev_filename:c.files[b.od].filename,index:b.oi,prev_index:b.od}):"textOffset"===b.p[1]&&this._emit("cursorSetOffset",{offset:b.oi,prev_offset:b.od});break;case"description":if(0!==b.p[1])return;if(!b.si||!b.sd)return;this._emit("setDescription",{description:b.si,old_description:b.sd});break;case"tags":if(!b.li&&!b.ld)return;if(2!==b.p.length)return;b.li?this._emit("tagAdd",{tagName:b.li,index:b.p[1]}):b.ld&&this._emit("tagRemove",{tagName:b.ld,index:b.p[2]});break;case"files":2===b.p.length?b.li?this._emit("fileCreate",{filename:b.li.filename,index:b.p[1],content:b.li.content}):b.ld&&this._emit("fileRemove",{filename:b.ld.filename,index:b.p[1],content:b.ld.content}):"filename"===b.p[2]?this._emit("fileRename",{filename:b.oi,index:b.p[1],old_filename:b.od}):"content"===b.p[2]&&(d=c.files[b.p[1]].filename,b.si&&this._emit("textInsert",{filename:d,index:b.p[1],text:b.si,offset:b.p[3]}),b.sd&&this._emit("textRemove",{filename:d,index:b.p[1],text:b.sd,offset:b.p[3]}))}return this._emit("remoteOp",{op:b,snapshot:c})},a.prototype._emit=function(a,b){var c,d,e,f,g,h;if(d=this.getSnapshot(),b.eventName=a,this.listeners[a]){for(g=this.listeners[a],h=[],e=0,f=g.length;f>e;e++)c=g[e],h.push(c(b,d));
return h}},a.prototype.getCursorFileIndex=function(){return this.session.snapshot.cursor.fileIndex},a.prototype.getCursorTextOffset=function(){return this.session.snapshot.cursor.textOffset},a.prototype.getDescription=function(){return this.session.snapshot.description},a.prototype.getFileIndex=function(a){var b,c,d,e,f;for(f=this.session.snapshot.files,c=d=0,e=f.length;e>d;c=++d)if(b=f[c],b.filename===a)return c;return-1},a.prototype.getFileByIndex=function(a){return angular.isString(a)&&(a=this.getFileIndex(a)),this.session.snapshot.files[a]},a.prototype.getFile=function(a){var b,c,d,e;for(e=this.session.snapshot.files,c=0,d=e.length;d>c;c++)if(b=e[c],b.filename===a)return b},a.prototype.getNumFiles=function(){var a;return(null!=(a=this.session.snapshot.files)?a.length:void 0)||0},a.prototype.getNumTags=function(){var a;return(null!=(a=this.session.snapshot.tags)?a.length:void 0)||0},a.prototype.getSnapshot=function(){return this.session.snapshot},a.prototype.getTagIndex=function(a){var b,c,d,e,f;for(f=this.session.snapshot.tags,b=d=0,e=f.length;e>d;b=++d)if(c=f[b],c===a)return b;return-1},a.prototype.hasFile=function(a){return this.getFileIndex(a)>=0},a.prototype.hasFileIndex=function(a){return null!=this.getFileByIndex(a)},a.prototype.hasTag=function(a){return this.getTagIndex(a)>=0},a.prototype.isValidTag=function(a){return/^[-_a-z0-9\.\[\]]+$/i.test(a)},a.prototype.isValidFile=function(a){return this.isValidFilename(a.filename)&&angular.isString(a.content)},a.prototype.isValidFilename=function(a){return/^[-_a-z0-9\.][-_a-z0-9\.\/]+$/i.test(a)},a.prototype.reset=function(a){var b,c,d,e,f,g,h,i;if(null==a&&(a={}),a.description||(a.description=""),a.tags||(a.tags=[]),a.cursor||(a.cursor={fileIndex:0,textOffset:0}),!angular.isString(a.description))throw new Error("Reset failed. Description must be a string.");if(!angular.isArray(a.tags))throw new Error("Reset failed. Tags must be an array.");for(h=a.tags,d=0,f=h.length;f>d;d++)if(c=h[d],!this.isValidTag(c))throw new Error("Reset failed. Invalid tag: "+c+".");if(!angular.isArray(a.files))throw new Error("Reset failed. Files must be an array.");for(i=a.files,e=0,g=i.length;g>e;e++)if(b=i[e],!this.isValidFile(b))throw new Error("Reset failed. Invalid file: "+JSON.stringify(b)+".");if(!a.files.length)throw new Error("Reset failed. There must be at least one file.");return this._applyOp({p:[],od:angular.copy(this.getSnapshot()),oi:a})},a.prototype.cursorSetFile=function(a){var b;if(!this.hasFile(a))throw new Error("Unable set the active file. File does not exist: "+a);return b=this.getFileIndex(a),this._applyOp({p:["cursor","fileIndex"],od:this.getCursorFileIndex(),oi:b})},a.prototype.cursorSetIndex=function(a){if(!this.hasFileIndex(a))throw new Error("Unable set the active file. File does not exist: "+a);return this._applyOp({p:["cursor","fileIndex"],od:this.getCursorFileIndex(),oi:a})},a.prototype.cursorSetOffset=function(a){return this._applyOp({p:["cursor","textOffset"],od:this.getCursorTextOffset(),oi:a})},a.prototype.setDescription=function(a){return null==a&&(a=""),this._applyOp({p:["description",0],sd:this.getDescription(),si:a})},a.prototype.fileCreate=function(a,b){var c;if(null==b&&(b=""),!this.isValidFilename(a))throw new Error("Unable to create file. Invalid filename: "+a);if(this.hasFile(a))throw new Error("Unable to create file. File already exists: "+a);return c=this.getNumFiles(),this._applyOp({p:["files",c],li:{filename:a,content:b}})},a.prototype.fileRename=function(a,b){var c;if(!this.isValidFilename(b))throw new Error("Unable to create file. Invalid filename: "+b);if(!this.hasFile(a))throw new Error("Unable to rename file. File does not exist: "+a);if(this.hasFile(b))throw new Error("Unable to rename file. A file already exists named: "+b);return c=this.getFileIndex(a),this._applyOp({p:["files",c,"filename"],od:a,oi:b})},a.prototype.fileRemove=function(a){var b;if(!this.hasFile(a))throw new Error("Unable to remove file. File does not exist: "+a);if(this.getNumFiles()<=1)throw new Error("Unable to remove file. You can not remove all files.");return b=this.getFileIndex(a),this.cursorSetIndex(0),this._applyOp({p:["files",b],ld:this.getFile(a)})},a.prototype.textInsert=function(a,b,c){var d;if(!this.hasFile(a))throw new Error("Unable to insert text. File does not exist: "+a);return d=this.getFileIndex(a),this._applyOp({p:["files",d,"content",b],si:c})},a.prototype.textRemove=function(a,b,c){var d;if(!this.hasFile(a))throw new Error("Unable to remove text. File does not exist: "+a);return d=this.getFileIndex(a),this._applyOp({p:["files",d,"content",b],sd:c})},a.prototype.tagAdd=function(a){var b;if(!this.isValidTag(a))throw new Error("Unable to add tag. Invalid tag: "+a);if(this.hasTag(a))throw new Error("Unable to add tag. Tag already exists: "+a);return b=this.getNumTags(),this._applyOp({p:["tags",b],li:a})},a.prototype.tagRemove=function(a){var b;if(!this.hasTag(a))throw new Error("Unable to remove tag. Tag not found: "+a);return b=this.getTagIndex(a),this._applyOp({p:["tags",b],ld:a})},a}(),a.prototype.createClient=function(a){var c,d;return c=this,(d=this.$clients)[a]||(d[a]=new b(a,c))},a.prototype.destroyClient=function(a){return this.$clients[a]?delete this.$clients[a]:void 0},a.prototype.applyOps=function(a,b){var c,d,e,f,g,h;f=ottypes.json0.apply(this.snapshot,b),this.snapshot!==f&&angular.copy(f,this.snapshot),g=this.$clients,h=[];for(d in g)c=g[d],d!==a&&h.push(function(){var d,f,g;for(g=[],d=0,f=b.length;f>d;d++)e=b[d],g.push(c._handleOp(a,e,this.snapshot));return g}.call(this));return h},a}())}).call(this)},{"../../vendor/share/share.uncompressed.js":41}],26:[function(){(function(){var a;a=angular.module("plunker.service.settings",[]),a.service("settings",[function(){var a,b,c;if(c={previewer:{delay:1e3,auto_refresh:!0},editor:{font_size:14,tab_size:2,soft_tabs:!0,theme:"textmate",wrap:{range:{min:0,max:80},enabled:!1}}},"undefined"!=typeof localStorage&&null!==localStorage){if(b=localStorage.getItem("plnkr_settings"))try{b=JSON.parse(b)}catch(d){a=d,b={}}setInterval(function(){return localStorage.setItem("plnkr_settings",JSON.stringify(c))},2e3)}return angular.extend(c,b)}])}).call(this)},{}],27:[function(){(function(){var a,b={}.hasOwnProperty;a=angular.module("plunker.service.types",[]),a.factory("types",function(){var a,c,d;d={c_cpp:{title:"C/C++",extensions:["c","cpp","cxx","h","hpp"]},clojure:{title:"Clojure",extensions:["clj"]},coffee:{title:"CoffeeScript",extensions:["coffee"],snips:!0},coldfusion:{title:"ColdFusion",extensions:["cfm"]},csharp:{title:"C#",extensions:["cs"]},css:{title:"CSS",extensions:["css"],snips:!0},groovy:{title:"Groovy",extensions:["groovy"]},haxe:{title:"haXe",extensions:["hx"]},html:{title:"HTML",extensions:["html","htm"],snips:!0},jade:{title:"Jade",extensions:["jade"]},java:{title:"Java",extensions:["java"]},javascript:{title:"JavaScript",extensions:["js"],snips:!0},json:{title:"JSON",extensions:["json"]},latex:{title:"LaTeX",extensions:["tex"]},less:{title:"Less",extensions:["less"]},lua:{title:"Lua",extensions:["lua"]},markdown:{title:"Markdown",extensions:["md","markdown"],snips:!0},ocaml:{title:"OCaml",extensions:["ml","mli"]},perl:{title:"Perl",extensions:["pl","pm"]},pgsql:{title:"pgSQL",extensions:["pgsql","sql"]},php:{title:"PHP",extensions:["php"]},powershell:{title:"Powershell",extensions:["ps1"]},python:{title:"Python",extensions:["py"]},scala:{title:"Scala",extensions:["scala"]},scss:{title:"SCSS",extensions:["scss"]},ruby:{title:"Ruby",extensions:["rb","rbx"]},sql:{title:"SQL",extensions:["sql"]},svg:{title:"SVG",extensions:["svg"]},text:{title:"Text",extensions:["txt"]},textile:{title:"Textile",extensions:["textile"]},typescript:{title:"Typescript",extensions:["ts"]},xml:{title:"XML",extensions:["xml"]}};for(c in d)b.call(d,c)&&(a=d[c],a.name=c,a.regex=new RegExp("\\.("+a.extensions.join("|")+")$","i"));return{types:d,getByFilename:function(b){for(c in d)if(a=d[c],a.regex.test(b))return a;return d.text}}})}).call(this)},{}],28:[function(a){(function(){var b,c;c=a("lodash"),a("../services/htmlFile.coffee"),b=angular.module("plunker.service.updater",["plunker.service.htmlFile"]),b.factory("updater",["$q","htmlFile",function(a,b){return{update:function(d){var e,f;if(!d.files||!d.files.length)throw new Error("Unable to update invalid json: missing files array");return(f=c.find(d.files,function(a){return"index.html"===a.filename}))?(e=b.create(f.content),e.findDeclaredDependencies().then(e.loadPackageDefinitions).then(e.updateAllPackageTags).then(function(){return console.log(e),f.content=e.toString(),d})):a.when(d)}}}])}).call(this)},{"../services/htmlFile.coffee":17,lodash:49}],29:[function(){(function(){var a;a=angular.module("plunker.service.url",[]),a.constant("url",_plunker.url)}).call(this)},{}],30:[function(){(function(){var a;a=angular.module("plunker.service.visitor",[]),a.factory("visitor",["$http","url",function(a){var b;return b={},b.session=_plunker.session||{},b.login=function(c){var d;return null==c&&(c={}),b.session.user_url?(d=a.post(b.session.user_url,{},{params:{token:c.token}}),d.then(function(a){return a.status>=400?$q.reject("Login failed - Server error"):(angular.copy(a.data,b.session),b)},function(){return"Login failed - Server error"})):$q.reject("Login failed - Session data missing")},b.logout=function(){var c;return b.session.user_url?b.session.user?(c=a["delete"](b.session.user_url),c.then(function(a){return a.status>=400?$q.reject("Logout failed - Server error"):(angular.copy(a.data,b.session),b)},function(){return"Logout failed - Server error"})):$q.reject("Logout failed - Not logged in"):$q.reject("Logout failed - Session data missing")},b}])}).call(this)},{}],31:[function(a){(function(){var b;a("../services/project.coffee"),a("../services/session.coffee"),b=angular.module("plunker.service.workspace",["plunker.service.project","plunker.service.session","plunker.service.layout"]),b.factory("workspace",["project","session","layout",function(a,b,c){var d,e,f;return e=b.createClient("Workspace"),f=new(d=function(){function b(){this.splits=[],this.activeSplitIndex=0,this.activeFileIndex=0,this.reset(),this.$setupListeners()}return b.prototype.$resolveFile=function(b){var c,d;return d=angular.isNumber(b)?b:a.getIndexByFilename(b),c=a.getFileByIndex(d),[d,c]},b.prototype.$setupListeners=function(){return e.on("cursorSetFile",function(a){var b;return 0>(b=f.getSplitIndexByFileIndex(a.index))&&(b=f.activeSplitIndex),f.open(a.index,{split:b})}),e.on("cursorSetOffset",function(){}),e.on("fileRemove",function(a){return f.close(a.index)}),e.on("reset",function(){return f.reset()})},b.prototype.getActiveSplitIndex=function(){return this.activeSplitIndex},b.prototype.getActiveFileIndex=function(){return this.activeFileIndex},b.prototype.getActiveSplitIndices=function(){return this.splits},b.prototype.getFileIndexBySplitIndex=function(a){return this.splits[a]},b.prototype.getSplitIndexByFileIndex=function(a){return this.splits.indexOf(a)},b.prototype.getSplitCount=function(){return this.splits.length},b.prototype.getSplits=function(){return this.splits},b.prototype.isFileOpen=function(a,b){var c,d,e,f;return null==b&&(b={}),f=this.$resolveFile(a),d=f[0],c=f[1],0<=(e=this.splits.indexOf(d))},b.prototype.close=function(a,b){var c,d,e,f;return null==b&&(b={}),f=this.$resolveFile(a),d=f[0],c=f[1],0>(e=this.getSplitIndexByFileIndex(d))?void 0:this.splits.length>1?(this.splits.splice(e,1),this.activeSplitIndex===e&&this.activeSplitIndex--,this.activeFileIndex=this.splits[this.activeSplitIndex]):this.open(0)},b.prototype.open=function(a,b){var c,d,e,f;return null==b&&(b={}),f=this.$resolveFile(a),d=f[0],c=f[1],0>(e=this.getSplitIndexByFileIndex(d))&&(e=b.split===!0?this.splits.length:angular.isNumber(b.split)?Math.max(0,Math.min(this.splits.length,parseInt(b.split,10))):this.activeSplitIndex),e===this.splits.length&&this.splits.push(d),this.splits[this.activeSplitIndex=e]=this.activeFileIndex=d},b.prototype.openNext=function(){return this.open((this.activeFileIndex+1)%a.getFileCount())},b.prototype.openPrev=function(){return this.open((this.activeFileIndex+a.getFileCount()-1)%a.getFileCount())},b.prototype.reset=function(){return this.splits.length=1,this.splits[0]=0,this.activeSplitIndex=0,this.activeFileIndex=0},b.prototype.togglePane=function(a){return c.toggle(a)},b}())}])}).call(this)},{"../services/project.coffee":24,"../services/session.coffee":25}],32:[function(){angular.module("akoenig.deckgrid",[]),angular.module("akoenig.deckgrid").directive("deckgrid",["DeckgridDescriptor",function(a){"use strict";return a.create()}]),angular.module("akoenig.deckgrid").factory("DeckgridDescriptor",["Deckgrid",function(a){"use strict";function b(){this.restrict="AE",this.template='<div data-ng-repeat="column in columns" class="{{layout.classList}}"><div data-ng-repeat="card in column" data-ng-include="cardTemplate"></div></div>',this.scope={model:"=source"},this.$$deckgrid=null,this.link=this.$$link.bind(this)}return b.prototype.$$destroy=function(){this.$$deckgrid.destroy()},b.prototype.$$link=function(b,c,d){b.$on("$destroy",this.$$destroy.bind(this)),b.cardTemplate=d.cardTemplate,this.$$deckgrid=a.create(b,c[0])},{create:function(){return new b}}}]),angular.module("akoenig.deckgrid").factory("Deckgrid",["$window",function(a){"use strict";function b(b,c){var d,e=this;this.$$elem=c,this.$$watchers=[],this.$$scope=b,this.$$scope.columns=[],this.$$scope.layout=this.$$getLayout(),this.$$createColumns(),d=this.$$scope.$watch("model",this.$$onModelChange.bind(this),!0),this.$$watchers.push(d),d=angular.element(a).on("resize",e.$$onWindowResize.bind(e)),this.$$watchers.push(d)}return b.prototype.$$createColumns=function(){var a=this;this.$$scope.columns=[],angular.forEach(this.$$scope.model,function(b,c){var d=0|c%a.$$scope.layout.columns;a.$$scope.columns[d]||(a.$$scope.columns[d]=[]),a.$$scope.columns[d].push(b)})},b.prototype.$$getLayout=function(){var b,c=a.getComputedStyle(this.$$elem,":before").content;return c&&(b={},c=c.replace(/'/g,""),c=c.replace(/"/g,""),c=c.split(" "),b.columns=0|c[0],b.classList=c[1].replace(/\./g," ").trim()),b},b.prototype.$$onWindowResize=function(){var a=this,b=this.$$getLayout();b.columns!==this.$$scope.layout.columns&&(a.$$scope.layout=b,a.$$scope.$apply(function(){a.$$createColumns()}))},b.prototype.$$onModelChange=function(a,b){var c=this;a.length!==b.length&&c.$$createColumns()},b.prototype.destroy=function(){var a=this.$$watchers.length-1;for(a;a>=0;a-=1)this.$$watchers[a]()},{create:function(a,c){return new b(a,c)}}}])},{}],33:[function(){angular.module("angular-growl",[]),angular.module("angular-growl").directive("growl",["$rootScope",function(a){"use strict";return{restrict:"A",template:'<div class="growl">	<div class="growl-item alert" ng-repeat="message in messages" ng-class="computeClasses(message)">		<button type="button" class="close" ng-click="deleteMessage(message)">&times;</button>            {{ message.text}}	</div></div>',replace:!1,scope:!0,controller:["$scope","$timeout",function(b,c){b.messages=[],a.$on("growlMessage",function(a,d){b.messages.push(d),d.ttl&&-1!==d.ttl&&c(function(){b.deleteMessage(d)},d.ttl)}),b.deleteMessage=function(a){var c=b.messages.indexOf(a);c>-1&&b.messages.splice(c,1)},b.computeClasses=function(a){return{"alert-success":a.isSuccess,"alert-danger":a.isError,"alert-warning":a.isWarn,"alert-info":a.isInfo}}}]}}]),angular.module("angular-growl").provider("growl",function(){"use strict";var a=null,b="messages",c="text",d="severity";this.globalTimeToLive=function(b){a=b},this.messagesKey=function(a){b=a},this.messageTextKey=function(a){c=a},this.messageSeverityKey=function(a){d=a},this.serverMessagesInterceptor=["$q","growl",function(a,c){function d(a){a.data[b]&&a.data[b].length>0&&c.addServerMessages(a.data[b])}function e(a){return d(a),a}function f(b){return d(b),a.reject(b)}return function(a){return a.then(e,f)}}],this.$get=["$rootScope","$filter",function(b,e){function f(a){m&&(a=m(a)),b.$broadcast("growlMessage",a)}function g(b,c,d){var e,g=c||{};e={text:b,isWarn:d.isWarn,isError:d.isError,isInfo:d.isInfo,isSuccess:d.isSuccess,ttl:g.ttl||a},f(e)}function h(a,b){g(a,b,{isWarn:!0})}function i(a,b){g(a,b,{isError:!0})}function j(a,b){g(a,b,{isInfo:!0})}function k(a,b){g(a,b,{isSuccess:!0})}function l(a){var b,e,f,h;for(h=a.length,b=0;h>b;b++)if(e=a[b],e[c]&&e[d]){switch(e[d]){case"warn":f={isWarn:!0};break;case"success":f={isSuccess:!0};break;case"info":f={isInfo:!0};break;case"error":f={isError:!0}}g(e[c],void 0,f)}}var m;try{m=e("translate")}catch(n){}return{addWarnMessage:h,addErrorMessage:i,addInfoMessage:j,addSuccessMessage:k,addServerMessages:l}}]})},{}],34:[function(){angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdownToggle","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/popup.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset-titles.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a)if(void 0!==f.style[b])return a[b]}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(a){var b=function(a,b,c){b.removeClass("collapse"),b.css({height:c}),b[0].offsetWidth,b.addClass("collapse")};return{link:function(c,d,e){var f,g=!0;c.$watch(function(){return d[0].scrollHeight},function(){0!==d[0].scrollHeight&&(f||(g?b(c,d,d[0].scrollHeight+"px"):b(c,d,"auto")))}),c.$watch(e.collapse,function(a){a?k():j()});var h,i=function(b){return h&&h.cancel(),h=a(d,b),h.then(function(){h=void 0},function(){h=void 0}),h},j=function(){g?(g=!1,f||b(c,d,"auto")):i({height:d[0].scrollHeight+"px"}).then(function(){f||b(c,d,"auto")}),f=!1},k=function(){f=!0,g?(g=!1,b(c,d,0)):(b(c,d,d[0].scrollHeight+"px"),i({height:"0"}))}}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);-1!==b&&this.groups.splice(this.groups.indexOf(a),1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",["$parse","$transition","$timeout",function(a){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@"},controller:["$scope",function(){this.setHeading=function(a){this.heading=a}}],link:function(b,c,d,e){var f,g;e.addGroup(b),b.isOpen=!1,d.isOpen&&(f=a(d.isOpen),g=f.assign,b.$watch(function(){return f(b.$parent)},function(a){b.isOpen=a}),b.isOpen=f?f(b.$parent):!1),b.$watch("isOpen",function(a){a&&e.closeOthers(b),g&&g(b.$parent,a)})}}}]).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",compile:function(a,b,c){return function(a,b,d,e){e.setHeading(c(a,function(){}))}}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude]},function(a){a&&(b.html(""),b.append(a))})}}}),angular.module("ui.bootstrap.alert",[]).directive("alert",function(){return{restrict:"EA",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"=",close:"&"},link:function(a,b,c){a.closeable="close"in c}}}),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(a,b,c){b.addClass("ng-binding").data("$binding",c.bindHtmlUnsafe),a.$watch(c.bindHtmlUnsafe,function(a){b.html(a||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).directive("btnRadio",["buttonConfig",function(a){var b=a.activeClass||"active",c=a.toggleEvent||"click";return{require:"ngModel",link:function(a,d,e,f){f.$render=function(){d.toggleClass(b,angular.equals(f.$modelValue,a.$eval(e.btnRadio)))},d.bind(c,function(){d.hasClass(b)||a.$apply(function(){f.$setViewValue(a.$eval(e.btnRadio)),f.$render()})})}}}]).directive("btnCheckbox",["buttonConfig",function(a){var b=a.activeClass||"active",c=a.toggleEvent||"click";return{require:"ngModel",link:function(a,d,e,f){function g(){var b=a.$eval(e.btnCheckboxTrue);return angular.isDefined(b)?b:!0}function h(){var b=a.$eval(e.btnCheckboxFalse);return angular.isDefined(b)?b:!1}f.$render=function(){d.toggleClass(b,angular.equals(f.$modelValue,g()))},d.bind(c,function(){a.$apply(function(){f.$setViewValue(d.hasClass(b)?h():g()),f.$render()})})}}}]),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition","$q",function(a,b,c){function d(){function c(){f?(a.next(),d()):a.pause()}e&&b.cancel(e);var g=+a.interval;!isNaN(g)&&g>=0&&(e=b(c,g))}var e,f,g=this,h=g.slides=[],i=-1;g.currentSlide=null,g.select=function(e,f){function j(){g.currentSlide&&angular.isString(f)&&!a.noTransition&&e.$element?(e.$element.addClass(f),e.$element[0].offsetWidth,angular.forEach(h,function(a){angular.extend(a,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(e,{direction:f,active:!0,entering:!0}),angular.extend(g.currentSlide||{},{direction:f,leaving:!0}),a.$currentTransition=c(e.$element,{}),function(b,c){a.$currentTransition.then(function(){k(b,c)},function(){k(b,c)})}(e,g.currentSlide)):k(e,g.currentSlide),g.currentSlide=e,i=l,d()}function k(b,c){angular.extend(b,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(c||{},{direction:"",active:!1,leaving:!1,entering:!1}),a.$currentTransition=null}var l=h.indexOf(e);void 0===f&&(f=l>i?"next":"prev"),e&&e!==g.currentSlide&&(a.$currentTransition?(a.$currentTransition.cancel(),b(j)):j())},g.indexOfSlide=function(a){return h.indexOf(a)},a.next=function(){var b=(i+1)%h.length;return a.$currentTransition?void 0:g.select(h[b],"next")},a.prev=function(){var b=0>i-1?h.length-1:i-1;return a.$currentTransition?void 0:g.select(h[b],"prev")},a.select=function(a){g.select(a)},a.isActive=function(a){return g.currentSlide===a},a.slides=function(){return h},a.$watch("interval",d),a.play=function(){f||(f=!0,d())},a.pause=function(){a.noPause||(f=!1,e&&b.cancel(e))},g.addSlide=function(b,c){b.$element=c,h.push(b),1===h.length||b.active?(g.select(h[h.length-1]),1==h.length&&a.play()):b.active=!1},g.removeSlide=function(a){var b=h.indexOf(a);h.splice(b,1),h.length>0&&a.active?b>=h.length?g.select(h[b-1]):g.select(h[b]):i>b&&i--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",["$parse",function(a){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{},link:function(b,c,d,e){if(d.active){var f=a(d.active),g=f.assign,h=b.active=f(b.$parent);b.$watch(function(){var a=f(b.$parent);return a!==b.active&&(a!==h?h=b.active=a:g(b.$parent,a=h=b.active)),a})}e.addSlide(b,c),b.$on("$destroy",function(){e.removeSlide(b)}),b.$watch("active",function(a){a&&e.select(b)})}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);return f!=a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft),{width:b.prop("offsetWidth"),height:b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:c.prop("offsetWidth"),height:c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].body.scrollTop||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].body.scrollLeft||a[0].documentElement.scrollLeft)}}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.position"]).constant("datepickerConfig",{dayFormat:"dd",monthFormat:"MMMM",yearFormat:"yyyy",dayHeaderFormat:"EEE",dayTitleFormat:"MMMM yyyy",monthTitleFormat:"yyyy",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","dateFilter","datepickerConfig",function(a,b,c,d){function e(b,c){return angular.isDefined(b)?a.$parent.$eval(b):c}function f(a,b){return new Date(a,b,0).getDate()}function g(a,b){for(var c=new Array(b),d=a,e=0;b>e;)c[e++]=new Date(d),d.setDate(d.getDate()+1);return c}function h(a,b,d,e){return{date:a,label:c(a,b),selected:!!d,secondary:!!e}}var i={day:e(b.dayFormat,d.dayFormat),month:e(b.monthFormat,d.monthFormat),year:e(b.yearFormat,d.yearFormat),dayHeader:e(b.dayHeaderFormat,d.dayHeaderFormat),dayTitle:e(b.dayTitleFormat,d.dayTitleFormat),monthTitle:e(b.monthTitleFormat,d.monthTitleFormat)},j=e(b.startingDay,d.startingDay),k=e(b.yearRange,d.yearRange);this.minDate=d.minDate?new Date(d.minDate):null,this.maxDate=d.maxDate?new Date(d.maxDate):null,this.modes=[{name:"day",getVisibleDates:function(a,b){var d=a.getFullYear(),e=a.getMonth(),k=new Date(d,e,1),l=j-k.getDay(),m=l>0?7-l:-l,n=new Date(k),o=0;m>0&&(n.setDate(-m+1),o+=m),o+=f(d,e+1),o+=(7-o%7)%7;for(var p=g(n,o),q=new Array(7),r=0;o>r;r++){var s=new Date(p[r]);p[r]=h(s,i.day,b&&b.getDate()===s.getDate()&&b.getMonth()===s.getMonth()&&b.getFullYear()===s.getFullYear(),s.getMonth()!==e)}for(var t=0;7>t;t++)q[t]=c(p[t].date,i.dayHeader);return{objects:p,title:c(a,i.dayTitle),labels:q}},compare:function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},split:7,step:{months:1}},{name:"month",getVisibleDates:function(a,b){for(var d=new Array(12),e=a.getFullYear(),f=0;12>f;f++){var g=new Date(e,f,1);d[f]=h(g,i.month,b&&b.getMonth()===f&&b.getFullYear()===e)}return{objects:d,title:c(a,i.monthTitle)}},compare:function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth())},split:3,step:{years:1}},{name:"year",getVisibleDates:function(a,b){for(var c=new Array(k),d=a.getFullYear(),e=parseInt((d-1)/k,10)*k+1,f=0;k>f;f++){var g=new Date(e+f,0,1);c[f]=h(g,i.year,b&&b.getFullYear()===g.getFullYear())}return{objects:c,title:[c[0].label,c[k-1].label].join(" - ")}},compare:function(a,b){return a.getFullYear()-b.getFullYear()},split:5,step:{years:k}}],this.isDisabled=function(b,c){var d=this.modes[c||0];return this.minDate&&d.compare(b,this.minDate)<0||this.maxDate&&d.compare(b,this.maxDate)>0||a.dateDisabled&&a.dateDisabled({date:b,mode:d.name})}}]).directive("datepicker",["dateFilter","$parse","datepickerConfig","$log",function(a,b,c,d){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(a,e,f,g){function h(){a.showWeekNumbers=0===o&&q}function i(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c}function j(b){var c=null,e=!0;n.$modelValue&&(c=new Date(n.$modelValue),isNaN(c)?(e=!1,d.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):b&&(p=c)),n.$setValidity("date",e);var f=m.modes[o],g=f.getVisibleDates(p,c);angular.forEach(g.objects,function(a){a.disabled=m.isDisabled(a.date,o)}),n.$setValidity("date-disabled",!c||!m.isDisabled(c)),a.rows=i(g.objects,f.split),a.labels=g.labels||[],a.title=g.title}function k(a){o=a,h(),j()}function l(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}var m=g[0],n=g[1];if(n){var o=0,p=new Date,q=c.showWeeks;f.showWeeks?a.$parent.$watch(b(f.showWeeks),function(a){q=!!a,h()}):h(),f.min&&a.$parent.$watch(b(f.min),function(a){m.minDate=a?new Date(a):null,j()}),f.max&&a.$parent.$watch(b(f.max),function(a){m.maxDate=a?new Date(a):null,j()}),n.$render=function(){j(!0)},a.select=function(a){if(0===o){var b=new Date(n.$modelValue);b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()),n.$setViewValue(b),j(!0)}else p=a,k(o-1)},a.move=function(a){var b=m.modes[o].step;p.setMonth(p.getMonth()+a*(b.months||0)),p.setFullYear(p.getFullYear()+a*(b.years||0)),j()},a.toggleMode=function(){k((o+1)%m.modes.length)},a.getWeekNumber=function(b){return 0===o&&a.showWeekNumbers&&7===b.length?l(b[0].date):null}}}}}]).constant("datepickerPopupConfig",{dateFormat:"yyyy-MM-dd",closeOnDateSelection:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","datepickerPopupConfig",function(a,b,c,d,e,f){return{restrict:"EA",require:"ngModel",link:function(g,h,i,j){function k(a){t?t(g,!!a):r.isOpen=!!a}function l(a){if(a){if(angular.isDate(a))return j.$setValidity("date",!0),a;if(angular.isString(a)){var b=new Date(a);return isNaN(b)?(j.$setValidity("date",!1),void 0):(j.$setValidity("date",!0),b)}return j.$setValidity("date",!1),void 0}return j.$setValidity("date",!0),null}function m(){r.date=j.$modelValue,o()}function n(a,c,d){a&&(g.$watch(b(a),function(a){r[c]=a}),x.attr(d||c,c))}function o(){r.position=d.position(h),r.position.top=r.position.top+h.prop("offsetHeight")}var p=angular.isDefined(i.closeOnDateSelection)?r.$eval(i.closeOnDateSelection):f.closeOnDateSelection,q=i.datepickerPopup||f.dateFormat,r=g.$new();g.$on("$destroy",function(){r.$destroy()});var s,t;i.isOpen&&(s=b(i.isOpen),t=s.assign,g.$watch(s,function(a){r.isOpen=!!a
})),r.isOpen=s?s(g):!1;var u=function(a){r.isOpen&&a.target!==h[0]&&r.$apply(function(){k(!1)})},v=function(){r.$apply(function(){k(!0)})},w=angular.element("<datepicker-popup-wrap><datepicker></datepicker></datepicker-popup-wrap>");w.attr({"ng-model":"date","ng-change":"dateSelection()"});var x=w.find("datepicker");i.datepickerOptions&&x.attr(angular.extend({},g.$eval(i.datepickerOptions))),j.$parsers.unshift(l),r.dateSelection=function(){j.$setViewValue(r.date),j.$render(),p&&k(!1)},h.bind("input change keyup",function(){r.$apply(function(){m()})}),j.$render=function(){var a=j.$viewValue?e(j.$viewValue,q):"";h.val(a),m()},n(i.min,"min"),n(i.max,"max"),i.showWeeks?n(i.showWeeks,"showWeeks","show-weeks"):(r.showWeeks=!0,x.attr("show-weeks","showWeeks")),i.dateDisabled&&x.attr("date-disabled",i.dateDisabled);var y=!1,z=!1;r.$watch("isOpen",function(a){a?(o(),c.bind("click",u),z&&h.unbind("focus",v),h[0].focus(),y=!0):(y&&c.unbind("click",u),h.bind("focus",v),z=!0),t&&t(g,a)});var A=b(i.ngModel).assign;r.today=function(){A(g,new Date)},r.clear=function(){A(g,null)},h.after(a(w)(r))}}}]).directive("datepickerPopupWrap",[function(){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(a,b){b.bind("click",function(a){a.preventDefault(),a.stopPropagation()})}}}]),angular.module("ui.bootstrap.dropdownToggle",[]).directive("dropdownToggle",["$document","$location",function(a){var b=null,c=angular.noop;return{restrict:"CA",link:function(d,e){d.$watch("$location.path",function(){c()}),e.parent().bind("click",function(){c()}),e.bind("click",function(d){var f=e===b;d.preventDefault(),d.stopPropagation(),b&&c(),f||(e.parent().addClass("open"),b=e,c=function(d){d&&(d.preventDefault(),d.stopPropagation()),a.unbind("click",c),e.parent().removeClass("open"),c=angular.noop,b=null},a.bind("click",c))})}}}]),angular.module("ui.bootstrap.modal",[]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).directive("modalBackdrop",["$modalStack","$timeout",function(a,b){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(c){b(function(){c.animate=!0}),c.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!=c.value.backdrop&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))}}}}]).directive("modalWindow",["$timeout",function(a){return{restrict:"EA",scope:{index:"@"},replace:!0,transclude:!0,templateUrl:"template/modal/window.html",link:function(b,c,d){b.windowClass=d.windowClass||"",a(function(){b.animate=!0})}}}]).factory("$modalStack",["$document","$compile","$rootScope","$$stackedMap",function(a,b,c,d){function e(){for(var a=-1,b=k.keys(),c=0;c<b.length;c++)k.get(b[c]).value.backdrop&&(a=c);return a}function f(a){var b=k.get(a).value;k.remove(a),b.modalDomEl.remove(),-1==e()&&(h.remove(),h=void 0),b.modalScope.$destroy()}var g,h,i=c.$new(!0),j=a.find("body").eq(0),k=d.createNew(),l={};return c.$watch(e,function(a){i.index=a}),a.bind("keydown",function(a){var b;27===a.which&&(b=k.top(),b&&b.value.keyboard&&c.$apply(function(){l.dismiss(b.key)}))}),l.open=function(a,c){k.add(a,{deferred:c.deferred,modalScope:c.scope,backdrop:c.backdrop,keyboard:c.keyboard});var d=angular.element("<div modal-window></div>");d.attr("window-class",c.windowClass),d.attr("index",k.length()-1),d.html(c.content);var f=b(d)(c.scope);k.top().value.modalDomEl=f,j.append(f),e()>=0&&!h&&(g=angular.element("<div modal-backdrop></div>"),h=b(g)(i),j.append(h))},l.close=function(a,b){var c=k.get(a);c&&(c.value.deferred.resolve(b),f(a))},l.dismiss=function(a,b){var c=k.get(a).value;c&&(c.deferred.reject(b),f(a))},l.getTop=function(){return k.top()},l}]).provider("$modal",function(){var a={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?d.when(a.template):e.get(a.templateUrl,{cache:f}).then(function(a){return a.data})}function j(a){var c=[];return angular.forEach(a,function(a){(angular.isFunction(a)||angular.isArray(a))&&c.push(d.when(b.invoke(a)))}),c}var k={};return k.open=function(b){var e=d.defer(),f=d.defer(),k={result:e.promise,opened:f.promise,close:function(a){h.close(k,a)},dismiss:function(a){h.dismiss(k,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var l=d.all([i(b)].concat(j(b.resolve)));return l.then(function(a){var d=(b.scope||c).$new();d.$close=k.close,d.$dismiss=k.dismiss;var f,i={},j=1;b.controller&&(i.$scope=d,i.$modalInstance=k,angular.forEach(b.resolve,function(b,c){i[c]=a[j++]}),f=g(b.controller,i)),h.open(k,{scope:d,deferred:e,content:a[0],backdrop:b.backdrop,keyboard:b.keyboard,windowClass:b.windowClass})},function(a){e.reject(a)}),l.then(function(){f.resolve(!0)},function(){f.reject(!1)}),k},k}]};return a}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse","$interpolate",function(a,b,c,d){var e=this;this.init=function(d){b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){e.itemsPerPage=parseInt(b,10),a.totalPages=e.calculateTotalPages()}):this.itemsPerPage=d},this.noPrevious=function(){return 1===this.page},this.noNext=function(){return this.page===a.totalPages},this.isActive=function(a){return this.page===a},this.calculateTotalPages=function(){return this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage)},this.getAttributeValue=function(b,c,e){return angular.isDefined(b)?e?d(b)(a.$parent):a.$parent.$eval(b):c},this.render=function(){this.page=parseInt(a.page,10)||1,a.pages=this.getPages(this.page,a.totalPages)},a.selectPage=function(b){!e.isActive(b)&&b>0&&b<=a.totalPages&&(a.page=b,a.onSelectPage({page:b}))},a.$watch("totalItems",function(){a.totalPages=e.calculateTotalPages()}),a.$watch("totalPages",function(c){b.numPages&&(a.numPages=c),e.page>c?a.selectPage(c):e.render()}),a.$watch("page",function(){e.render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(a,b){return{restrict:"EA",scope:{page:"=",totalItems:"=",onSelectPage:" &",numPages:"="},controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(c,d,e,f){function g(a,b,c,d){return{number:a,text:b,active:c,disabled:d}}var h,i=f.getAttributeValue(e.boundaryLinks,b.boundaryLinks),j=f.getAttributeValue(e.directionLinks,b.directionLinks),k=f.getAttributeValue(e.firstText,b.firstText,!0),l=f.getAttributeValue(e.previousText,b.previousText,!0),m=f.getAttributeValue(e.nextText,b.nextText,!0),n=f.getAttributeValue(e.lastText,b.lastText,!0),o=f.getAttributeValue(e.rotate,b.rotate);f.init(b.itemsPerPage),e.maxSize&&c.$parent.$watch(a(e.maxSize),function(a){h=parseInt(a,10),f.render()}),f.getPages=function(a,b){var c=[],d=1,e=b,p=angular.isDefined(h)&&b>h;p&&(o?(d=Math.max(a-Math.floor(h/2),1),e=d+h-1,e>b&&(e=b,d=e-h+1)):(d=(Math.ceil(a/h)-1)*h+1,e=Math.min(d+h-1,b)));for(var q=d;e>=q;q++){var r=g(q,q,f.isActive(q),!1);c.push(r)}if(p&&!o){if(d>1){var s=g(d-1,"...",!1,!1);c.unshift(s)}if(b>e){var t=g(e+1,"...",!1,!1);c.push(t)}}if(j){var u=g(a-1,l,!1,f.noPrevious());c.unshift(u);var v=g(a+1,m,!1,f.noNext());c.push(v)}if(i){var w=g(1,k,!1,f.noPrevious());c.unshift(w);var x=g(b,n,!1,f.noNext());c.push(x)}return c}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:" Previous",nextText:"Next ",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{page:"=",totalItems:"=",onSelectPage:" &",numPages:"="},controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(b,c,d,e){function f(a,b,c,d,e){return{number:a,text:b,disabled:c,previous:i&&d,next:i&&e}}var g=e.getAttributeValue(d.previousText,a.previousText,!0),h=e.getAttributeValue(d.nextText,a.nextText,!0),i=e.getAttributeValue(d.align,a.align);e.init(a.itemsPerPage),e.getPages=function(a){return[f(a-1,g,e.noPrevious(),!0,!1),f(a+1,h,e.noNext(),!1,!0)]}}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0},c={mouseenter:"mouseleave",click:"click",focus:"blur"},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$parse","$document","$position","$interpolate",function(e,f,g,h,i,j,k){return function(e,l,m){function n(a){var b=a||o.trigger||m,d=c[b]||b;return{show:b,hide:d}}var o=angular.extend({},b,d),p=a(e),q=k.startSymbol(),r=k.endSymbol(),s="<"+p+"-popup "+'title="'+q+"tt_title"+r+'" '+'content="'+q+"tt_content"+r+'" '+'placement="'+q+"tt_placement"+r+'" '+'animation="tt_animation()" '+'is-open="tt_isOpen"'+">"+"</"+p+"-popup>";return{restrict:"EA",scope:!0,link:function(a,b,c){function d(){a.tt_isOpen?m():k()}function k(){a.tt_popupDelay?t=g(p,a.tt_popupDelay):a.$apply(p)}function m(){a.$apply(function(){q()})}function p(){var c,d,e,f;if(a.tt_content){switch(r&&g.cancel(r),v.css({top:0,left:0,display:"block"}),w?(u=u||i.find("body"),u.append(v)):b.after(v),c=w?j.offset(b):j.position(b),d=v.prop("offsetWidth"),e=v.prop("offsetHeight"),a.tt_placement){case"right":f={top:c.top+c.height/2-e/2,left:c.left+c.width};break;case"bottom":f={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"left":f={top:c.top+c.height/2-e/2,left:c.left-d};break;default:f={top:c.top-e,left:c.left+c.width/2-d/2}}f.top+="px",f.left+="px",v.css(f),a.tt_isOpen=!0}}function q(){a.tt_isOpen=!1,g.cancel(t),angular.isDefined(a.tt_animation)&&a.tt_animation()?r=g(function(){v.remove()},500):v.remove()}var r,t,u,v=f(s)(a),w=angular.isDefined(o.appendToBody)?o.appendToBody:!1,x=n(void 0),y=!1;a.tt_isOpen=!1,c.$observe(e,function(b){a.tt_content=b}),c.$observe(l+"Title",function(b){a.tt_title=b}),c.$observe(l+"Placement",function(b){a.tt_placement=angular.isDefined(b)?b:o.placement}),c.$observe(l+"Animation",function(b){a.tt_animation=angular.isDefined(b)?h(b):function(){return o.animation}}),c.$observe(l+"PopupDelay",function(b){var c=parseInt(b,10);a.tt_popupDelay=isNaN(c)?o.popupDelay:c}),c.$observe(l+"Trigger",function(a){y&&(b.unbind(x.show,k),b.unbind(x.hide,m)),x=n(a),x.show===x.hide?b.bind(x.show,d):(b.bind(x.show,k),b.bind(x.hide,m)),y=!0}),c.$observe(l+"AppendToBody",function(b){w=angular.isDefined(b)?h(b)(a):w}),w&&a.$on("$locationChangeSuccess",function(){a.tt_isOpen&&q()}),a.$on("$destroy",function(){a.tt_isOpen?q():v.remove()})}}}}]}).directive("tooltipPopup",function(){return{restrict:"E",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"E",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(a){return a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$compile","$timeout","$parse","$window","$tooltip",function(a,b,c,d,e){return e("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",["ui.bootstrap.transition"]).constant("progressConfig",{animate:!0,autoType:!1,stackedTypes:["success","info","warning","danger"]}).controller("ProgressBarController",["$scope","$attrs","progressConfig",function(a,b,c){function d(a){return g[a]}var e=angular.isDefined(b.animate)?a.$eval(b.animate):c.animate,f=angular.isDefined(b.autoType)?a.$eval(b.autoType):c.autoType,g=angular.isDefined(b.stackedTypes)?a.$eval("["+b.stackedTypes+"]"):c.stackedTypes;this.makeBar=function(a,b,c){var g=angular.isObject(a)?a.value:a||0,h=angular.isObject(b)?b.value:b||0,i=angular.isObject(a)&&angular.isDefined(a.type)?a.type:f?d(c||0):null;return{from:h,to:g,type:i,animate:e}},this.addBar=function(b){a.bars.push(b),a.totalPercent+=b.to},this.clearBars=function(){a.bars=[],a.totalPercent=0},this.clearBars()}]).directive("progress",function(){return{restrict:"EA",replace:!0,controller:"ProgressBarController",scope:{value:"=percent",onFull:"&",onEmpty:"&"},templateUrl:"template/progressbar/progress.html",link:function(a,b,c,d){a.$watch("value",function(a,b){if(d.clearBars(),angular.isArray(a))for(var c=0,e=a.length;e>c;c++)d.addBar(d.makeBar(a[c],b[c],c));else d.addBar(d.makeBar(a,b))},!0),a.$watch("totalPercent",function(b){b>=100?a.onFull():0>=b&&a.onEmpty()},!0)}}}).directive("progressbar",["$transition",function(a){return{restrict:"EA",replace:!0,scope:{width:"=",old:"=",type:"=",animate:"="},templateUrl:"template/progressbar/bar.html",link:function(b,c){b.$watch("width",function(d){b.animate?(c.css("width",b.old+"%"),a(c,{width:d+"%"})):c.css("width",d+"%")})}}}]),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","$parse","ratingConfig",function(a,b,c,d){this.maxRange=angular.isDefined(b.max)?a.$parent.$eval(b.max):d.max,this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):d.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):d.stateOff,this.createDefaultRange=function(a){for(var b={stateOn:this.stateOn,stateOff:this.stateOff},c=new Array(a),d=0;a>d;d++)c[d]=b;return c},this.normalizeRange=function(a){for(var b=0,c=a.length;c>b;b++)a[b].stateOn=a[b].stateOn||this.stateOn,a[b].stateOff=a[b].stateOff||this.stateOff;return a},a.range=angular.isDefined(b.ratingStates)?this.normalizeRange(angular.copy(a.$parent.$eval(b.ratingStates))):this.createDefaultRange(this.maxRange),a.rate=function(b){a.readonly||a.value===b||(a.value=b)},a.enter=function(b){a.readonly||(a.val=b),a.onHover({value:b})},a.reset=function(){a.val=angular.copy(a.value),a.onLeave()},a.$watch("value",function(b){a.val=b}),a.readonly=!1,b.readonly&&a.$parent.$watch(c(b.readonly),function(b){a.readonly=!!b})}]).directive("rating",function(){return{restrict:"EA",scope:{value:"=",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0}}),angular.module("ui.bootstrap.tabs",[]).directive("tabs",function(){return function(){throw new Error("The `tabs` directive is deprecated, please migrate to `tabset`. Instructions can be found at http://github.com/angular-ui/bootstrap/tree/master/CHANGELOG.md")}}).controller("TabsetController",["$scope","$element",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(a){a.active=!1}),a.active=!0},b.addTab=function(a){c.push(a),(1===c.length||a.active)&&b.select(a)},b.removeTab=function(a){var d=c.indexOf(a);if(a.active&&c.length>1){var e=d==c.length-1?d-1:d+1;b.select(c[e])}c.splice(d,1)}}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,require:"^tabset",scope:{},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",compile:function(a,b,c){return function(a,b,d,e){a.vertical=angular.isDefined(d.vertical)?a.$parent.$eval(d.vertical):!1,a.type=angular.isDefined(d.type)?a.$parent.$eval(d.type):"tabs",a.direction=angular.isDefined(d.direction)?a.$parent.$eval(d.direction):"top",a.tabsAbove="below"!=a.direction,e.$scope=a,e.$transcludeFn=c}}}}).directive("tab",["$parse","$http","$templateCache","$compile",function(a){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(b,c,d){return function(b,c,e,f){var g,h;e.active?(g=a(e.active),h=g.assign,b.$parent.$watch(g,function(a){b.active=!!a}),b.active=g(b.$parent)):h=g=angular.noop,b.$watch("active",function(a){h(b.$parent,a),a?(f.select(b),b.onSelect()):b.onDeselect()}),b.disabled=!1,e.disabled&&b.$parent.$watch(a(e.disabled),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},f.addTab(b),b.$on("$destroy",function(){f.removeTab(b)}),b.active&&h(b.$parent,!0),b.$transcludeFn=d}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,b){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}]).directive("tabContentTransclude",["$compile","$parse",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(b,c,d){var e=b.$eval(d.tabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}]).directive("tabsetTitles",["$http",function(){return{restrict:"A",require:"^tabset",templateUrl:"template/tabs/tabset-titles.html",replace:!0,link:function(a,b,c,d){a.$eval(c.tabsetTitles)?d.$transcludeFn(d.$scope.$parent,function(a){b.append(a)}):b.remove()}}}]),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:["AM","PM"],readonlyInput:!1,mousewheel:!0}).directive("timepicker",["$parse","$log","timepickerConfig",function(a,b,c){return{restrict:"EA",require:"?^ngModel",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(d,e,f,g){function h(){var a=parseInt(d.hours,10),b=d.showMeridian?a>0&&13>a:a>=0&&24>a;return b?(d.showMeridian&&(12===a&&(a=0),d.meridian===p[1]&&(a+=12)),a):void 0}function i(){var a=parseInt(d.minutes,10);return a>=0&&60>a?a:void 0}function j(a){return angular.isDefined(a)&&a.toString().length<2?"0"+a:a}function k(a){l(),g.$setViewValue(new Date(o)),m(a)}function l(){g.$setValidity("time",!0),d.invalidHours=!1,d.invalidMinutes=!1}function m(a){var b=o.getHours(),c=o.getMinutes();d.showMeridian&&(b=0===b||12===b?12:b%12),d.hours="h"===a?b:j(b),d.minutes="m"===a?c:j(c),d.meridian=o.getHours()<12?p[0]:p[1]}function n(a){var b=new Date(o.getTime()+6e4*a);o.setHours(b.getHours(),b.getMinutes()),k()}if(g){var o=new Date,p=c.meridians,q=c.hourStep;f.hourStep&&d.$parent.$watch(a(f.hourStep),function(a){q=parseInt(a,10)});var r=c.minuteStep;f.minuteStep&&d.$parent.$watch(a(f.minuteStep),function(a){r=parseInt(a,10)}),d.showMeridian=c.showMeridian,f.showMeridian&&d.$parent.$watch(a(f.showMeridian),function(a){if(d.showMeridian=!!a,g.$error.time){var b=h(),c=i();angular.isDefined(b)&&angular.isDefined(c)&&(o.setHours(b),k())}else m()});var s=e.find("input"),t=s.eq(0),u=s.eq(1),v=angular.isDefined(f.mousewheel)?d.$eval(f.mousewheel):c.mousewheel;if(v){var w=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};t.bind("mousewheel wheel",function(a){d.$apply(w(a)?d.incrementHours():d.decrementHours()),a.preventDefault()}),u.bind("mousewheel wheel",function(a){d.$apply(w(a)?d.incrementMinutes():d.decrementMinutes()),a.preventDefault()})}if(d.readonlyInput=angular.isDefined(f.readonlyInput)?d.$eval(f.readonlyInput):c.readonlyInput,d.readonlyInput)d.updateHours=angular.noop,d.updateMinutes=angular.noop;else{var x=function(a,b){g.$setViewValue(null),g.$setValidity("time",!1),angular.isDefined(a)&&(d.invalidHours=a),angular.isDefined(b)&&(d.invalidMinutes=b)};d.updateHours=function(){var a=h();angular.isDefined(a)?(o.setHours(a),k("h")):x(!0)},t.bind("blur",function(){!d.validHours&&d.hours<10&&d.$apply(function(){d.hours=j(d.hours)})}),d.updateMinutes=function(){var a=i();angular.isDefined(a)?(o.setMinutes(a),k("m")):x(void 0,!0)},u.bind("blur",function(){!d.invalidMinutes&&d.minutes<10&&d.$apply(function(){d.minutes=j(d.minutes)})})}g.$render=function(){var a=g.$modelValue?new Date(g.$modelValue):null;isNaN(a)?(g.$setValidity("time",!1),b.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(a&&(o=a),l(),m())},d.incrementHours=function(){n(60*q)},d.decrementHours=function(){n(60*-q)},d.incrementMinutes=function(){n(r)},d.decrementMinutes=function(){n(-r)},d.toggleMeridian=function(){n(720*(o.getHours()<12?1:-1))}}}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(a){var b=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+c+"'.");return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(a,b,c,d,e,f,g){var h=[9,13,27,38,40];return{require:"ngModel",link:function(i,j,k,l){var m=i.$eval(k.typeaheadMinLength)||1,n=i.$eval(k.typeaheadWaitMs)||0,o=i.$eval(k.typeaheadEditable)!==!1,p=b(k.typeaheadLoading).assign||angular.noop,q=b(k.typeaheadOnSelect),r=k.typeaheadInputFormatter?b(k.typeaheadInputFormatter):void 0,s=b(k.ngModel).assign,t=g.parse(k.typeahead),u=angular.element("<typeahead-popup></typeahead-popup>");u.attr({matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(k.typeaheadTemplateUrl)&&u.attr("template-url",k.typeaheadTemplateUrl);var v=i.$new();i.$on("$destroy",function(){v.$destroy()});var w=function(){v.matches=[],v.activeIdx=-1},x=function(a){var b={$viewValue:a};p(i,!0),c.when(t.source(v,b)).then(function(c){if(a===l.$viewValue){if(c.length>0){v.activeIdx=0,v.matches.length=0;for(var d=0;d<c.length;d++)b[t.itemName]=c[d],v.matches.push({label:t.viewMapper(v,b),model:c[d]});v.query=a,v.position=f.position(j),v.position.top=v.position.top+j.prop("offsetHeight")}else w();p(i,!1)}},function(){w(),p(i,!1)})};w(),v.query=void 0;var y;l.$parsers.unshift(function(a){return w(),a&&a.length>=m&&(n>0?(y&&d.cancel(y),y=d(function(){x(a)},n)):x(a)),o?a:(l.$setValidity("editable",!1),void 0)}),l.$formatters.push(function(a){var b,c,d={};return r?(d.$model=a,r(i,d)):(d[t.itemName]=a,b=t.viewMapper(i,d),d[t.itemName]=void 0,c=t.viewMapper(i,d),b!==c?b:a)}),v.select=function(a){var b,c,d={};d[t.itemName]=c=v.matches[a].model,b=t.modelMapper(i,d),s(i,b),l.$setValidity("editable",!0),q(i,{$item:c,$model:b,$label:t.viewMapper(i,d)}),w(),j[0].focus()},j.bind("keydown",function(a){0!==v.matches.length&&-1!==h.indexOf(a.which)&&(a.preventDefault(),40===a.which?(v.activeIdx=(v.activeIdx+1)%v.matches.length,v.$digest()):38===a.which?(v.activeIdx=(v.activeIdx?v.activeIdx:v.matches.length)-1,v.$digest()):13===a.which||9===a.which?v.$apply(function(){v.select(v.activeIdx)}):27===a.which&&(a.stopPropagation(),w(),v.$digest()))});var z=function(a){j[0]!==a.target&&(w(),v.$digest())};e.bind("click",z),i.$on("$destroy",function(){e.unbind("click",z)}),j.after(a(u)(v))}}}]).directive("typeaheadPopup",function(){return{restrict:"E",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(a,b,c){a.templateUrl=c.templateUrl,a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(a,b,c,d){return{restrict:"E",scope:{index:"=",match:"=",query:"="},link:function(e,f,g){var h=d(g.templateUrl)(e.$parent)||"template/typeahead/typeahead-match.html";a.get(h,{cache:b}).success(function(a){f.replaceWith(c(a.trim())(e))})}}}]).filter("typeaheadHighlight",function(){function a(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(b,c){return c?b.replace(new RegExp(a(c),"gi"),"<strong>$&</strong>"):b}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion-group.html",'<div class="accordion-group">\n  <div class="accordion-heading" ><a class="accordion-toggle" ng-click="isOpen = !isOpen" accordion-transclude="heading">{{heading}}</a></div>\n  <div class="accordion-body" collapse="!isOpen">\n    <div class="accordion-inner" ng-transclude></div>  </div>\n</div>')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion.html",'<div class="accordion" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("template/alert/alert.html","<div class='alert' ng-class='type && \"alert-\" + type'>\n    <button ng-show='closeable' type='button' class='close' ng-click='close()'>&times;</button>\n    <div ng-transclude></div>\n</div>\n")}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel">\n    <ol class="carousel-indicators" ng-show="slides().length > 1">\n        <li ng-repeat="slide in slides()" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a ng-click="prev()" class="carousel-control left" ng-show="slides().length > 1">&lsaquo;</a>\n    <a ng-click="next()" class="carousel-control right" ng-show="slides().length > 1">&rsaquo;</a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/datepicker.html",'<table>\n  <thead>\n    <tr class="text-center">\n      <th><button type="button" class="btn pull-left" ng-click="move(-1)"><i class="icon-chevron-left"></i></button></th>\n      <th colspan="{{rows[0].length - 2 + showWeekNumbers}}"><button type="button" class="btn btn-block" ng-click="toggleMode()"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn pull-right" ng-click="move(1)"><i class="icon-chevron-right"></i></button></th>\n    </tr>\n    <tr class="text-center" ng-show="labels.length > 0">\n      <th ng-show="showWeekNumbers">#</th>\n      <th ng-repeat="label in labels">{{label}}</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows">\n      <td ng-show="showWeekNumbers" class="text-center"><em>{{ getWeekNumber(row) }}</em></td>\n      <td ng-repeat="dt in row" class="text-center">\n        <button type="button" style="width:100%;" class="btn" ng-class="{\'btn-info\': dt.selected}" ng-click="select(dt.date)" ng-disabled="dt.disabled"><span ng-class="{muted: dt.secondary}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" class="dropdown-menu">\n	<li ng-transclude></li>\n	<li class="divider"></li>\n	<li style="padding: 9px;">\n		<span class="btn-group">\n			<button class="btn btn-small btn-inverse" ng-click="today()">Today</button>\n			<button class="btn btn-small btn-info" ng-click="showWeeks = ! showWeeks" ng-class="{active: showWeeks}">Weeks</button>\n			<button class="btn btn-small btn-danger" ng-click="clear()">Clear</button>\n		</span>\n		<button class="btn btn-small btn-success pull-right" ng-click="isOpen = false">Close</button>\n	</li>\n</ul>')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div class="modal-backdrop fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1040 + index*10}" ng-click="close($event)"></div>')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div class="modal fade {{ windowClass }}" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10}" ng-transclude></div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pager.html",'<div class="pager">\n  <ul>\n    <li ng-repeat="page in pages" ng-class="{disabled: page.disabled, previous: page.previous, next: page.next}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  </ul>\n</div>\n')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pagination.html",'<div class="pagination"><ul>\n  <li ng-repeat="page in pages" ng-class="{active: page.active, disabled: page.disabled}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  </ul>\n</div>\n')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/bar.html",'<div class="bar" ng-class=\'type && "bar-" + type\'></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progress.html",'<div class="progress"><progressbar ng-repeat="bar in bars" width="bar.to" old="bar.from" animate="bar.animate" type="bar.type"></progressbar></div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("template/rating/rating.html",'<span ng-mouseleave="reset()">\n	<i ng-repeat="r in range" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" ng-class="$index < val && (r.stateOn || \'icon-star\') || (r.stateOff || \'icon-star-empty\')"></i>\n</span>')
}]),angular.module("template/tabs/pane.html",[]).run(["$templateCache",function(a){a.put("template/tabs/pane.html",'<div class="tab-pane" ng-class="{active: selected}" ng-show="selected" ng-transclude></div>\n')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabs.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabs.html",'<div class="tabbable">\n  <ul class="nav nav-tabs">\n    <li ng-repeat="pane in panes" ng-class="{active:pane.selected}">\n      <a ng-click="select(pane)">{{pane.heading}}</a>\n    </li>\n  </ul>\n  <div class="tab-content" ng-transclude></div>\n</div>\n')}]),angular.module("template/tabs/tabset-titles.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset-titles.html","<ul class=\"nav {{type && 'nav-' + type}}\" ng-class=\"{'nav-stacked': vertical}\">\n</ul>\n")}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset.html",'\n<div class="tabbable" ng-class="{\'tabs-right\': direction == \'right\', \'tabs-left\': direction == \'left\', \'tabs-below\': direction == \'below\'}">\n  <div tabset-titles="tabsAbove"></div>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n  <div tabset-titles="!tabsAbove"></div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("template/timepicker/timepicker.html",'<table class="form-inline">\n	<tr class="text-center">\n		<td><a ng-click="incrementHours()" class="btn btn-link"><i class="icon-chevron-up"></i></a></td>\n		<td>&nbsp;</td>\n		<td><a ng-click="incrementMinutes()" class="btn btn-link"><i class="icon-chevron-up"></i></a></td>\n		<td ng-show="showMeridian"></td>\n	</tr>\n	<tr>\n		<td class="control-group" ng-class="{\'error\': invalidHours}"><input type="text" ng-model="hours" ng-change="updateHours()" class="span1 text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2" /></td>\n		<td>:</td>\n		<td class="control-group" ng-class="{\'error\': invalidMinutes}"><input type="text" ng-model="minutes" ng-change="updateMinutes()" class="span1 text-center" ng-readonly="readonlyInput" maxlength="2"></td>\n		<td ng-show="showMeridian"><button type="button" ng-click="toggleMeridian()" class="btn text-center">{{meridian}}</button></td>\n	</tr>\n	<tr class="text-center">\n		<td><a ng-click="decrementHours()" class="btn btn-link"><i class="icon-chevron-down"></i></a></td>\n		<td>&nbsp;</td>\n		<td><a ng-click="decrementMinutes()" class="btn btn-link"><i class="icon-chevron-down"></i></a></td>\n		<td ng-show="showMeridian"></td>\n	</tr>\n</table>')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-popup.html",'<ul class="typeahead dropdown-menu" ng-style="{display: isOpen()&&\'block\' || \'none\', top: position.top+\'px\', left: position.left+\'px\'}">\n    <li ng-repeat="match in matches" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)">\n        <typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></typeahead-match>\n    </li>\n</ul>')}]),angular.module("template/typeahead/typeahead.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead.html",'<ul class="typeahead dropdown-menu" ng-style="{display: isOpen()&&\'block\' || \'none\', top: position.top+\'px\', left: position.left+\'px\'}">\n    <li ng-repeat="match in matches" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)">\n        <a tabindex="-1" ng-click="selectMatch($index)" ng-bind-html-unsafe="match.label | typeaheadHighlight:query"></a>\n    </li>\n</ul>')}])},{}],35:[function(){!function(a,b,c){"use strict";function d(a,b){return y(new(y(function(){},{prototype:a})),b)}function e(a){return x(arguments,function(b){b!==a&&x(b,function(b,c){a.hasOwnProperty(c)||(a[c]=b)})}),a}function f(a,b){var c=[];for(var d in a.path)if(""!==a.path[d]){if(!b.path[d])break;c.push(a.path[d])}return c}function g(a,b,c,d){var e,g=f(c,d),h={},i=[];for(var j in g)if(g[j].params&&g[j].params.length){e=g[j].params;for(var k in e)i.indexOf(e[k])>=0||(i.push(e[k]),h[e[k]]=a[e[k]])}return y({},h,b)}function h(a,b){var d=1,f=2,g={},h=[],i=g,j=y(a.when(g),{$$promises:g,$$values:g});this.study=function(g){function k(a,c){if(o[c]!==f){if(n.push(c),o[c]===d)throw n.splice(0,n.indexOf(c)),new Error("Cyclic dependency: "+n.join(" -> "));if(o[c]=d,u(a))m.push(c,[function(){return b.get(c)}],h);else{var e=b.annotate(a);x(e,function(a){a!==c&&g.hasOwnProperty(a)&&k(g[a],a)}),m.push(c,a,e)}n.pop(),o[c]=f}}function l(a){return v(a)&&a.then&&a.$$promises}if(!v(g))throw new Error("'invocables' must be an object");var m=[],n=[],o={};return x(g,k),g=n=o=null,function(d,f,g){function h(){--t||(u||e(r,f.$$values),p.$$values=r,p.$$promises=!0,o.resolve(r))}function k(a){p.$$failure=a,o.reject(a)}function n(c,e,f){function i(a){l.reject(a),k(a)}function j(){if(!s(p.$$failure))try{l.resolve(b.invoke(e,g,r)),l.promise.then(function(a){r[c]=a,h()},i)}catch(a){i(a)}}var l=a.defer(),m=0;f.forEach(function(a){q.hasOwnProperty(a)&&!d.hasOwnProperty(a)&&(m++,q[a].then(function(b){r[a]=b,--m||j()},i))}),m||j(),q[c]=l.promise}if(l(d)&&g===c&&(g=f,f=d,d=null),d){if(!v(d))throw new Error("'locals' must be an object")}else d=i;if(f){if(!l(f))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else f=j;var o=a.defer(),p=o.promise,q=p.$$promises={},r=y({},d),t=1+m.length/3,u=!1;if(s(f.$$failure))return k(f.$$failure),p;f.$$values?(u=e(r,f.$$values),h()):(y(q,f.$$promises),f.then(h,k));for(var w=0,x=m.length;x>w;w+=3)d.hasOwnProperty(m[w])?h():n(m[w],m[w+1],m[w+2]);return p}},this.resolve=function(a,b,c,d){return this.study(a)(b,c,d)}}function i(a,b,c){this.fromConfig=function(a,b,c){return s(a.template)?this.fromString(a.template,b):s(a.templateUrl)?this.fromUrl(a.templateUrl,b):s(a.templateProvider)?this.fromProvider(a.templateProvider,b,c):null},this.fromString=function(a,b){return t(a)?a(b):a},this.fromUrl=function(c,d){return t(c)&&(c=c(d)),null==c?null:a.get(c,{cache:b}).then(function(a){return a.data})},this.fromProvider=function(a,b,d){return c.invoke(a,null,d||{params:b})}}function j(a){function b(b){if(!/^\w+(-+\w+)*$/.test(b))throw new Error("Invalid parameter name '"+b+"' in pattern '"+a+"'");if(f[b])throw new Error("Duplicate parameter name '"+b+"' in pattern '"+a+"'");f[b]=!0,j.push(b)}function c(a){return a.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&")}var d,e=/([:*])(\w+)|\{(\w+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,f={},g="^",h=0,i=this.segments=[],j=this.params=[];this.source=a;for(var k,l,m;(d=e.exec(a))&&(k=d[2]||d[3],l=d[4]||("*"==d[1]?".*":"[^/]*"),m=a.substring(h,d.index),!(m.indexOf("?")>=0));)g+=c(m)+"("+l+")",b(k),i.push(m),h=e.lastIndex;m=a.substring(h);var n=m.indexOf("?");if(n>=0){var o=this.sourceSearch=m.substring(n);m=m.substring(0,n),this.sourcePath=a.substring(0,h+n),x(o.substring(1).split(/[&?]/),b)}else this.sourcePath=a,this.sourceSearch="";g+=c(m)+"$",i.push(m),this.regexp=new RegExp(g),this.prefix=i[0]}function k(){this.compile=function(a){return new j(a)},this.isMatcher=function(a){return v(a)&&t(a.exec)&&t(a.format)&&t(a.concat)},this.$get=function(){return this}}function l(a){function b(a){var b=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(a.source);return null!=b?b[1].replace(/\\(.)/g,"$1"):""}function c(a,b){return a.replace(/\$(\$|\d{1,2})/,function(a,c){return b["$"===c?0:Number(c)]})}function d(a,b,c){if(!c)return!1;var d=a.invoke(b,b,{$match:c});return s(d)?d:!0}var e=[],f=null;this.rule=function(a){if(!t(a))throw new Error("'rule' must be a function");return e.push(a),this},this.otherwise=function(a){if(u(a)){var b=a;a=function(){return b}}else if(!t(a))throw new Error("'rule' must be a function");return f=a,this},this.when=function(e,f){var g,h=u(f);if(u(e)&&(e=a.compile(e)),!h&&!t(f)&&!w(f))throw new Error("invalid 'handler' in when()");var i={matcher:function(b,c){return h&&(g=a.compile(c),c=["$match",function(a){return g.format(a)}]),y(function(a,e){return d(a,c,b.exec(e.path(),e.search()))},{prefix:u(b.prefix)?b.prefix:""})},regex:function(a,e){if(a.global||a.sticky)throw new Error("when() RegExp must not be global or sticky");return h&&(g=e,e=["$match",function(a){return c(g,a)}]),y(function(b,c){return d(b,e,a.exec(c.path()))},{prefix:b(a)})}},j={matcher:a.isMatcher(e),regex:e instanceof RegExp};for(var k in j)if(j[k])return this.rule(i[k](e,f));throw new Error("invalid 'what' in when()")},this.$get=["$location","$rootScope","$injector",function(a,b,c){function d(){function b(b){var d=b(c,a);return d?(u(d)&&a.replace().url(d),!0):!1}var d,g=e.length;for(d=0;g>d;d++)if(b(e[d]))return;f&&b(f)}return b.$on("$locationChangeSuccess",d),{}}]}function m(a,e,f){function h(a,b){var d=u(a),e=d?a:a.name,f=0===e.indexOf(".")||0===e.indexOf("^");if(f){if(!b)throw new Error("No reference point given for path '"+e+"'");for(var g=e.split("."),h=0,i=g.length,j=b;i>h;h++)if(""!==g[h]||0!==h){if("^"!==g[h])break;if(!j.parent)throw new Error("Path '"+e+"' not valid for state '"+b.name+"'");j=j.parent}else j=b;g=g.slice(h).join("."),e=j.name+(j.name&&g?".":"")+g}var k=q[e];return!k||!d&&(d||k!==a&&k.self!==a)?c:k}function i(b){b=d(b,{self:b,resolve:b.resolve||{},toString:function(){return this.name}});var c=b.name;if(!u(c)||c.indexOf("@")>=0)throw new Error("State must have a valid name");if(q[c])throw new Error("State '"+c+"'' is already defined");for(var e in r)b[e]=r[e](b);return q[c]=b,!b["abstract"]&&b.url&&a.when(b.url,["$match","$stateParams",function(a,c){p.$current.navigable==b&&m(a,c)||p.transitionTo(b,a,!1)}]),b}function j(a,b){return v(a)?b=a:b.name=a,i(b),this}function k(a,b,e,i,j,k,q){function r(a,c,d,f,g){var h=d?c:n(a.params,c),i={$stateParams:h};g.resolve=j.resolve(a.resolve,i,g.resolve,a);var k=[g.resolve.then(function(a){g.globals=a})];return f&&k.push(f),x(a.views,function(b,c){var d=b.resolve&&b.resolve!==a.resolve?b.resolve:{};d.$template=[function(){return e.load(c,{view:b,locals:i,params:h,notify:!1})||""}],k.push(j.resolve(d,i,g.resolve,a).then(function(d){d.$$controller=b.controller,d.$$state=a,g[c]=d}))}),b.all(k).then(function(){return g})}var t=b.reject(new Error("transition superseded")),u=b.reject(new Error("transition prevented"));return o.locals={resolve:null,globals:{$stateParams:{}}},p={params:{},current:o.self,$current:o,transition:null},p.go=function(a,b,c){return this.transitionTo(a,b,y({inherit:!0,relative:p.$current},c))},p.transitionTo=function(c,e,f){s(f)||(f=f===!0||f===!1?{location:f}:{}),e=e||{},f=y({location:!0,inherit:!1,relative:null},f);var j=h(c,f.relative);if(!s(j))throw new Error("No such state "+j);if(j["abstract"])throw new Error("Cannot transition to abstract state '"+c+"'");f.inherit&&(e=g(k,e||{},p.$current,j)),c=j;var n,v,w=c.path,x=p.$current,A=p.params,B=x.path,C=o.locals,D=[];for(n=0,v=w[n];v&&v===B[n]&&m(e,A,v.ownParams);n++,v=w[n])C=D[n]=v.locals;if(c===x&&C===x.locals)return p.transition=null,b.when(p.current);e=l(c.params,e||{});var E=a.$broadcast("$stateChangeStart",c.self,e,x.self,A);if(E.defaultPrevented)return u;for(var F=b.when(C),G=n;G<w.length;G++,v=w[G])C=D[G]=d(C),F=r(v,e,v===c,F,C);var H=p.transition=F.then(function(){var b,d,g;if(p.transition!==H)return t;for(b=B.length-1;b>=n;b--)g=B[b],g.self.onExit&&i.invoke(g.self.onExit,g.self,g.locals.globals),g.locals=null;for(b=n;b<w.length;b++)d=w[b],d.locals=D[b],d.self.onEnter&&i.invoke(d.self.onEnter,d.self,d.locals.globals);p.$current=c,p.current=c.self,p.params=e,z(p.params,k),p.transition=null;var h=c.navigable;return f.location&&h&&q.url(h.url.format(h.locals.globals.$stateParams)),a.$broadcast("$stateChangeSuccess",c.self,e,x.self,A),p.current},function(d){return p.transition!==H?t:(p.transition=null,a.$broadcast("$stateChangeError",c.self,e,x.self,A,d),b.reject(d))});return H},p.is=function(a){var b=h(a);return s(b)?p.$current===b:c},p.includes=function(a){var b=h(a);return s(b)?s(p.$current.includes[b.name]):c},p.href=function(a,b,c){c=y({lossy:!0,inherit:!1,relative:p.$current},c||{});var d=h(a,c.relative);if(!s(d))return null;b=g(k,b||{},p.$current,d);var e=d&&c.lossy?d.navigable:d,i=e&&e.url?e.url.format(l(d.params,b||{})):null;return!f.html5Mode()&&i?"#"+i:i},p.get=function(a){var b=h(a);return b&&b.self?b.self:null},p}function l(a,b){var c={};return x(a,function(a){var d=b[a];c[a]=null!=d?String(d):null}),c}function m(a,b,c){if(!c){c=[];for(var d in a)c.push(d)}for(var e=0;e<c.length;e++){var f=c[e];if(a[f]!=b[f])return!1}return!0}function n(a,b){var c={};return x(a,function(a){c[a]=b[a]}),c}var o,p,q={},r={parent:function(a){if(s(a.parent)&&a.parent)return h(a.parent);var b=/^(.+)\.[^.]+$/.exec(a.name);return b?h(b[1]):o},data:function(a){return a.parent&&a.parent.data&&(a.data=a.self.data=b.extend({},a.parent.data,a.data)),a.data},url:function(a){var b=a.url;if(u(b))return"^"==b.charAt(0)?e.compile(b.substring(1)):(a.parent.navigable||o).url.concat(b);if(e.isMatcher(b)||null==b)return b;throw new Error("Invalid url '"+b+"' in state '"+a+"'")},navigable:function(a){return a.url?a:a.parent?a.parent.navigable:null},params:function(a){if(!a.params)return a.url?a.url.parameters():a.parent.params;if(!w(a.params))throw new Error("Invalid params in state '"+a+"'");if(a.url)throw new Error("Both params and url specicified in state '"+a+"'");return a.params},views:function(a){var b={};return x(s(a.views)?a.views:{"":a},function(c,d){d.indexOf("@")<0&&(d+="@"+a.parent.name),b[d]=c}),b},ownParams:function(a){if(!a.parent)return a.params;var b={};x(a.params,function(a){b[a]=!0}),x(a.parent.params,function(c){if(!b[c])throw new Error("Missing required parameter '"+c+"' in state '"+a.name+"'");b[c]=!1});var c=[];return x(b,function(a,b){a&&c.push(b)}),c},path:function(a){return a.parent?a.parent.path.concat(a):[]},includes:function(a){var b=a.parent?y({},a.parent.includes):{};return b[a.name]=!0,b}};o=i({name:"",url:"^",views:null,"abstract":!0}),o.navigable=null,this.state=j,this.$get=k,k.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$location","$urlRouter"]}function n(){function a(a,b){return{load:function(c,d){var e,f={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return d=y(f,d),d.view&&(e=b.fromConfig(d.view,d.params,d.locals)),e&&d.notify&&a.$broadcast("$viewContentLoading",d),e}}}this.$get=a,a.$inject=["$rootScope","$templateFactory"]}function o(a,c,d,e,f){var g;try{g=e.get("$animator")}catch(h){}var i=!1,j={restrict:"ECA",terminal:!0,transclude:!0,compile:function(e,h,k){return function(e,h,l){function m(b){var g=a.$current&&a.$current.locals[p];if(g!==o){var i=t(r&&b);if(i.remove(h),n&&(n.$destroy(),n=null),!g)return o=null,v.state=null,i.restore(k(e),h);o=g,v.state=g.$$state;var j=c(i.populate(g.$template,h));if(n=e.$new(),g.$$controller){g.$scope=n;var l=d(g.$$controller,g);h.children().data("$ngControllerController",l)}j(n),n.$emit("$viewContentLoaded"),q&&n.$eval(q),f()}}var n,o,p=l[j.name]||l.name||"",q=l.onload||"",r=s(g)&&g(e,l),t=function(a){return{"true":{remove:function(a){r.leave(a.contents(),a)},restore:function(a,b){r.enter(a,b)},populate:function(a,c){var d=b.element("<div></div>").html(a).contents();return r.enter(d,c),d}},"false":{remove:function(a){a.html("")},restore:function(a,b){b.append(a)},populate:function(a,b){return b.html(a),b.contents()}}}[a.toString()]};h.append(k(e));var u=h.parent().inheritedData("$uiView");p.indexOf("@")<0&&(p=p+"@"+(u?u.state.name:""));var v={name:p,state:null};h.data("$uiView",v);var w=function(){if(!i){i=!0;try{m(!0)}catch(a){throw i=!1,a}i=!1}};e.$on("$stateChangeSuccess",w),e.$on("$viewContentLoading",w),m(!1)}}};return j}function p(a){var b=a.match(/^([^(]+?)\s*(\((.*)\))?$/);if(!b||4!==b.length)throw new Error("Invalid state ref '"+a+"'");return{state:b[1],paramExpr:b[3]||null}}function q(a){return{restrict:"A",link:function(b,c,d){var e=p(d.uiSref),f=null,g=a.$current,h="FORM"===c[0].nodeName,i=h?"action":"href",j=!0,k=c.parent().inheritedData("$uiView");k&&k.state&&k.state.name&&(g=k.state);var l=function(b){if(b&&(f=b),j){var d=a.href(e.state,f,{relative:g});return d?(c[0][i]=d,void 0):(j=!1,!1)}};e.paramExpr&&(b.$watch(e.paramExpr,function(a,b){a!==b&&l(a)},!0),f=b.$eval(e.paramExpr)),l(),h||c.bind("click",function(c){1!=c.which||c.ctrlKey||c.metaKey||c.shiftKey||(a.go(e.state,f,{relative:g}),b.$apply(),c.preventDefault())})}}}function r(a,b){function e(a){this.locals=a.locals.globals,this.params=this.locals.$stateParams}function f(){this.locals=null,this.params=null}function g(c,g){if(null!=g.redirectTo){var h,j=g.redirectTo;if(u(j))h=j;else{if(!t(j))throw new Error("Invalid 'redirectTo' in when()");h=function(a,b){return j(a,b.path(),b.search())}}b.when(c,h)}else a.state(d(g,{parent:null,name:"route:"+encodeURIComponent(c),url:c,onEnter:e,onExit:f}));return i.push(g),this}function h(a,b,d){function e(a){return""!==a.name?a:c}var f={routes:i,params:d,current:c};return b.$on("$stateChangeStart",function(a,c,d,f){b.$broadcast("$routeChangeStart",e(c),e(f))}),b.$on("$stateChangeSuccess",function(a,c,d,g){f.current=e(c),b.$broadcast("$routeChangeSuccess",e(c),e(g)),z(d,f.params)}),b.$on("$stateChangeError",function(a,c,d,f,g,h){b.$broadcast("$routeChangeError",e(c),e(f),h)}),f}var i=[];e.$inject=["$$state"],this.when=g,this.$get=h,h.$inject=["$state","$rootScope","$routeParams"]}var s=b.isDefined,t=b.isFunction,u=b.isString,v=b.isObject,w=b.isArray,x=b.forEach,y=b.extend,z=b.copy;b.module("ui.router.util",["ng"]),b.module("ui.router.router",["ui.router.util"]),b.module("ui.router.state",["ui.router.router","ui.router.util"]),b.module("ui.router",["ui.router.state"]),b.module("ui.router.compat",["ui.router"]),h.$inject=["$q","$injector"],b.module("ui.router.util").service("$resolve",h),i.$inject=["$http","$templateCache","$injector"],b.module("ui.router.util").service("$templateFactory",i),j.prototype.concat=function(a){return new j(this.sourcePath+a+this.sourceSearch)},j.prototype.toString=function(){return this.source},j.prototype.exec=function(a,b){var c=this.regexp.exec(a);if(!c)return null;var d,e=this.params,f=e.length,g=this.segments.length-1,h={};if(g!==c.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(d=0;g>d;d++)h[e[d]]=c[d+1];for(;f>d;d++)h[e[d]]=b[e[d]];return h},j.prototype.parameters=function(){return this.params},j.prototype.format=function(a){var b=this.segments,c=this.params;if(!a)return b.join("");var d,e,f,g=b.length-1,h=c.length,i=b[0];for(d=0;g>d;d++)f=a[c[d]],null!=f&&(i+=encodeURIComponent(f)),i+=b[d+1];for(;h>d;d++)f=a[c[d]],null!=f&&(i+=(e?"&":"?")+c[d]+"="+encodeURIComponent(f),e=!0);return i},b.module("ui.router.util").provider("$urlMatcherFactory",k),l.$inject=["$urlMatcherFactoryProvider"],b.module("ui.router.router").provider("$urlRouter",l),m.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider","$locationProvider"],b.module("ui.router.state").value("$stateParams",{}).provider("$state",m),n.$inject=[],b.module("ui.router.state").provider("$view",n),o.$inject=["$state","$compile","$controller","$injector","$anchorScroll"],b.module("ui.router.state").directive("uiView",o),q.$inject=["$state"],b.module("ui.router.state").directive("uiSref",q),r.$inject=["$stateProvider","$urlRouterProvider"],b.module("ui.router.compat").provider("$route",r).directive("ngView",o)}(window,window.angular)},{}],36:[function(){!function(a,b,c){"use strict";b.module("ngCookies",["ng"]).factory("$cookies",["$rootScope","$browser",function(a,d){function e(){var a,e,f,i;for(a in h)k(g[a])&&d.cookies(a,c);for(a in g)e=g[a],b.isString(e)?e!==h[a]&&(d.cookies(a,e),i=!0):b.isDefined(h[a])?g[a]=h[a]:delete g[a];if(i){i=!1,f=d.cookies();for(a in g)g[a]!==f[a]&&(k(f[a])?delete g[a]:g[a]=f[a],i=!0)}}var f,g={},h={},i=!1,j=b.copy,k=b.isUndefined;return d.addPollFn(function(){var b=d.cookies();f!=b&&(f=b,j(b,h),j(b,g),i&&a.$apply())})(),i=!0,a.$watch(e),g}]).factory("$cookieStore",["$cookies",function(a){return{get:function(c){var d=a[c];return d?b.fromJson(d):d},put:function(c,d){a[c]=b.toJson(d)},remove:function(b){delete a[b]}}}])}(window,window.angular)},{}],37:[function(){!function(a,b,c){"use strict";function d(a){return function(){var b,c,d=arguments[0],e="["+(a?a+":":"")+d+"] ",f=arguments[1],g=arguments,h=function(a){return"function"==typeof a?a.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof a?"undefined":"string"!=typeof a?JSON.stringify(a):a};for(b=e+f.replace(/\{\d+\}/g,function(a){var b,c=+a.slice(1,-1);return c+2<g.length?(b=g[c+2],"function"==typeof b?b.toString().replace(/ ?\{[\s\S]*$/,""):"undefined"==typeof b?"undefined":"string"!=typeof b?Q(b):b):a}),b=b+"\nhttp://errors.angularjs.org/1.2.1/"+(a?a+"/":"")+d,c=2;c<arguments.length;c++)b=b+(2==c?"?":"&")+"p"+(c-2)+"="+encodeURIComponent(h(arguments[c]));return new Error(b)}}function e(a){if(null==a||A(a))return!1;var b=a.length;return 1===a.nodeType&&b?!0:u(a)||x(a)||0===b||"number"==typeof b&&b>0&&b-1 in a}function f(a,b,c){var d;if(a)if(y(a))for(d in a)"prototype"!=d&&"length"!=d&&"name"!=d&&a.hasOwnProperty(d)&&b.call(c,a[d],d);else if(a.forEach&&a.forEach!==f)a.forEach(b,c);else if(e(a))for(d=0;d<a.length;d++)b.call(c,a[d],d);else for(d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d);return a}function g(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b.sort()}function h(a,b,c){for(var d=g(a),e=0;e<d.length;e++)b.call(c,a[d[e]],d[e]);return d}function i(a){return function(b,c){a(c,b)}}function j(){for(var a,b=nd.length;b;){if(b--,a=nd[b].charCodeAt(0),57==a)return nd[b]="A",nd.join("");if(90!=a)return nd[b]=String.fromCharCode(a+1),nd.join("");nd[b]="0"}return nd.unshift("0"),nd.join("")}function k(a,b){b?a.$$hashKey=b:delete a.$$hashKey}function l(a){var b=a.$$hashKey;return f(arguments,function(b){b!==a&&f(b,function(b,c){a[c]=b})}),k(a,b),a}function m(a){return parseInt(a,10)}function n(a,b){return l(new(l(function(){},{prototype:a})),b)}function o(){}function p(a){return a}function q(a){return function(){return a}}function r(a){return"undefined"==typeof a}function s(a){return"undefined"!=typeof a}function t(a){return null!=a&&"object"==typeof a}function u(a){return"string"==typeof a}function v(a){return"number"==typeof a}function w(a){return"[object Date]"==kd.apply(a)}function x(a){return"[object Array]"==kd.apply(a)}function y(a){return"function"==typeof a}function z(a){return"[object RegExp]"==kd.apply(a)}function A(a){return a&&a.document&&a.location&&a.alert&&a.setInterval}function B(a){return a&&a.$evalAsync&&a.$watch}function C(a){return"[object File]"===kd.apply(a)}function D(a){return a&&(a.nodeName||a.on&&a.find)}function E(a,b,c){var d=[];return f(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d}function F(a,b){return-1!=G(a,b)}function G(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(b===a[c])return c;return-1}function H(a,b){var c=G(a,b);return c>=0&&a.splice(c,1),b}function I(a,b){if(A(a)||B(a))throw ld("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(b){if(a===b)throw ld("cpi","Can't copy! Source and destination are identical.");if(x(a)){b.length=0;for(var c=0;c<a.length;c++)b.push(I(a[c]))}else{var d=b.$$hashKey;f(b,function(a,c){delete b[c]});for(var e in a)b[e]=I(a[e]);k(b,d)}}else b=a,a&&(x(a)?b=I(a,[]):w(a)?b=new Date(a.getTime()):z(a)?b=new RegExp(a.source):t(a)&&(b=I(a,{})));return b}function J(a,b){b=b||{};for(var c in a)a.hasOwnProperty(c)&&"$$"!==c.substr(0,2)&&(b[c]=a[c]);return b}function K(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var d,e,f,g=typeof a,h=typeof b;if(g==h&&"object"==g){if(!x(a)){if(w(a))return w(b)&&a.getTime()==b.getTime();if(z(a)&&z(b))return a.toString()==b.toString();if(B(a)||B(b)||A(a)||A(b)||x(b))return!1;f={};for(e in a)if("$"!==e.charAt(0)&&!y(a[e])){if(!K(a[e],b[e]))return!1;f[e]=!0}for(e in b)if(!f.hasOwnProperty(e)&&"$"!==e.charAt(0)&&b[e]!==c&&!y(b[e]))return!1;return!0}if(!x(b))return!1;if((d=a.length)==b.length){for(e=0;d>e;e++)if(!K(a[e],b[e]))return!1;return!0}}return!1}function L(){return b.securityPolicy&&b.securityPolicy.isActive||b.querySelector&&!(!b.querySelector("[ng-csp]")&&!b.querySelector("[data-ng-csp]"))}function M(a,b,c){return a.concat(id.call(b,c))}function N(a,b){return id.call(a,b||0)}function O(a,b){var c=arguments.length>2?N(arguments,2):[];return!y(b)||b instanceof RegExp?b:c.length?function(){return arguments.length?b.apply(a,c.concat(id.call(arguments,0))):b.apply(a,c)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function P(a,d){var e=d;return"string"==typeof a&&"$"===a.charAt(0)?e=c:A(d)?e="$WINDOW":d&&b===d?e="$DOCUMENT":B(d)&&(e="$SCOPE"),e}function Q(a,b){return"undefined"==typeof a?c:JSON.stringify(a,P,b?"  ":null)}function R(a){return u(a)?JSON.parse(a):a}function S(a){if(a&&0!==a.length){var b=_c(""+a);a=!("f"==b||"0"==b||"false"==b||"no"==b||"n"==b||"[]"==b)}else a=!1;return a}function T(a){a=ed(a).clone();try{a.html("")}catch(b){}var c=3,d=ed("<div>").append(a).html();try{return a[0].nodeType===c?_c(d):d.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+_c(b)})}catch(b){return _c(d)}}function U(a){try{return decodeURIComponent(a)}catch(b){}}function V(a){var b,c,d={};return f((a||"").split("&"),function(a){if(a&&(b=a.split("="),c=U(b[0]),s(c))){var e=s(b[1])?U(b[1]):!0;d[c]?x(d[c])?d[c].push(e):d[c]=[d[c],e]:d[c]=e}}),d}function W(a){var b=[];return f(a,function(a,c){x(a)?f(a,function(a){b.push(Y(c,!0)+(a===!0?"":"="+Y(a,!0)))}):b.push(Y(c,!0)+(a===!0?"":"="+Y(a,!0)))}),b.length?b.join("&"):""}function X(a){return Y(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function Y(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,b?"%20":"+")}function Z(a,c){function d(a){a&&h.push(a)}var e,g,h=[a],i=["ng:app","ng-app","x-ng-app","data-ng-app"],j=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;f(i,function(c){i[c]=!0,d(b.getElementById(c)),c=c.replace(":","\\:"),a.querySelectorAll&&(f(a.querySelectorAll("."+c),d),f(a.querySelectorAll("."+c+"\\:"),d),f(a.querySelectorAll("["+c+"]"),d))}),f(h,function(a){if(!e){var b=" "+a.className+" ",c=j.exec(b);c?(e=a,g=(c[2]||"").replace(/\s+/g,",")):f(a.attributes,function(b){!e&&i[b.name]&&(e=a,g=b.value)})}}),e&&c(e,g?[g]:[])}function $(c,d){var e=function(){if(c=ed(c),c.injector()){var a=c[0]===b?"document":T(c);throw ld("btstrpd","App Already Bootstrapped with this Element '{0}'",a)}d=d||[],d.unshift(["$provide",function(a){a.value("$rootElement",c)}]),d.unshift("ng");var e=Db(d);return e.invoke(["$rootScope","$rootElement","$compile","$injector","$animate",function(a,b,c,d){a.$apply(function(){b.data("$injector",d),c(b)(a)})}]),e},g=/^NG_DEFER_BOOTSTRAP!/;return a&&!g.test(a.name)?e():(a.name=a.name.replace(g,""),md.resumeBootstrap=function(a){f(a,function(a){d.push(a)}),e()},void 0)}function _(a,b){return b=b||"_",a.replace(pd,function(a,c){return(c?b:"")+a.toLowerCase()})}function ab(){fd=a.jQuery,fd?(ed=fd,l(fd.fn,{scope:zd.scope,isolateScope:zd.isolateScope,controller:zd.controller,injector:zd.injector,inheritedData:zd.inheritedData}),kb("remove",!0,!0,!1),kb("empty",!1,!1,!1),kb("html",!1,!1,!0)):ed=lb,md.element=ed}function bb(a,b,c){if(!a)throw ld("areq","Argument '{0}' is {1}",b||"?",c||"required");return a}function cb(a,b,c){return c&&x(a)&&(a=a[a.length-1]),bb(y(a),b,"not a function, got "+(a&&"object"==typeof a?a.constructor.name||"Object":typeof a)),a}function db(a,b){if("hasOwnProperty"===a)throw ld("badname","hasOwnProperty is not a valid {0} name",b)}function eb(a,b,c){if(!b)return a;for(var d,e=b.split("."),f=a,g=e.length,h=0;g>h;h++)d=e[h],a&&(a=(f=a)[d]);return!c&&y(a)?O(f,a):a}function fb(a){if(a.startNode===a.endNode)return ed(a.startNode);var b=a.startNode,c=[b];do{if(b=b.nextSibling,!b)break;c.push(b)}while(b!==a.endNode);return ed(c)}function gb(a){function b(a,b,c){return a[b]||(a[b]=c())}var c=d("$injector"),e=d("ng");return b(b(a,"angular",Object),"module",function(){var a={};return function(d,f,g){var h=function(a,b){if("hasOwnProperty"===a)throw e("badname","hasOwnProperty is not a valid {0} name",b)};return h(d,"module"),f&&a.hasOwnProperty(d)&&(a[d]=null),b(a,d,function(){function a(a,c,d){return function(){return b[d||"push"]([a,c,arguments]),i}}if(!f)throw c("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",d);var b=[],e=[],h=a("$injector","invoke"),i={_invokeQueue:b,_runBlocks:e,requires:f,name:d,provider:a("$provide","provider"),factory:a("$provide","factory"),service:a("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),animation:a("$animateProvider","register"),filter:a("$filterProvider","register"),controller:a("$controllerProvider","register"),directive:a("$compileProvider","directive"),config:h,run:function(a){return e.push(a),this}};return g&&h(g),i})}})}function hb(b){l(b,{bootstrap:$,copy:I,extend:l,equals:K,element:ed,forEach:f,injector:Db,noop:o,bind:O,toJson:Q,fromJson:R,identity:p,isUndefined:r,isDefined:s,isString:u,isFunction:y,isObject:t,isNumber:v,isElement:D,isArray:x,version:qd,isDate:w,lowercase:_c,uppercase:ad,callbacks:{counter:0},$$minErr:d,$$csp:L}),gd=gb(a);try{gd("ngLocale")}catch(c){gd("ngLocale",[]).provider("$locale",Xb)}gd("ng",["ngLocale"],["$provide",function(a){a.provider("$compile",Jb).directive({a:he,input:re,textarea:re,form:le,script:Ze,select:af,style:cf,option:bf,ngBind:De,ngBindHtml:Fe,ngBindTemplate:Ee,ngClass:Ge,ngClassEven:Ie,ngClassOdd:He,ngCloak:Je,ngController:Ke,ngForm:me,ngHide:Te,ngIf:Me,ngInclude:Ne,ngInit:Oe,ngNonBindable:Pe,ngPluralize:Qe,ngRepeat:Re,ngShow:Se,ngStyle:Ue,ngSwitch:Ve,ngSwitchWhen:We,ngSwitchDefault:Xe,ngOptions:_e,ngTransclude:Ye,ngModel:xe,ngList:Ae,ngChange:ye,required:ze,ngRequired:ze,ngValue:Ce}).directive(ie).directive(Le),a.provider({$anchorScroll:Eb,$animate:Id,$browser:Gb,$cacheFactory:Hb,$controller:Lb,$document:Mb,$exceptionHandler:Nb,$filter:Ec,$interpolate:Vb,$interval:Wb,$http:Sb,$httpBackend:Tb,$location:ic,$log:jc,$parse:pc,$rootScope:sc,$q:qc,$sce:xc,$sceDelegate:wc,$sniffer:yc,$templateCache:Ib,$timeout:zc,$window:Dc})}])}function ib(){return++td}function jb(a){return a.replace(wd,function(a,b,c,d){return d?c.toUpperCase():c}).replace(xd,"Moz$1")}function kb(a,b,c,d){function e(a){var e,g,h,i,j,k,l,m=c&&a?[this.filter(a)]:[this],n=b;if(!d||null!=a)for(;m.length;)for(e=m.shift(),g=0,h=e.length;h>g;g++)for(i=ed(e[g]),n?i.triggerHandler("$destroy"):n=!n,j=0,k=(l=i.children()).length;k>j;j++)m.push(fd(l[j]));return f.apply(this,arguments)}var f=fd.fn[a];f=f.$original||f,e.$original=f,fd.fn[a]=e}function lb(a){if(a instanceof lb)return a;if(!(this instanceof lb)){if(u(a)&&"<"!=a.charAt(0))throw yd("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new lb(a)}if(u(a)){var c=b.createElement("div");c.innerHTML="<div>&#160;</div>"+a,c.removeChild(c.firstChild),vb(this,c.childNodes);var d=ed(b.createDocumentFragment());d.append(this)}else vb(this,a)}function mb(a){return a.cloneNode(!0)}function nb(a){pb(a);
for(var b=0,c=a.childNodes||[];b<c.length;b++)nb(c[b])}function ob(a,b,c,d){if(s(d))throw yd("offargs","jqLite#off() does not support the `selector` argument");var e=qb(a,"events"),g=qb(a,"handle");g&&(r(b)?f(e,function(b,c){vd(a,c,b),delete e[c]}):f(b.split(" "),function(b){r(c)?(vd(a,b,e[b]),delete e[b]):H(e[b]||[],c)}))}function pb(a,b){var d=a[sd],e=rd[d];if(e){if(b)return delete rd[d].data[b],void 0;e.handle&&(e.events.$destroy&&e.handle({},"$destroy"),ob(a)),delete rd[d],a[sd]=c}}function qb(a,b,c){var d=a[sd],e=rd[d||-1];return s(c)?(e||(a[sd]=d=ib(),e=rd[d]={}),e[b]=c,void 0):e&&e[b]}function rb(a,b,c){var d=qb(a,"data"),e=s(c),f=!e&&s(b),g=f&&!t(b);if(d||g||qb(a,"data",d={}),e)d[b]=c;else{if(!f)return d;if(g)return d&&d[b];l(d,b)}}function sb(a,b){return a.getAttribute?(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" ")>-1:!1}function tb(a,b){b&&a.setAttribute&&f(b.split(" "),function(b){a.setAttribute("class",od((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+od(b)+" "," ")))})}function ub(a,b){if(b&&a.setAttribute){var c=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");f(b.split(" "),function(a){a=od(a),-1===c.indexOf(" "+a+" ")&&(c+=a+" ")}),a.setAttribute("class",od(c))}}function vb(a,b){if(b){b=b.nodeName||!s(b.length)||A(b)?[b]:b;for(var c=0;c<b.length;c++)a.push(b[c])}}function wb(a,b){return xb(a,"$"+(b||"ngController")+"Controller")}function xb(a,b,d){a=ed(a),9==a[0].nodeType&&(a=a.find("html"));for(var e=x(b)?b:[b];a.length;){for(var f=0,g=e.length;g>f;f++)if((d=a.data(e[f]))!==c)return d;a=a.parent()}}function yb(a,b){var c=Ad[b.toLowerCase()];return c&&Bd[a.nodeName]&&c}function zb(a,c){var d=function(d,e){if(d.preventDefault||(d.preventDefault=function(){d.returnValue=!1}),d.stopPropagation||(d.stopPropagation=function(){d.cancelBubble=!0}),d.target||(d.target=d.srcElement||b),r(d.defaultPrevented)){var g=d.preventDefault;d.preventDefault=function(){d.defaultPrevented=!0,g.call(d)},d.defaultPrevented=!1}d.isDefaultPrevented=function(){return d.defaultPrevented||d.returnValue===!1},f(c[e||d.type],function(b){b.call(a,d)}),8>=dd?(d.preventDefault=null,d.stopPropagation=null,d.isDefaultPrevented=null):(delete d.preventDefault,delete d.stopPropagation,delete d.isDefaultPrevented)};return d.elem=a,d}function Ab(a){var b,d=typeof a;return"object"==d&&null!==a?"function"==typeof(b=a.$$hashKey)?b=a.$$hashKey():b===c&&(b=a.$$hashKey=j()):b=a,d+":"+b}function Bb(a){f(a,this.put,this)}function Cb(a){var b,c,d,e;return"function"==typeof a?(b=a.$inject)||(b=[],a.length&&(c=a.toString().replace(Fd,""),d=c.match(Cd),f(d[1].split(Dd),function(a){a.replace(Ed,function(a,c,d){b.push(d)})})),a.$inject=b):x(a)?(e=a.length-1,cb(a[e],"fn"),b=a.slice(0,e)):cb(a,"fn",!0),b}function Db(a){function b(a){return function(b,c){return t(b)?(f(b,i(a)),void 0):a(b,c)}}function c(a,b){if(db(a,"service"),(y(b)||x(b))&&(b=v.instantiate(b)),!b.$get)throw Gd("pget","Provider '{0}' must define $get factory method.",a);return s[a+n]=b}function d(a,b){return c(a,{$get:b})}function e(a,b){return d(a,["$injector",function(a){return a.instantiate(b)}])}function g(a,b){return d(a,q(b))}function h(a,b){db(a,"constant"),s[a]=b,w[a]=b}function j(a,b){var c=v.get(a+n),d=c.$get;c.$get=function(){var a=z.invoke(d,c);return z.invoke(b,null,{$delegate:a})}}function k(a){var b,c,d,e,g=[];return f(a,function(a){if(!r.get(a)){r.put(a,!0);try{if(u(a))for(b=gd(a),g=g.concat(k(b.requires)).concat(b._runBlocks),c=b._invokeQueue,d=0,e=c.length;e>d;d++){var f=c[d],h=v.get(f[0]);h[f[1]].apply(h,f[2])}else y(a)?g.push(v.invoke(a)):x(a)?g.push(v.invoke(a)):cb(a,"module")}catch(i){throw x(a)&&(a=a[a.length-1]),i.message&&i.stack&&-1==i.stack.indexOf(i.message)&&(i=i.message+"\n"+i.stack),Gd("modulerr","Failed to instantiate module {0} due to:\n{1}",a,i.stack||i.message||i)}}}),g}function l(a,b){function c(c){if(a.hasOwnProperty(c)){if(a[c]===m)throw Gd("cdep","Circular dependency found: {0}",p.join(" <- "));return a[c]}try{return p.unshift(c),a[c]=m,a[c]=b(c)}finally{p.shift()}}function d(a,b,d){var e,f,g,h=[],i=Cb(a);for(f=0,e=i.length;e>f;f++){if(g=i[f],"string"!=typeof g)throw Gd("itkn","Incorrect injection token! Expected service name as string, got {0}",g);h.push(d&&d.hasOwnProperty(g)?d[g]:c(g))}switch(a.$inject||(a=a[e]),b?-1:h.length){case 0:return a();case 1:return a(h[0]);case 2:return a(h[0],h[1]);case 3:return a(h[0],h[1],h[2]);case 4:return a(h[0],h[1],h[2],h[3]);case 5:return a(h[0],h[1],h[2],h[3],h[4]);case 6:return a(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return a(h[0],h[1],h[2],h[3],h[4],h[5],h[6]);case 8:return a(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7]);case 9:return a(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8]);case 10:return a(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],h[9]);default:return a.apply(b,h)}}function e(a,b){var c,e,f=function(){};return f.prototype=(x(a)?a[a.length-1]:a).prototype,c=new f,e=d(a,c,b),t(e)||y(e)?e:c}return{invoke:d,instantiate:e,get:c,annotate:Cb,has:function(b){return s.hasOwnProperty(b+n)||a.hasOwnProperty(b)}}}var m={},n="Provider",p=[],r=new Bb,s={$provide:{provider:b(c),factory:b(d),service:b(e),value:b(g),constant:b(h),decorator:j}},v=s.$injector=l(s,function(){throw Gd("unpr","Unknown provider: {0}",p.join(" <- "))}),w={},z=w.$injector=l(w,function(a){var b=v.get(a+n);return z.invoke(b.$get,b)});return f(k(a),function(a){z.invoke(a||o)}),z}function Eb(){var a=!0;this.disableAutoScrolling=function(){a=!1},this.$get=["$window","$location","$rootScope",function(b,c,d){function e(a){var b=null;return f(a,function(a){b||"a"!==_c(a.nodeName)||(b=a)}),b}function g(){var a,d=c.hash();d?(a=h.getElementById(d))?a.scrollIntoView():(a=e(h.getElementsByName(d)))?a.scrollIntoView():"top"===d&&b.scrollTo(0,0):b.scrollTo(0,0)}var h=b.document;return a&&d.$watch(function(){return c.hash()},function(){d.$evalAsync(g)}),g}]}function Fb(a,b,d,e){function g(a){try{a.apply(null,N(arguments,1))}finally{if(s--,0===s)for(;t.length;)try{t.pop()()}catch(b){d.error(b)}}}function h(a,b){!function c(){f(w,function(a){a()}),v=b(c,a)}()}function i(){z=null,x!=j.url()&&(x=j.url(),f(A,function(a){a(j.url())}))}var j=this,k=b[0],l=a.location,m=a.history,n=a.setTimeout,p=a.clearTimeout,q={};j.isMock=!1;var s=0,t=[];j.$$completeOutstandingRequest=g,j.$$incOutstandingRequestCount=function(){s++},j.notifyWhenNoOutstandingRequests=function(a){f(w,function(a){a()}),0===s?a():t.push(a)};var v,w=[];j.addPollFn=function(a){return r(v)&&h(100,n),w.push(a),a};var x=l.href,y=b.find("base"),z=null;j.url=function(b,c){if(l!==a.location&&(l=a.location),b){if(x==b)return;return x=b,e.history?c?m.replaceState(null,"",b):(m.pushState(null,"",b),y.attr("href",y.attr("href"))):(z=b,c?l.replace(b):l.href=b),j}return z||l.href.replace(/%27/g,"'")};var A=[],B=!1;j.onUrlChange=function(b){return B||(e.history&&ed(a).on("popstate",i),e.hashchange?ed(a).on("hashchange",i):j.addPollFn(i),B=!0),A.push(b),b},j.baseHref=function(){var a=y.attr("href");return a?a.replace(/^https?\:\/\/[^\/]*/,""):""};var C={},D="",E=j.baseHref();j.cookies=function(a,b){var e,f,g,h,i;if(!a){if(k.cookie!==D)for(D=k.cookie,f=D.split("; "),C={},h=0;h<f.length;h++)g=f[h],i=g.indexOf("="),i>0&&(a=unescape(g.substring(0,i)),C[a]===c&&(C[a]=unescape(g.substring(i+1))));return C}b===c?k.cookie=escape(a)+"=;path="+E+";expires=Thu, 01 Jan 1970 00:00:00 GMT":u(b)&&(e=(k.cookie=escape(a)+"="+escape(b)+";path="+E).length+1,e>4096&&d.warn("Cookie '"+a+"' possibly not set or overflowed because it was too large ("+e+" > 4096 bytes)!"))},j.defer=function(a,b){var c;return s++,c=n(function(){delete q[c],g(a)},b||0),q[c]=!0,c},j.defer.cancel=function(a){return q[a]?(delete q[a],p(a),g(o),!0):!1}}function Gb(){this.$get=["$window","$log","$sniffer","$document",function(a,b,c,d){return new Fb(a,d,b,c)}]}function Hb(){this.$get=function(){function a(a,c){function e(a){a!=m&&(n?n==a&&(n=a.n):n=a,f(a.n,a.p),f(a,m),m=a,m.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(a in b)throw d("$cacheFactory")("iid","CacheId '{0}' is already taken!",a);var g=0,h=l({},c,{id:a}),i={},j=c&&c.capacity||Number.MAX_VALUE,k={},m=null,n=null;return b[a]={put:function(a,b){var c=k[a]||(k[a]={key:a});return e(c),r(b)?void 0:(a in i||g++,i[a]=b,g>j&&this.remove(n.key),b)},get:function(a){var b=k[a];if(b)return e(b),i[a]},remove:function(a){var b=k[a];b&&(b==m&&(m=b.p),b==n&&(n=b.n),f(b.n,b.p),delete k[a],delete i[a],g--)},removeAll:function(){i={},g=0,k={},m=n=null},destroy:function(){i=null,h=null,k=null,delete b[a]},info:function(){return l({},h,{size:g})}}}var b={};return a.info=function(){var a={};return f(b,function(b,c){a[c]=b.info()}),a},a.get=function(a){return b[a]},a}}function Ib(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function Jb(a){var d={},e="Directive",g=/^\s*directive\:\s*([\d\w\-_]+)\s+(.*)$/,h=/(([\d\w\-_]+)(?:\:([^;]+))?;?)/,j=/^\s*(https?|ftp|mailto|tel|file):/,k=/^\s*(https?|ftp|file):|data:image\//,m=/^(on[a-z]+|formaction)$/;this.directive=function o(b,c){return db(b,"directive"),u(b)?(bb(c,"directiveFactory"),d.hasOwnProperty(b)||(d[b]=[],a.factory(b+e,["$injector","$exceptionHandler",function(a,c){var e=[];return f(d[b],function(d,f){try{var g=a.invoke(d);y(g)?g={compile:q(g)}:!g.compile&&g.link&&(g.compile=q(g.link)),g.priority=g.priority||0,g.index=f,g.name=g.name||b,g.require=g.require||g.controller&&g.name,g.restrict=g.restrict||"A",e.push(g)}catch(h){c(h)}}),e}])),d[b].push(c)):f(b,i(o)),this},this.aHrefSanitizationWhitelist=function(a){return s(a)?(j=a,this):j},this.imgSrcSanitizationWhitelist=function(a){return s(a)?(k=a,this):k},this.$get=["$injector","$interpolate","$exceptionHandler","$http","$templateCache","$parse","$controller","$rootScope","$document","$sce","$animate",function(a,i,o,r,s,v,w,z,A,B,C){function D(a,b,c,d,e){a instanceof ed||(a=ed(a)),f(a,function(b,c){3==b.nodeType&&b.nodeValue.match(/\S+/)&&(a[c]=b=ed(b).wrap("<span></span>").parent()[0])});var g=F(a,b,a,c,d,e);return function(b,c,d){bb(b,"scope");var e=c?zd.clone.call(a):a;f(d,function(a,b){e.data("$"+b+"Controller",a)});for(var h=0,i=e.length;i>h;h++){var j=e[h];(1==j.nodeType||9==j.nodeType)&&e.eq(h).data("$scope",b)}return E(e,"ng-scope"),c&&c(e,b),g&&g(b,e,e),e}}function E(a,b){try{a.addClass(b)}catch(c){}}function F(a,b,d,e,f,g){function h(a,d,e,f){var g,h,i,j,k,l,m,o,p,q=[];for(m=0,o=d.length;o>m;m++)q.push(d[m]);for(m=0,p=0,o=n.length;o>m;p++)i=q[p],g=n[m++],h=n[m++],j=ed(i),g?(g.scope?(k=a.$new(),j.data("$scope",k),E(j,"ng-scope")):k=a,l=g.transclude,l||!f&&b?g(h,k,i,e,G(a,l||b)):g(h,k,i,c,f)):h&&h(a,i.childNodes,c,f)}for(var i,j,k,l,m,n=[],o=0;o<a.length;o++)l=new $,k=H(a[o],[],l,0===o?e:c,f),i=k.length?L(k,a[o],l,b,d,null,[],[],g):null,j=i&&i.terminal||!a[o].childNodes||!a[o].childNodes.length?null:F(a[o].childNodes,i?i.transclude:b),n.push(i),n.push(j),m=m||i||j,g=null;return m?h:null}function G(a,b){return function(c,d,e){var f=!1;c||(c=a.$new(),c.$$transcluded=!0,f=!0);var g=b(c,d,e);return f&&g.on("$destroy",O(c,c.$destroy)),g}}function H(a,b,c,d,e){var f,i,j=a.nodeType,k=c.$attr;switch(j){case 1:P(b,Kb(hd(a).toLowerCase()),"E",d,e);for(var l,m,n,o,p,q=a.attributes,r=0,s=q&&q.length;s>r;r++){var t=!1,v=!1;if(l=q[r],!dd||dd>=8||l.specified){m=l.name,o=Kb(m),eb.test(o)&&(m=_(o.substr(6),"-"));var w=o.replace(/(Start|End)$/,"");o===w+"Start"&&(t=m,v=m.substr(0,m.length-5)+"end",m=m.substr(0,m.length-6)),n=Kb(m.toLowerCase()),k[n]=m,c[n]=p=od(dd&&"href"==m?decodeURIComponent(a.getAttribute(m,2)):l.value),yb(a,n)&&(c[n]=!0),X(a,b,p,n),P(b,n,"A",d,e,t,v)}}if(i=a.className,u(i)&&""!==i)for(;f=h.exec(i);)n=Kb(f[2]),P(b,n,"C",d,e)&&(c[n]=od(f[3])),i=i.substr(f.index+f[0].length);break;case 3:V(b,a.nodeValue);break;case 8:try{f=g.exec(a.nodeValue),f&&(n=Kb(f[1]),P(b,n,"M",d,e)&&(c[n]=od(f[2])))}catch(x){}}return b.sort(S),b}function I(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw Jd("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",b,c);1==a.nodeType&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--),d.push(a),a=a.nextSibling}while(e>0)}else d.push(a);return ed(d)}function K(a,b,c){return function(d,e,f,g,h){return e=I(e[0],b,c),a(d,e,f,g,h)}}function L(a,d,e,g,h,j,k,l,m){function n(a,b,c,d){a&&(c&&(a=K(a,c,d)),a.require=s.require,(L===s||s.$$isolateScope)&&(a=Z(a,{isolateScope:!0})),k.push(a)),b&&(c&&(b=K(b,c,d)),b.require=s.require,(L===s||s.$$isolateScope)&&(b=Z(b,{isolateScope:!0})),l.push(b))}function p(a,b,c){var d,e="data",g=!1;if(u(a)){for(;"^"==(d=a.charAt(0))||"?"==d;)a=a.substr(1),"^"==d&&(e="inheritedData"),g=g||"?"==d;if(d=null,c&&"data"===e&&(d=c[a]),d=d||b[e]("$"+a+"Controller"),!d&&!g)throw Jd("ctreq","Controller '{0}', required by directive '{1}', can't be found!",a,z);return d}return x(a)&&(d=[],f(a,function(a){d.push(p(a,b,c))})),d}function q(a,b,g,h,j){function m(a,b){var d;return arguments.length<2&&(b=a,a=c),V&&(d=z),j(a,b,d)}var n,q,r,s,t,u,x,y,z={};if(n=d===g?e:J(e,new $(ed(g),e.$attr)),q=n.$$element,L){var A=/^\s*([@=&])(\??)\s*(\w*)\s*$/,B=ed(g);x=b.$new(!0),O&&O===L.$$originalDirective?B.data("$isolateScope",x):B.data("$isolateScopeNoTemplate",x),E(B,"ng-isolate-scope"),f(L.scope,function(a,c){var d,e,f,g=a.match(A)||[],h=g[3]||c,j="?"==g[2],k=g[1];switch(x.$$isolateBindings[c]=k+h,k){case"@":n.$observe(h,function(a){x[c]=a}),n.$$observers[h].$$scope=b,n[h]&&(x[c]=i(n[h])(b));break;case"=":if(j&&!n[h])return;e=v(n[h]),f=e.assign||function(){throw d=x[c]=e(b),Jd("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",n[h],L.name)},d=x[c]=e(b),x.$watch(function(){var a=e(b);return a!==x[c]&&(a!==d?d=x[c]=a:f(b,a=d=x[c])),a});break;case"&":e=v(n[h]),x[c]=function(a){return e(b,a)};break;default:throw Jd("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",L.name,c,a)}})}for(y=j&&m,G&&f(G,function(a){var c,d={$scope:a===L||a.$$isolateScope?x:b,$element:q,$attrs:n,$transclude:y};u=a.controller,"@"==u&&(u=n[a.name]),c=w(u,d),z[a.name]=c,V||q.data("$"+a.name+"Controller",c),a.controllerAs&&(d.$scope[a.controllerAs]=c)}),r=0,s=k.length;s>r;r++)try{t=k[r],t(t.isolateScope?x:b,q,n,t.require&&p(t.require,q,z),y)}catch(C){o(C,T(q))}var D=b;for(L&&(L.template||null===L.templateUrl)&&(D=x),a&&a(D,g.childNodes,c,j),r=l.length-1;r>=0;r--)try{t=l[r],t(t.isolateScope?x:b,q,n,t.require&&p(t.require,q,z),y)}catch(C){o(C,T(q))}}m=m||{};for(var r,s,z,A,B,C,F=-Number.MAX_VALUE,G=m.controllerDirectives,L=m.newIsolateScopeDirective,O=m.templateDirective,P=m.nonTlbTranscludeDirective,S=!1,V=!1,W=e.$$element=ed(d),X=j,_=g,ab=0,bb=a.length;bb>ab;ab++){s=a[ab];var cb=s.$$start,eb=s.$$end;if(cb&&(W=I(d,cb,eb)),A=c,F>s.priority)break;if((C=s.scope)&&(r=r||s,s.templateUrl||(U("new/isolated scope",L,s,W),t(C)&&(L=s))),z=s.name,!s.templateUrl&&s.controller&&(C=s.controller,G=G||{},U("'"+z+"' controller",G[z],s,W),G[z]=s),(C=s.transclude)&&(S=!0,s.$$tlb||(U("transclusion",P,s,W),P=s),"element"==C?(V=!0,F=s.priority,A=I(d,cb,eb),W=e.$$element=ed(b.createComment(" "+z+": "+e[z]+" ")),d=W[0],Y(h,ed(N(A)),d),_=D(A,g,F,X&&X.name,{nonTlbTranscludeDirective:P})):(A=ed(mb(d)).contents(),W.html(""),_=D(A,g))),s.template)if(U("template",O,s,W),O=s,C=y(s.template)?s.template(W,e):s.template,C=db(C),s.replace){if(X=s,A=ed("<div>"+od(C)+"</div>").contents(),d=A[0],1!=A.length||1!==d.nodeType)throw Jd("tplrt","Template for directive '{0}' must have exactly one root element. {1}",z,"");Y(h,W,d);var fb={$attr:{}},gb=H(d,[],fb),hb=a.splice(ab+1,a.length-(ab+1));L&&M(gb),a=a.concat(gb).concat(hb),Q(e,fb),bb=a.length}else W.html(C);if(s.templateUrl)U("template",O,s,W),O=s,s.replace&&(X=s),q=R(a.splice(ab,a.length-ab),W,e,h,_,k,l,{controllerDirectives:G,newIsolateScopeDirective:L,templateDirective:O,nonTlbTranscludeDirective:P}),bb=a.length;else if(s.compile)try{B=s.compile(W,e,_),y(B)?n(null,B,cb,eb):B&&n(B.pre,B.post,cb,eb)}catch(ib){o(ib,T(W))}s.terminal&&(q.terminal=!0,F=Math.max(F,s.priority))}return q.scope=r&&r.scope===!0,q.transclude=S&&_,q}function M(a){for(var b=0,c=a.length;c>b;b++)a[b]=n(a[b],{$$isolateScope:!0})}function P(b,f,g,h,i,j,k){if(f===i)return null;var l=null;if(d.hasOwnProperty(f))for(var m,p=a.get(f+e),q=0,r=p.length;r>q;q++)try{m=p[q],(h===c||h>m.priority)&&-1!=m.restrict.indexOf(g)&&(j&&(m=n(m,{$$start:j,$$end:k})),b.push(m),l=m)}catch(s){o(s)}return l}function Q(a,b){var c=b.$attr,d=a.$attr,e=a.$$element;f(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))}),f(b,function(b,f){"class"==f?(E(e,b),a["class"]=(a["class"]?a["class"]+" ":"")+b):"style"==f?(e.attr("style",e.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==f.charAt(0)||a.hasOwnProperty(f)||(a[f]=b,d[f]=c[f])})}function R(a,b,c,d,e,g,h,i){var j,k,m=[],n=b[0],o=a.shift(),p=l({},o,{templateUrl:null,transclude:null,replace:null,$$originalDirective:o}),q=y(o.templateUrl)?o.templateUrl(b,c):o.templateUrl;return b.html(""),r.get(B.getTrustedResourceUrl(q),{cache:s}).success(function(l){var r,s,u,v;if(l=db(l),o.replace){if(u=ed("<div>"+od(l)+"</div>").contents(),r=u[0],1!=u.length||1!==r.nodeType)throw Jd("tplrt","Template for directive '{0}' must have exactly one root element. {1}",o.name,q);s={$attr:{}},Y(d,b,r);var w=H(r,[],s);t(o.scope)&&M(w),a=w.concat(a),Q(c,s)}else r=n,b.html(l);for(a.unshift(p),j=L(a,r,c,e,b,o,g,h,i),f(d,function(a,c){a==r&&(d[c]=b[0])}),k=F(b[0].childNodes,e);m.length;){var x=m.shift(),y=m.shift(),z=m.shift(),A=m.shift(),B=b[0];y!==n&&(B=mb(r),Y(z,ed(y),B)),v=j.transclude?G(x,j.transclude):A,j(k,x,B,d,v)}m=null}).error(function(a,b,c,d){throw Jd("tpload","Failed to load template: {0}",d.url)}),function(a,b,c,d,e){m?(m.push(b),m.push(c),m.push(d),m.push(e)):j(k,b,c,d,e)}}function S(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function U(a,b,c,d){if(b)throw Jd("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",b.name,c.name,a,T(d))}function V(a,b){var c=i(b,!0);c&&a.push({priority:0,compile:q(function(a,b){var d=b.parent(),e=d.data("$binding")||[];e.push(c),E(d.data("$binding",e),"ng-binding"),a.$watch(c,function(a){b[0].nodeValue=a})})})}function W(a,b){return"xlinkHref"==b||"IMG"!=hd(a)&&("src"==b||"ngSrc"==b)?B.RESOURCE_URL:void 0}function X(a,b,c,d){var e=i(c,!0);if(e){if("multiple"===d&&"SELECT"===hd(a))throw Jd("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",T(a));b.push({priority:100,compile:function(){return{pre:function(b,c,f){var g=f.$$observers||(f.$$observers={});if(m.test(d))throw Jd("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");e=i(f[d],!0,W(a,d)),e&&(f[d]=e(b),(g[d]||(g[d]=[])).$$inter=!0,(f.$$observers&&f.$$observers[d].$$scope||b).$watch(e,function(a){f.$set(d,a)}))}}}})}}function Y(a,c,d){var e,f,g=c[0],h=c.length,i=g.parentNode;if(a)for(e=0,f=a.length;f>e;e++)if(a[e]==g){a[e++]=d;for(var j=e,k=j+h-1,l=a.length;l>j;j++,k++)l>k?a[j]=a[k]:delete a[j];a.length-=h-1;break}i&&i.replaceChild(d,g);var m=b.createDocumentFragment();m.appendChild(g),d[ed.expando]=g[ed.expando];for(var n=1,o=c.length;o>n;n++){var p=c[n];ed(p).remove(),m.appendChild(p),delete c[n]}c[0]=d,c.length=1}function Z(a,b){return l(function(){return a.apply(null,arguments)},a,b)}var $=function(a,b){this.$$element=a,this.$attr=b||{}};$.prototype={$normalize:Kb,$addClass:function(a){a&&a.length>0&&C.addClass(this.$$element,a)},$removeClass:function(a){a&&a.length>0&&C.removeClass(this.$$element,a)},$set:function(a,b,d,e){function g(a,b){var c=[],d=a.split(/\s+/),e=b.split(/\s+/);a:for(var f=0;f<d.length;f++){for(var g=d[f],h=0;h<e.length;h++)if(g==e[h])continue a;c.push(g)}return c}if("class"==a){b=b||"";var h=this.$$element.attr("class")||"";this.$removeClass(g(h,b).join(" ")),this.$addClass(g(b,h).join(" "))}else{var i,l,m=yb(this.$$element[0],a);m&&(this.$$element.prop(a,b),e=m),this[a]=b,e?this.$attr[a]=e:(e=this.$attr[a],e||(this.$attr[a]=e=_(a,"-"))),l=hd(this.$$element),("A"===l&&"href"===a||"IMG"===l&&"src"===a)&&(!dd||dd>=8)&&(i=Ac(b).href,""!==i&&("href"===a&&!i.match(j)||"src"===a&&!i.match(k))&&(this[a]=b="unsafe:"+i)),d!==!1&&(null===b||b===c?this.$$element.removeAttr(e):this.$$element.attr(e,b))}var n=this.$$observers;n&&f(n[a],function(a){try{a(b)}catch(c){o(c)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers={}),e=d[a]||(d[a]=[]);return e.push(b),z.$evalAsync(function(){e.$$inter||b(c[a])}),b}};var ab=i.startSymbol(),cb=i.endSymbol(),db="{{"==ab||"}}"==cb?p:function(a){return a.replace(/\{\{/g,ab).replace(/}}/g,cb)},eb=/^ngAttr[A-Z]/;return D}]}function Kb(a){return jb(a.replace(Kd,""))}function Lb(){var a={},b=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(b,c){db(b,"controller"),t(b)?l(a,b):a[b]=c},this.$get=["$injector","$window",function(c,e){return function(f,g){var h,i,j,k;if(u(f)&&(i=f.match(b),j=i[1],k=i[3],f=a.hasOwnProperty(j)?a[j]:eb(g.$scope,j,!0)||eb(e,j,!0),cb(f,j,!0)),h=c.instantiate(f,g),k){if(!g||"object"!=typeof g.$scope)throw d("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",j||f.name,k);g.$scope[k]=h}return h}}]}function Mb(){this.$get=["$window",function(a){return ed(a.document)}]}function Nb(){this.$get=["$log",function(a){return function(){a.error.apply(a,arguments)}}]}function Ob(a){var b,c,d,e={};return a?(f(a.split("\n"),function(a){d=a.indexOf(":"),b=_c(od(a.substr(0,d))),c=od(a.substr(d+1)),b&&(e[b]?e[b]+=", "+c:e[b]=c)}),e):e}function Pb(a){var b=t(a)?a:c;return function(c){return b||(b=Ob(a)),c?b[_c(c)]||null:b}}function Qb(a,b,c){return y(c)?c(a,b):(f(c,function(c){a=c(a,b)}),a)}function Rb(a){return a>=200&&300>a}function Sb(){var a=/^\s*(\[|\{[^\{])/,b=/[\}\]]\s*$/,d=/^\)\]\}',?\n/,e={"Content-Type":"application/json;charset=utf-8"},g=this.defaults={transformResponse:[function(c){return u(c)&&(c=c.replace(d,""),a.test(c)&&b.test(c)&&(c=R(c))),c}],transformRequest:[function(a){return t(a)&&!C(a)?Q(a):a}],headers:{common:{Accept:"application/json, text/plain, */*"},post:e,put:e,patch:e},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},i=this.interceptors=[],j=this.responseInterceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(a,b,d,e,k,m){function n(a){function d(a){var b=l({},a,{data:Qb(a.data,a.headers,h.transformResponse)});return Rb(a.status)?b:k.reject(b)}function e(a){function b(a){var b;f(a,function(c,d){y(c)&&(b=c(),null!=b?a[d]=b:delete a[d])})}var c,d,e,h=g.headers,i=l({},a.headers);h=l({},h.common,h[_c(a.method)]),b(h),b(i);a:for(c in h){d=_c(c);for(e in i)if(_c(e)===d)continue a;i[c]=h[c]}return i}var h={transformRequest:g.transformRequest,transformResponse:g.transformResponse},i=e(a);l(h,a),h.headers=i,h.method=ad(h.method);var j=Bc(h.url)?b.cookies()[h.xsrfCookieName||g.xsrfCookieName]:c;j&&(i[h.xsrfHeaderName||g.xsrfHeaderName]=j);var m=function(a){i=a.headers;var b=Qb(a.data,Pb(i),a.transformRequest);return r(a.data)&&f(i,function(a,b){"content-type"===_c(b)&&delete i[b]}),r(a.withCredentials)&&!r(g.withCredentials)&&(a.withCredentials=g.withCredentials),q(a,b,i).then(d,d)},n=[m,c],o=k.when(h);for(f(z,function(a){(a.request||a.requestError)&&n.unshift(a.request,a.requestError),(a.response||a.responseError)&&n.push(a.response,a.responseError)});n.length;){var p=n.shift(),s=n.shift();o=o.then(p,s)}return o.success=function(a){return o.then(function(b){a(b.data,b.status,b.headers,h)}),o},o.error=function(a){return o.then(null,function(b){a(b.data,b.status,b.headers,h)}),o},o}function o(){f(arguments,function(a){n[a]=function(b,c){return n(l(c||{},{method:a,url:b}))}})}function p(){f(arguments,function(a){n[a]=function(b,c,d){return n(l(d||{},{method:a,url:b,data:c}))}})}function q(b,c,d){function f(a,b,c){j&&(Rb(a)?j.put(p,[a,b,Ob(c)]):j.remove(p)),h(b,a,c),e.$$phase||e.$apply()}function h(a,c,d){c=Math.max(c,0),(Rb(c)?m.resolve:m.reject)({data:a,status:c,headers:Pb(d),config:b})}function i(){var a=G(n.pendingRequests,b);-1!==a&&n.pendingRequests.splice(a,1)}var j,l,m=k.defer(),o=m.promise,p=v(b.url,b.params);if(n.pendingRequests.push(b),o.then(i,i),(b.cache||g.cache)&&b.cache!==!1&&"GET"==b.method&&(j=t(b.cache)?b.cache:t(g.cache)?g.cache:w),j)if(l=j.get(p),s(l)){if(l.then)return l.then(i,i),l;x(l)?h(l[1],l[0],I(l[2])):h(l,200,{})}else j.put(p,o);return r(l)&&a(b.method,p,c,f,d,b.timeout,b.withCredentials,b.responseType),o}function v(a,b){if(!b)return a;var c=[];return h(b,function(a,b){null===a||r(a)||(x(a)||(a=[a]),f(a,function(a){t(a)&&(a=Q(a)),c.push(Y(b)+"="+Y(a))}))}),a+(-1==a.indexOf("?")?"?":"&")+c.join("&")}var w=d("$http"),z=[];return f(i,function(a){z.unshift(u(a)?m.get(a):m.invoke(a))}),f(j,function(a,b){var c=u(a)?m.get(a):m.invoke(a);z.splice(b,0,{response:function(a){return c(k.when(a))},responseError:function(a){return c(k.reject(a))}})}),n.pendingRequests=[],o("get","delete","head","jsonp"),p("post","put"),n.defaults=g,n}]}function Tb(){this.$get=["$browser","$window","$document",function(a,b,c){return Ub(a,Ld,a.defer,b.angular.callbacks,c[0],b.location.protocol.replace(":",""))}]}function Ub(a,b,c,d,e,g){function h(a,b){var c=e.createElement("script"),d=function(){e.body.removeChild(c),b&&b()};return c.type="text/javascript",c.src=a,dd?c.onreadystatechange=function(){/loaded|complete/.test(c.readyState)&&d()}:c.onload=c.onerror=d,e.body.appendChild(c),d}return function(e,i,j,k,l,m,n,p){function q(){t=-1,v&&v(),w&&w.abort()}function r(b,d,e,f){var h=g||Ac(i).protocol;x&&c.cancel(x),v=w=null,d="file"==h?e?200:404:d,d=1223==d?204:d,b(d,e,f),a.$$completeOutstandingRequest(o)}var t;if(a.$$incOutstandingRequestCount(),i=i||a.url(),"jsonp"==_c(e)){var u="_"+(d.counter++).toString(36);d[u]=function(a){d[u].data=a};var v=h(i.replace("JSON_CALLBACK","angular.callbacks."+u),function(){d[u].data?r(k,200,d[u].data):r(k,t||-2),delete d[u]})}else{var w=new b;w.open(e,i,!0),f(l,function(a,b){s(a)&&w.setRequestHeader(b,a)}),w.onreadystatechange=function(){if(4==w.readyState){var a=w.getAllResponseHeaders();r(k,t||w.status,w.responseType?w.response:w.responseText,a)}},n&&(w.withCredentials=!0),p&&(w.responseType=p),w.send(j||null)}if(m>0)var x=c(q,m);else m&&m.then&&m.then(q)}}function Vb(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a},this.endSymbol=function(a){return a?(b=a,this):b},this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(f,i,j){for(var k,l,m,n,o=0,p=[],q=f.length,s=!1,t=[];q>o;)-1!=(k=f.indexOf(a,o))&&-1!=(l=f.indexOf(b,k+g))?(o!=k&&p.push(f.substring(o,k)),p.push(m=c(n=f.substring(k+g,l))),m.exp=n,o=l+h,s=!0):(o!=q&&p.push(f.substring(o)),o=q);if((q=p.length)||(p.push(""),q=1),j&&p.length>1)throw Md("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",f);return!i||s?(t.length=q,m=function(a){try{for(var b,c=0,g=q;g>c;c++)"function"==typeof(b=p[c])&&(b=b(a),b=j?e.getTrusted(j,b):e.valueOf(b),null===b||r(b)?b="":"string"!=typeof b&&(b=Q(b))),t[c]=b;return t.join("")}catch(h){var i=Md("interr","Can't interpolate: {0}\n{1}",f,h.toString());d(i)}},m.exp=f,m.parts=p,m):void 0}var g=a.length,h=b.length;return f.startSymbol=function(){return a},f.endSymbol=function(){return b},f}]}function Wb(){this.$get=["$rootScope","$window","$q",function(a,b,c){function d(d,f,g,h){var i=b.setInterval,j=b.clearInterval,k=c.defer(),l=k.promise,m=0,n=s(h)&&!h;return g=s(g)?g:0,l.then(null,null,d),l.$$intervalId=i(function(){k.notify(m++),g>0&&m>=g&&(k.resolve(m),j(l.$$intervalId),delete e[l.$$intervalId]),n||a.$apply()},f),e[l.$$intervalId]=k,l}var e={};return d.cancel=function(a){return a&&a.$$intervalId in e?(e[a.$$intervalId].reject("canceled"),clearInterval(a.$$intervalId),delete e[a.$$intervalId],!0):!1},d}]}function Xb(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"",posSuf:"",negPre:"(",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(a){return 1===a?"one":"other"}}}}function Yb(a){for(var b=a.split("/"),c=b.length;c--;)b[c]=X(b[c]);return b.join("/")}function Zb(a,b,c){var d=Ac(a,c);b.$$protocol=d.protocol,b.$$host=d.hostname,b.$$port=m(d.port)||Od[d.protocol]||null}function $b(a,b,c){var d="/"!==a.charAt(0);d&&(a="/"+a);var e=Ac(a,c);b.$$path=decodeURIComponent(d&&"/"===e.pathname.charAt(0)?e.pathname.substring(1):e.pathname),b.$$search=V(e.search),b.$$hash=decodeURIComponent(e.hash),b.$$path&&"/"!=b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function _b(a,b){return 0===b.indexOf(a)?b.substr(a.length):void 0}function ac(a){var b=a.indexOf("#");return-1==b?a:a.substr(0,b)}function bc(a){return a.substr(0,ac(a).lastIndexOf("/")+1)}function cc(a){return a.substring(0,a.indexOf("/",a.indexOf("//")+2))}function dc(a,b){this.$$html5=!0,b=b||"";var d=bc(a);Zb(a,this,a),this.$$parse=function(b){var c=_b(d,b);if(!u(c))throw Pd("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',b,d);$b(c,this,a),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var a=W(this.$$search),b=this.$$hash?"#"+X(this.$$hash):"";this.$$url=Yb(this.$$path)+(a?"?"+a:"")+b,this.$$absUrl=d+this.$$url.substr(1)},this.$$rewrite=function(e){var f,g;return(f=_b(a,e))!==c?(g=f,(f=_b(b,f))!==c?d+(_b("/",f)||f):a+g):(f=_b(d,e))!==c?d+f:d==e+"/"?d:void 0}}function ec(a,b){var c=bc(a);Zb(a,this,a),this.$$parse=function(d){var e=_b(a,d)||_b(c,d),f="#"==e.charAt(0)?_b(b,e):this.$$html5?e:"";if(!u(f))throw Pd("ihshprfx",'Invalid url "{0}", missing hash prefix "{1}".',d,b);$b(f,this,a),this.$$compose()},this.$$compose=function(){var c=W(this.$$search),d=this.$$hash?"#"+X(this.$$hash):"";this.$$url=Yb(this.$$path)+(c?"?"+c:"")+d,this.$$absUrl=a+(this.$$url?b+this.$$url:"")},this.$$rewrite=function(b){return ac(a)==ac(b)?b:void 0}}function fc(a,b){this.$$html5=!0,ec.apply(this,arguments);var c=bc(a);this.$$rewrite=function(d){var e;return a==ac(d)?d:(e=_b(c,d))?a+b+e:c===d+"/"?c:void 0}}function gc(a){return function(){return this[a]}}function hc(a,b){return function(c){return r(c)?this[a]:(this[a]=b(c),this.$$compose(),this)}}function ic(){var b="",c=!1;this.hashPrefix=function(a){return s(a)?(b=a,this):b},this.html5Mode=function(a){return s(a)?(c=a,this):c},this.$get=["$rootScope","$browser","$sniffer","$rootElement",function(d,e,f,g){function h(a){d.$broadcast("$locationChangeSuccess",i.absUrl(),a)}var i,j,k,l=e.baseHref(),m=e.url();c?(k=cc(m)+(l||"/"),j=f.history?dc:fc):(k=ac(m),j=ec),i=new j(k,"#"+b),i.$$parse(i.$$rewrite(m)),g.on("click",function(b){if(!b.ctrlKey&&!b.metaKey&&2!=b.which){for(var c=ed(b.target);"a"!==_c(c[0].nodeName);)if(c[0]===g[0]||!(c=c.parent())[0])return;var f=c.prop("href"),h=i.$$rewrite(f);f&&!c.attr("target")&&h&&!b.isDefaultPrevented()&&(b.preventDefault(),h!=e.url()&&(i.$$parse(h),d.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}),i.absUrl()!=m&&e.url(i.absUrl(),!0),e.onUrlChange(function(a){if(i.absUrl()!=a){if(d.$broadcast("$locationChangeStart",a,i.absUrl()).defaultPrevented)return e.url(i.absUrl()),void 0;d.$evalAsync(function(){var b=i.absUrl();i.$$parse(a),h(b)}),d.$$phase||d.$digest()}});var n=0;return d.$watch(function(){var a=e.url(),b=i.$$replace;
return n&&a==i.absUrl()||(n++,d.$evalAsync(function(){d.$broadcast("$locationChangeStart",i.absUrl(),a).defaultPrevented?i.$$parse(a):(e.url(i.absUrl(),b),h(a))})),i.$$replace=!1,n}),i}]}function jc(){var a=!0,b=this;this.debugEnabled=function(b){return s(b)?(a=b,this):a},this.$get=["$window",function(c){function d(a){return a instanceof Error&&(a.stack?a=a.message&&-1===a.stack.indexOf(a.message)?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line)),a}function e(a){var b=c.console||{},e=b[a]||b.log||o;return e.apply?function(){var a=[];return f(arguments,function(b){a.push(d(b))}),e.apply(b,a)}:function(a,b){e(a,null==b?"":b)}}return{log:e("log"),info:e("info"),warn:e("warn"),error:e("error"),debug:function(){var c=e("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function kc(a,b){if("constructor"===a)throw Rd("isecfld",'Referencing "constructor" field in Angular expressions is disallowed! Expression: {0}',b);return a}function lc(a,b){if(a&&a.constructor===a)throw Rd("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a&&a.document&&a.location&&a.alert&&a.setInterval)throw Rd("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",b);if(a&&(a.nodeName||a.on&&a.find))throw Rd("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",b);return a}function mc(a,b,d,e,f){f=f||{};for(var g,h=b.split("."),i=0;h.length>1;i++){g=kc(h.shift(),e);var j=a[g];j||(j={},a[g]=j),a=j,a.then&&f.unwrapPromises&&(Qd(e),"$$v"in a||!function(a){a.then(function(b){a.$$v=b})}(a),a.$$v===c&&(a.$$v={}),a=a.$$v)}return g=kc(h.shift(),e),a[g]=d,d}function nc(a,b,d,e,f,g,h){return kc(a,g),kc(b,g),kc(d,g),kc(e,g),kc(f,g),h.unwrapPromises?function(h,i){var j,k=i&&i.hasOwnProperty(a)?i:h;return null===k||k===c?k:(k=k[a],k&&k.then&&(Qd(g),"$$v"in k||(j=k,j.$$v=c,j.then(function(a){j.$$v=a})),k=k.$$v),b&&null!==k&&k!==c?(k=k[b],k&&k.then&&(Qd(g),"$$v"in k||(j=k,j.$$v=c,j.then(function(a){j.$$v=a})),k=k.$$v),d&&null!==k&&k!==c?(k=k[d],k&&k.then&&(Qd(g),"$$v"in k||(j=k,j.$$v=c,j.then(function(a){j.$$v=a})),k=k.$$v),e&&null!==k&&k!==c?(k=k[e],k&&k.then&&(Qd(g),"$$v"in k||(j=k,j.$$v=c,j.then(function(a){j.$$v=a})),k=k.$$v),f&&null!==k&&k!==c?(k=k[f],k&&k.then&&(Qd(g),"$$v"in k||(j=k,j.$$v=c,j.then(function(a){j.$$v=a})),k=k.$$v),k):k):k):k):k)}:function(g,h){var i=h&&h.hasOwnProperty(a)?h:g;return null===i||i===c?i:(i=i[a],b&&null!==i&&i!==c?(i=i[b],d&&null!==i&&i!==c?(i=i[d],e&&null!==i&&i!==c?(i=i[e],f&&null!==i&&i!==c?i=i[f]:i):i):i):i)}}function oc(a,b,d){if(Xd.hasOwnProperty(a))return Xd[a];var e,g=a.split("."),h=g.length;if(b.csp)e=6>h?nc(g[0],g[1],g[2],g[3],g[4],d,b):function(a,e){var f,i=0;do f=nc(g[i++],g[i++],g[i++],g[i++],g[i++],d,b)(a,e),e=c,a=f;while(h>i);return f};else{var i="var l, fn, p;\n";f(g,function(a,c){kc(a,d),i+="if(s === null || s === undefined) return s;\nl=s;\ns="+(c?"s":'((k&&k.hasOwnProperty("'+a+'"))?k:s)')+'["'+a+'"]'+";\n"+(b.unwrapPromises?'if (s && s.then) {\n pw("'+d.replace(/\"/g,'\\"')+'");\n'+' if (!("$$v" in s)) {\n'+" p=s;\n"+" p.$$v = undefined;\n"+" p.then(function(v) {p.$$v=v;});\n"+"}\n"+" s=s.$$v\n"+"}\n":"")}),i+="return s;";var j=new Function("s","k","pw",i);j.toString=function(){return i},e=function(a,b){return j(a,b,Qd)}}return"hasOwnProperty"!==a&&(Xd[a]=e),e}function pc(){var a={},b={csp:!1,unwrapPromises:!1,logPromiseWarnings:!0};this.unwrapPromises=function(a){return s(a)?(b.unwrapPromises=!!a,this):b.unwrapPromises},this.logPromiseWarnings=function(a){return s(a)?(b.logPromiseWarnings=a,this):b.logPromiseWarnings},this.$get=["$filter","$sniffer","$log",function(c,d,e){return b.csp=d.csp,Qd=function(a){b.logPromiseWarnings&&!Sd.hasOwnProperty(a)&&(Sd[a]=!0,e.warn("[$parse] Promise found in the expression `"+a+"`. "+"Automatic unwrapping of promises in Angular expressions is deprecated."))},function(d){var e;switch(typeof d){case"string":if(a.hasOwnProperty(d))return a[d];var f=new Vd(b),g=new Wd(f,c,b);return e=g.parse(d,!1),"hasOwnProperty"!==d&&(a[d]=e),e;case"function":return d;default:return o}}}]}function qc(){this.$get=["$rootScope","$exceptionHandler",function(a,b){return rc(function(b){a.$evalAsync(b)},b)}]}function rc(a,b){function d(a){return a}function e(a){return j(a)}function g(a){var b=h(),c=0,d=x(a)?[]:{};return f(a,function(a,e){c++,i(a).then(function(a){d.hasOwnProperty(e)||(d[e]=a,--c||b.resolve(d))},function(a){d.hasOwnProperty(e)||b.reject(a)})}),0===c&&b.resolve(d),b.promise}var h=function(){var f,g,k=[];return g={resolve:function(b){if(k){var d=k;k=c,f=i(b),d.length&&a(function(){for(var a,b=0,c=d.length;c>b;b++)a=d[b],f.then(a[0],a[1],a[2])})}},reject:function(a){g.resolve(j(a))},notify:function(b){if(k){var c=k;k.length&&a(function(){for(var a,d=0,e=c.length;e>d;d++)a=c[d],a[2](b)})}},promise:{then:function(a,c,g){var i=h(),j=function(c){try{i.resolve((y(a)?a:d)(c))}catch(e){i.reject(e),b(e)}},l=function(a){try{i.resolve((y(c)?c:e)(a))}catch(d){i.reject(d),b(d)}},m=function(a){try{i.notify((y(g)?g:d)(a))}catch(c){b(c)}};return k?k.push([j,l,m]):f.then(j,l,m),i.promise},"catch":function(a){return this.then(null,a)},"finally":function(a){function b(a,b){var c=h();return b?c.resolve(a):c.reject(a),c.promise}function c(c,e){var f=null;try{f=(a||d)()}catch(g){return b(g,!1)}return f&&y(f.then)?f.then(function(){return b(c,e)},function(a){return b(a,!1)}):b(c,e)}return this.then(function(a){return c(a,!0)},function(a){return c(a,!1)})}}}},i=function(b){return b&&y(b.then)?b:{then:function(c){var d=h();return a(function(){d.resolve(c(b))}),d.promise}}},j=function(c){return{then:function(d,f){var g=h();return a(function(){try{g.resolve((y(f)?f:e)(c))}catch(a){g.reject(a),b(a)}}),g.promise}}},k=function(c,f,g,k){var l,m=h(),n=function(a){try{return(y(f)?f:d)(a)}catch(c){return b(c),j(c)}},o=function(a){try{return(y(g)?g:e)(a)}catch(c){return b(c),j(c)}},p=function(a){try{return(y(k)?k:d)(a)}catch(c){b(c)}};return a(function(){i(c).then(function(a){l||(l=!0,m.resolve(i(a).then(n,o,p)))},function(a){l||(l=!0,m.resolve(o(a)))},function(a){l||m.notify(p(a))})}),m.promise};return{defer:h,reject:j,when:k,all:g}}function sc(){var a=10,b=d("$rootScope");this.digestTtl=function(b){return arguments.length&&(a=b),a},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(c,d,f,g){function h(){this.$id=j(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this["this"]=this.$root=this,this.$$destroyed=!1,this.$$asyncQueue=[],this.$$postDigestQueue=[],this.$$listeners={},this.$$isolateBindings={}}function i(a){if(n.$$phase)throw b("inprog","{0} already in progress",n.$$phase);n.$$phase=a}function k(){n.$$phase=null}function l(a,b){var c=f(a);return cb(c,b),c}function m(){}h.prototype={constructor:h,$new:function(a){var b,c;return a?(c=new h,c.$root=this.$root,c.$$asyncQueue=this.$$asyncQueue,c.$$postDigestQueue=this.$$postDigestQueue):(b=function(){},b.prototype=this,c=new b,c.$id=j()),c["this"]=c,c.$$listeners={},c.$parent=this,c.$$watchers=c.$$nextSibling=c.$$childHead=c.$$childTail=null,c.$$prevSibling=this.$$childTail,this.$$childHead?(this.$$childTail.$$nextSibling=c,this.$$childTail=c):this.$$childHead=this.$$childTail=c,c},$watch:function(a,b,c){var d=this,e=l(a,"watch"),f=d.$$watchers,g={fn:b,last:m,get:e,exp:a,eq:!!c};if(!y(b)){var h=l(b||o,"listener");g.fn=function(a,b,c){h(c)}}if("string"==typeof a&&e.constant){var i=g.fn;g.fn=function(a,b,c){i.call(this,a,b,c),H(f,g)}}return f||(f=d.$$watchers=[]),f.unshift(g),function(){H(f,g)}},$watchCollection:function(a,b){function c(){h=k(i);var a,b;if(t(h))if(e(h)){g!==l&&(g=l,n=g.length=0,j++),a=h.length,n!==a&&(j++,g.length=n=a);for(var c=0;a>c;c++)g[c]!==h[c]&&(j++,g[c]=h[c])}else{g!==m&&(g=m={},n=0,j++),a=0;for(b in h)h.hasOwnProperty(b)&&(a++,g.hasOwnProperty(b)?g[b]!==h[b]&&(j++,g[b]=h[b]):(n++,g[b]=h[b],j++));if(n>a){j++;for(b in g)g.hasOwnProperty(b)&&!h.hasOwnProperty(b)&&(n--,delete g[b])}}else g!==h&&(g=h,j++);return j}function d(){b(h,g,i)}var g,h,i=this,j=0,k=f(a),l=[],m={},n=0;return this.$watch(c,d)},$digest:function(){var c,e,f,g,h,j,l,n,o,p,q,r=this.$$asyncQueue,s=this.$$postDigestQueue,t=a,u=this,v=[];i("$digest");do{for(j=!1,n=u;r.length;)try{q=r.shift(),q.scope.$eval(q.expression)}catch(w){d(w)}do{if(g=n.$$watchers)for(h=g.length;h--;)try{c=g[h],c&&(e=c.get(n))!==(f=c.last)&&!(c.eq?K(e,f):"number"==typeof e&&"number"==typeof f&&isNaN(e)&&isNaN(f))&&(j=!0,c.last=c.eq?I(e):e,c.fn(e,f===m?e:f,n),5>t&&(o=4-t,v[o]||(v[o]=[]),p=y(c.exp)?"fn: "+(c.exp.name||c.exp.toString()):c.exp,p+="; newVal: "+Q(e)+"; oldVal: "+Q(f),v[o].push(p)))}catch(w){d(w)}if(!(l=n.$$childHead||n!==u&&n.$$nextSibling))for(;n!==u&&!(l=n.$$nextSibling);)n=n.$parent}while(n=l);if(j&&!t--)throw k(),b("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",a,Q(v))}while(j||r.length);for(k();s.length;)try{s.shift()()}catch(w){d(w)}},$destroy:function(){if(n!=this&&!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null}},$eval:function(a,b){return f(a)(this,b)},$evalAsync:function(a){n.$$phase||n.$$asyncQueue.length||g.defer(function(){n.$$asyncQueue.length&&n.$digest()}),this.$$asyncQueue.push({scope:this,expression:a})},$$postDigest:function(a){this.$$postDigestQueue.push(a)},$apply:function(a){try{return i("$apply"),this.$eval(a)}catch(b){d(b)}finally{k();try{n.$digest()}catch(b){throw d(b),b}}},$on:function(a,b){var c=this.$$listeners[a];return c||(this.$$listeners[a]=c=[]),c.push(b),function(){c[G(c,b)]=null}},$emit:function(a){var b,c,e,f=[],g=this,h=!1,i={name:a,targetScope:g,stopPropagation:function(){h=!0},preventDefault:function(){i.defaultPrevented=!0},defaultPrevented:!1},j=M([i],arguments,1);do{for(b=g.$$listeners[a]||f,i.currentScope=g,c=0,e=b.length;e>c;c++)if(b[c])try{b[c].apply(null,j)}catch(k){d(k)}else b.splice(c,1),c--,e--;if(h)return i;g=g.$parent}while(g);return i},$broadcast:function(a){var b,c,e,f=this,g=f,h=f,i={name:a,targetScope:f,preventDefault:function(){i.defaultPrevented=!0},defaultPrevented:!1},j=M([i],arguments,1);do{for(g=h,i.currentScope=g,b=g.$$listeners[a]||[],c=0,e=b.length;e>c;c++)if(b[c])try{b[c].apply(null,j)}catch(k){d(k)}else b.splice(c,1),c--,e--;if(!(h=g.$$childHead||g!==f&&g.$$nextSibling))for(;g!==f&&!(h=g.$$nextSibling);)g=g.$parent}while(g=h);return i}};var n=new h;return n}]}function tc(a){return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}function uc(a){if("self"===a)return a;if(u(a)){if(a.indexOf("***")>-1)throw Yd("iwcard","Illegal sequence *** in string matcher.  String: {0}",a);return a=tc(a).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+a+"$")}if(z(a))return new RegExp("^"+a.source+"$");throw Yd("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function vc(a){var b=[];return s(a)&&f(a,function(a){b.push(uc(a))}),b}function wc(){this.SCE_CONTEXTS=Zd;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){return arguments.length&&(a=vc(b)),a},this.resourceUrlBlacklist=function(a){return arguments.length&&(b=vc(a)),b},this.$get=["$log","$document","$injector",function(d,e,f){function g(a,b){return"self"===a?Bc(b):!!a.exec(b.href)}function h(c){var d,e,f=Ac(c.toString()),h=!1;for(d=0,e=a.length;e>d;d++)if(g(a[d],f)){h=!0;break}if(h)for(d=0,e=b.length;e>d;d++)if(g(b[d],f)){h=!1;break}return h}function i(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};return a&&(b.prototype=new a),b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},b}function j(a,b){var d=o.hasOwnProperty(a)?o[a]:null;if(!d)throw Yd("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",a,b);if(null===b||b===c||""===b)return b;if("string"!=typeof b)throw Yd("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",a);return new d(b)}function k(a){return a instanceof n?a.$$unwrapTrustedValue():a}function l(a,b){if(null===b||b===c||""===b)return b;var d=o.hasOwnProperty(a)?o[a]:null;if(d&&b instanceof d)return b.$$unwrapTrustedValue();if(a===Zd.RESOURCE_URL){if(h(b))return b;throw Yd("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",b.toString())}if(a===Zd.HTML)return m(b);throw Yd("unsafe","Attempting to use an unsafe value in a safe context.")}var m=function(){throw Yd("unsafe","Attempting to use an unsafe value in a safe context.")};f.has("$sanitize")&&(m=f.get("$sanitize"));var n=i(),o={};return o[Zd.HTML]=i(n),o[Zd.CSS]=i(n),o[Zd.URL]=i(n),o[Zd.JS]=i(n),o[Zd.RESOURCE_URL]=i(o[Zd.URL]),{trustAs:j,getTrusted:l,valueOf:k}}]}function xc(){var a=!0;this.enabled=function(b){return arguments.length&&(a=!!b),a},this.$get=["$parse","$document","$sceDelegate",function(b,d,e){if(a&&dd){var g=d[0].documentMode;if(g!==c&&8>g)throw Yd("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 9 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.")}var h=I(Zd);h.isEnabled=function(){return a},h.trustAs=e.trustAs,h.getTrusted=e.getTrusted,h.valueOf=e.valueOf,a||(h.trustAs=h.getTrusted=function(a,b){return b},h.valueOf=p),h.parseAs=function(a,c){var d=b(c);return d.literal&&d.constant?d:function(b,c){return h.getTrusted(a,d(b,c))}};var i=h.parseAs,j=h.getTrusted,k=h.trustAs;return f(Zd,function(a,b){var c=_c(b);h[jb("parse_as_"+c)]=function(b){return i(a,b)},h[jb("get_trusted_"+c)]=function(b){return j(a,b)},h[jb("trust_as_"+c)]=function(b){return k(a,b)}}),h}]}function yc(){this.$get=["$window","$document",function(a,b){var c,d,e={},f=m((/android (\d+)/.exec(_c((a.navigator||{}).userAgent))||[])[1]),g=/Boxee/i.test((a.navigator||{}).userAgent),h=b[0]||{},i=/^(Moz|webkit|O|ms)(?=[A-Z])/,j=h.body&&h.body.style,k=!1,l=!1;if(j){for(var n in j)if(d=i.exec(n)){c=d[0],c=c.substr(0,1).toUpperCase()+c.substr(1);break}c||(c="WebkitOpacity"in j&&"webkit"),k=!!("transition"in j||c+"Transition"in j),l=!!("animation"in j||c+"Animation"in j),!f||k&&l||(k=u(h.body.style.webkitTransition),l=u(h.body.style.webkitAnimation))}return{history:!(!a.history||!a.history.pushState||4>f||g),hashchange:"onhashchange"in a&&(!h.documentMode||h.documentMode>7),hasEvent:function(a){if("input"==a&&9==dd)return!1;if(r(e[a])){var b=h.createElement("div");e[a]="on"+a in b}return e[a]},csp:L(),vendorPrefix:c,transitions:k,animations:l,msie:dd}}]}function zc(){this.$get=["$rootScope","$browser","$q","$exceptionHandler",function(a,b,c,d){function e(e,g,h){var i,j=c.defer(),k=j.promise,l=s(h)&&!h;return i=b.defer(function(){try{j.resolve(e())}catch(b){j.reject(b),d(b)}finally{delete f[k.$$timeoutId]}l||a.$apply()},g),k.$$timeoutId=i,f[i]=j,k}var f={};return e.cancel=function(a){return a&&a.$$timeoutId in f?(f[a.$$timeoutId].reject("canceled"),delete f[a.$$timeoutId],b.defer.cancel(a.$$timeoutId)):!1},e}]}function Ac(a,b){var c,d=a;return dd&&($d.setAttribute("href",d),d=$d.href),$d.setAttribute("href",d),c=Cc($d.pathname,a,b),c="/"===c.charAt(0)?c:"/"+c,{href:$d.href,protocol:$d.protocol?$d.protocol.replace(/:$/,""):"",host:$d.host,search:$d.search?$d.search.replace(/^\?/,""):"",hash:$d.hash?$d.hash.replace(/^#/,""):"",hostname:$d.hostname,port:$d.port,pathname:c}}function Bc(a){var b=u(a)?Ac(a):a;return b.protocol===ae.protocol&&b.host===ae.host}function Cc(a,b,c){var d;return 0===b.indexOf(c)&&(b=b.replace(c,"")),_d.exec(b)?a:(d=_d.exec(a),d?d[1]:a)}function Dc(){this.$get=q(a)}function Ec(a){function b(d,e){if(t(d)){var g={};return f(d,function(a,c){g[c]=b(c,a)}),g}return a.factory(d+c,e)}var c="Filter";this.register=b,this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}],b("currency",Gc),b("date",Oc),b("filter",Fc),b("json",Pc),b("limitTo",Qc),b("lowercase",fe),b("number",Hc),b("orderBy",Rc),b("uppercase",ge)}function Fc(){return function(a,b,c){if(!x(a))return a;var d=typeof c,e=[];e.check=function(a){for(var b=0;b<e.length;b++)if(!e[b](a))return!1;return!0},"function"!==d&&(c="boolean"===d&&c?function(a,b){return md.equals(a,b)}:function(a,b){return b=(""+b).toLowerCase(),(""+a).toLowerCase().indexOf(b)>-1});var f=function(a,b){if("string"==typeof b&&"!"===b.charAt(0))return!f(a,b.substr(1));switch(typeof a){case"boolean":case"number":case"string":return c(a,b);case"object":switch(typeof b){case"object":return c(a,b);default:for(var d in a)if("$"!==d.charAt(0)&&f(a[d],b))return!0}return!1;case"array":for(var e=0;e<a.length;e++)if(f(a[e],b))return!0;return!1;default:return!1}};switch(typeof b){case"boolean":case"number":case"string":b={$:b};case"object":for(var g in b)"$"==g?!function(){if(b[g]){var a=g;e.push(function(c){return f(c,b[a])})}}():!function(){if("undefined"!=typeof b[g]){var a=g;e.push(function(c){return f(eb(c,a),b[a])})}}();break;case"function":e.push(b);break;default:return a}for(var h=[],i=0;i<a.length;i++){var j=a[i];e.check(j)&&h.push(j)}return h}}function Gc(a){var b=a.NUMBER_FORMATS;return function(a,c){return r(c)&&(c=b.CURRENCY_SYM),Ic(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,2).replace(/\u00A4/g,c)}}function Hc(a){var b=a.NUMBER_FORMATS;return function(a,c){return Ic(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function Ic(a,b,c,d,e){if(isNaN(a)||!isFinite(a))return"";var f=0>a;a=Math.abs(a);var g=a+"",h="",i=[],j=!1;if(-1!==g.indexOf("e")){var k=g.match(/([\d\.]+)e(-?)(\d+)/);k&&"-"==k[2]&&k[3]>e+1?g="0":(h=g,j=!0)}if(j)e>0&&a>-1&&1>a&&(h=a.toFixed(e));else{var l=(g.split(be)[1]||"").length;r(e)&&(e=Math.min(Math.max(b.minFrac,l),b.maxFrac));var m=Math.pow(10,e);a=Math.round(a*m)/m;var n=(""+a).split(be),o=n[0];n=n[1]||"";var p,q=0,s=b.lgSize,t=b.gSize;if(o.length>=s+t)for(q=o.length-s,p=0;q>p;p++)0===(q-p)%t&&0!==p&&(h+=c),h+=o.charAt(p);for(p=q;p<o.length;p++)0===(o.length-p)%s&&0!==p&&(h+=c),h+=o.charAt(p);for(;n.length<e;)n+="0";e&&"0"!==e&&(h+=d+n.substr(0,e))}return i.push(f?b.negPre:b.posPre),i.push(h),i.push(f?b.negSuf:b.posSuf),i.join("")}function Jc(a,b,c){var d="";for(0>a&&(d="-",a=-a),a=""+a;a.length<b;)a="0"+a;return c&&(a=a.substr(a.length-b)),d+a}function Kc(a,b,c,d){return c=c||0,function(e){var f=e["get"+a]();return(c>0||f>-c)&&(f+=c),0===f&&-12==c&&(f=12),Jc(f,b,d)}}function Lc(a,b){return function(c,d){var e=c["get"+a](),f=ad(b?"SHORT"+a:a);return d[f][e]}}function Mc(a){var b=-1*a.getTimezoneOffset(),c=b>=0?"+":"";return c+=Jc(Math[b>0?"floor":"ceil"](b/60),2)+Jc(Math.abs(b%60),2)}function Nc(a,b){return a.getHours()<12?b.AMPMS[0]:b.AMPMS[1]}function Oc(a){function b(a){var b;if(b=a.match(c)){var d=new Date(0),e=0,f=0,g=b[8]?d.setUTCFullYear:d.setFullYear,h=b[8]?d.setUTCHours:d.setHours;b[9]&&(e=m(b[9]+b[10]),f=m(b[9]+b[11])),g.call(d,m(b[1]),m(b[2])-1,m(b[3]));var i=m(b[4]||0)-e,j=m(b[5]||0)-f,k=m(b[6]||0),l=Math.round(1e3*parseFloat("0."+(b[7]||0)));return h.call(d,i,j,k,l),d}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,d){var e,g,h="",i=[];if(d=d||"mediumDate",d=a.DATETIME_FORMATS[d]||d,u(c)&&(c=ee.test(c)?m(c):b(c)),v(c)&&(c=new Date(c)),!w(c))return c;for(;d;)g=de.exec(d),g?(i=M(i,g,1),d=i.pop()):(i.push(d),d=null);return f(i,function(b){e=ce[b],h+=e?e(c,a.DATETIME_FORMATS):b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),h}}function Pc(){return function(a){return Q(a,!0)}}function Qc(){return function(a,b){if(!x(a)&&!u(a))return a;if(b=m(b),u(a))return b?b>=0?a.slice(0,b):a.slice(b,a.length):"";var c,d,e=[];for(b>a.length?b=a.length:b<-a.length&&(b=-a.length),b>0?(c=0,d=b):(c=a.length+b,d=a.length);d>c;c++)e.push(a[c]);return e}}function Rc(a){return function(b,c,d){function e(a,b){for(var d=0;d<c.length;d++){var e=c[d](a,b);if(0!==e)return e}return 0}function f(a,b){return S(b)?function(b,c){return a(c,b)}:a}function g(a,b){var c=typeof a,d=typeof b;return c==d?("string"==c&&(a=a.toLowerCase(),b=b.toLowerCase()),a===b?0:b>a?-1:1):d>c?-1:1}if(!x(b))return b;if(!c)return b;c=x(c)?c:[c],c=E(c,function(b){var c=!1,d=b||p;return u(b)&&(("+"==b.charAt(0)||"-"==b.charAt(0))&&(c="-"==b.charAt(0),b=b.substring(1)),d=a(b)),f(function(a,b){return g(d(a),d(b))},c)});for(var h=[],i=0;i<b.length;i++)h.push(b[i]);return h.sort(f(e,d))}}function Sc(a){return y(a)&&(a={link:a}),a.restrict=a.restrict||"AC",q(a)}function Tc(a,b){function c(b,c){c=c?"-"+_(c,"-"):"",a.removeClass((b?te:se)+c).addClass((b?se:te)+c)}var d=this,e=a.parent().controller("form")||je,g=0,h=d.$error={},i=[];d.$name=b.name||b.ngForm,d.$dirty=!1,d.$pristine=!0,d.$valid=!0,d.$invalid=!1,e.$addControl(d),a.addClass(ue),c(!0),d.$addControl=function(a){db(a.$name,"input"),i.push(a),a.$name&&(d[a.$name]=a)},d.$removeControl=function(a){a.$name&&d[a.$name]===a&&delete d[a.$name],f(h,function(b,c){d.$setValidity(c,!0,a)}),H(i,a)},d.$setValidity=function(a,b,f){var i=h[a];if(b)i&&(H(i,f),i.length||(g--,g||(c(b),d.$valid=!0,d.$invalid=!1),h[a]=!1,c(!0,a),e.$setValidity(a,!0,d)));else{if(g||c(b),i){if(F(i,f))return}else h[a]=i=[],g++,c(!1,a),e.$setValidity(a,!1,d);i.push(f),d.$valid=!1,d.$invalid=!0}},d.$setDirty=function(){a.removeClass(ue).addClass(ve),d.$dirty=!0,d.$pristine=!1,e.$setDirty()},d.$setPristine=function(){a.removeClass(ve).addClass(ue),d.$dirty=!1,d.$pristine=!0,f(i,function(a){a.$setPristine()})}}function Uc(a,b,e,f,g,h){var i=function(){var c=b.val();S(e.ngTrim||"T")&&(c=od(c)),f.$viewValue!==c&&a.$apply(function(){f.$setViewValue(c)})};if(g.hasEvent("input"))b.on("input",i);else{var j,k=function(){j||(j=h.defer(function(){i(),j=null}))};b.on("keydown",function(a){var b=a.keyCode;91===b||b>15&&19>b||b>=37&&40>=b||k()}),b.on("change",i),g.hasEvent("paste")&&b.on("paste cut",k)}f.$render=function(){b.val(f.$isEmpty(f.$viewValue)?"":f.$viewValue)};var l,n,o=e.ngPattern,p=function(a,b){return f.$isEmpty(b)||a.test(b)?(f.$setValidity("pattern",!0),b):(f.$setValidity("pattern",!1),c)};if(o&&(n=o.match(/^\/(.*)\/([gim]*)$/),n?(o=new RegExp(n[1],n[2]),l=function(a){return p(o,a)}):l=function(c){var e=a.$eval(o);if(!e||!e.test)throw d("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",o,e,T(b));return p(e,c)},f.$formatters.push(l),f.$parsers.push(l)),e.ngMinlength){var q=m(e.ngMinlength),r=function(a){return!f.$isEmpty(a)&&a.length<q?(f.$setValidity("minlength",!1),c):(f.$setValidity("minlength",!0),a)};f.$parsers.push(r),f.$formatters.push(r)}if(e.ngMaxlength){var s=m(e.ngMaxlength),t=function(a){return!f.$isEmpty(a)&&a.length>s?(f.$setValidity("maxlength",!1),c):(f.$setValidity("maxlength",!0),a)};f.$parsers.push(t),f.$formatters.push(t)}}function Vc(a,b,d,e,f,g){if(Uc(a,b,d,e,f,g),e.$parsers.push(function(a){var b=e.$isEmpty(a);return b||pe.test(a)?(e.$setValidity("number",!0),""===a?null:b?a:parseFloat(a)):(e.$setValidity("number",!1),c)}),e.$formatters.push(function(a){return e.$isEmpty(a)?"":""+a}),d.min){var h=function(a){var b=parseFloat(d.min);return!e.$isEmpty(a)&&b>a?(e.$setValidity("min",!1),c):(e.$setValidity("min",!0),a)};e.$parsers.push(h),e.$formatters.push(h)}if(d.max){var i=function(a){var b=parseFloat(d.max);return!e.$isEmpty(a)&&a>b?(e.$setValidity("max",!1),c):(e.$setValidity("max",!0),a)};e.$parsers.push(i),e.$formatters.push(i)}e.$formatters.push(function(a){return e.$isEmpty(a)||v(a)?(e.$setValidity("number",!0),a):(e.$setValidity("number",!1),c)})}function Wc(a,b,d,e,f,g){Uc(a,b,d,e,f,g);var h=function(a){return e.$isEmpty(a)||ne.test(a)?(e.$setValidity("url",!0),a):(e.$setValidity("url",!1),c)};e.$formatters.push(h),e.$parsers.push(h)}function Xc(a,b,d,e,f,g){Uc(a,b,d,e,f,g);var h=function(a){return e.$isEmpty(a)||oe.test(a)?(e.$setValidity("email",!0),a):(e.$setValidity("email",!1),c)};e.$formatters.push(h),e.$parsers.push(h)}function Yc(a,b,c,d){r(c.name)&&b.attr("name",j()),b.on("click",function(){b[0].checked&&a.$apply(function(){d.$setViewValue(c.value)})}),d.$render=function(){var a=c.value;b[0].checked=a==d.$viewValue},c.$observe("value",d.$render)}function Zc(a,b,c,d){var e=c.ngTrueValue,f=c.ngFalseValue;u(e)||(e=!0),u(f)||(f=!1),b.on("click",function(){a.$apply(function(){d.$setViewValue(b[0].checked)})}),d.$render=function(){b[0].checked=d.$viewValue},d.$isEmpty=function(a){return a!==e},d.$formatters.push(function(a){return a===e}),d.$parsers.push(function(a){return a?e:f})}function $c(a,b){return a="ngClass"+a,function(){return{restrict:"AC",link:function(c,d,e){function g(a){(b===!0||c.$index%2===b)&&(k&&!K(a,k)&&h(k),i(a)),k=I(a)}function h(a){e.$removeClass(j(a))}function i(a){e.$addClass(j(a))}function j(a){if(x(a))return a.join(" ");if(t(a)){var b=[];return f(a,function(a,c){a&&b.push(c)}),b.join(" ")}return a}var k;c.$watch(e[a],g,!0),e.$observe("class",function(){g(c.$eval(e[a]))}),"ngClass"!==a&&c.$watch("$index",function(d,f){var g=1&d;1&g!==f&&(g===b?i(c.$eval(e[a])):h(c.$eval(e[a])))})}}}}var _c=function(a){return u(a)?a.toLowerCase():a},ad=function(a){return u(a)?a.toUpperCase():a},bd=function(a){return u(a)?a.replace(/[A-Z]/g,function(a){return String.fromCharCode(32|a.charCodeAt(0))}):a},cd=function(a){return u(a)?a.replace(/[a-z]/g,function(a){return String.fromCharCode(-33&a.charCodeAt(0))}):a};"i"!=="I".toLowerCase()&&(_c=bd,ad=cd);var dd,ed,fd,gd,hd,id=[].slice,jd=[].push,kd=Object.prototype.toString,ld=d("ng"),md=(a.angular,a.angular||(a.angular={})),nd=["0","0","0"];dd=m((/msie (\d+)/.exec(_c(navigator.userAgent))||[])[1]),isNaN(dd)&&(dd=m((/trident\/.*; rv:(\d+)/.exec(_c(navigator.userAgent))||[])[1])),o.$inject=[],p.$inject=[];var od=function(){return String.prototype.trim?function(a){return u(a)?a.trim():a}:function(a){return u(a)?a.replace(/^\s*/,"").replace(/\s*$/,""):a}}();hd=9>dd?function(a){return a=a.nodeName?a:a[0],a.scopeName&&"HTML"!=a.scopeName?ad(a.scopeName+":"+a.nodeName):a.nodeName}:function(a){return a.nodeName?a.nodeName:a[0].nodeName};var pd=/[A-Z]/g,qd={full:"1.2.1",major:1,minor:2,dot:1,codeName:"underscore-empathy"},rd=lb.cache={},sd=lb.expando="ng-"+(new Date).getTime(),td=1,ud=a.document.addEventListener?function(a,b,c){a.addEventListener(b,c,!1)}:function(a,b,c){a.attachEvent("on"+b,c)},vd=a.document.removeEventListener?function(a,b,c){a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent("on"+b,c)},wd=/([\:\-\_]+(.))/g,xd=/^moz([A-Z])/,yd=d("jqLite"),zd=lb.prototype={ready:function(c){function d(){e||(e=!0,c())}var e=!1;"complete"===b.readyState?setTimeout(d):(this.on("DOMContentLoaded",d),lb(a).on("load",d))},toString:function(){var a=[];return f(this,function(b){a.push(""+b)}),"["+a.join(", ")+"]"},eq:function(a){return a>=0?ed(this[a]):ed(this[this.length+a])},length:0,push:jd,sort:[].sort,splice:[].splice},Ad={};f("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(a){Ad[_c(a)]=a});var Bd={};f("input,select,option,textarea,button,form,details".split(","),function(a){Bd[ad(a)]=!0}),f({data:rb,inheritedData:xb,scope:function(a){return ed(a).data("$scope")||xb(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return ed(a).data("$isolateScope")||ed(a).data("$isolateScopeNoTemplate")},controller:wb,injector:function(a){return xb(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:sb,css:function(a,b,d){if(b=jb(b),!s(d)){var e;return 8>=dd&&(e=a.currentStyle&&a.currentStyle[b],""===e&&(e="auto")),e=e||a.style[b],8>=dd&&(e=""===e?c:e),e}a.style[b]=d},attr:function(a,b,d){var e=_c(b);if(Ad[e]){if(!s(d))return a[b]||(a.attributes.getNamedItem(b)||o).specified?e:c;d?(a[b]=!0,a.setAttribute(b,e)):(a[b]=!1,a.removeAttribute(e))}else if(s(d))a.setAttribute(b,d);else if(a.getAttribute){var f=a.getAttribute(b,2);return null===f?c:f}},prop:function(a,b,c){return s(c)?(a[b]=c,void 0):a[b]},text:function(){function a(a,c){var d=b[a.nodeType];return r(c)?d?a[d]:"":(a[d]=c,void 0)}var b=[];return 9>dd?(b[1]="innerText",b[3]="nodeValue"):b[1]=b[3]="textContent",a.$dv="",a}(),val:function(a,b){if(r(b)){if("SELECT"===hd(a)&&a.multiple){var c=[];return f(a.options,function(a){a.selected&&c.push(a.value||a.text)}),0===c.length?null:c}return a.value}a.value=b},html:function(a,b){if(r(b))return a.innerHTML;for(var c=0,d=a.childNodes;c<d.length;c++)nb(d[c]);a.innerHTML=b}},function(a,b){lb.prototype[b]=function(b,d){var e,f;if((2==a.length&&a!==sb&&a!==wb?b:d)===c){if(t(b)){for(e=0;e<this.length;e++)if(a===rb)a(this[e],b);else for(f in b)a(this[e],f,b[f]);return this}for(var g=a.$dv,h=g===c?Math.min(this.length,1):this.length,i=0;h>i;i++){var j=a(this[i],b,d);g=g?g+j:j}return g}for(e=0;e<this.length;e++)a(this[e],b,d);return this}}),f({removeData:pb,dealoc:nb,on:function df(a,c,d,e){if(s(e))throw yd("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");var g=qb(a,"events"),h=qb(a,"handle");g||qb(a,"events",g={}),h||qb(a,"handle",h=zb(a,g)),f(c.split(" "),function(c){var e=g[c];if(!e){if("mouseenter"==c||"mouseleave"==c){var f=b.body.contains||b.body.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1};g[c]=[];var i={mouseleave:"mouseout",mouseenter:"mouseover"};df(a,i[c],function(a){var b=this,d=a.relatedTarget;(!d||d!==b&&!f(b,d))&&h(a,c)})}else ud(a,c,h),g[c]=[];e=g[c]}e.push(d)})},off:ob,replaceWith:function(a,b){var c,d=a.parentNode;nb(a),f(new lb(b),function(b){c?d.insertBefore(b,c.nextSibling):d.replaceChild(b,a),c=b})},children:function(a){var b=[];return f(a.childNodes,function(a){1===a.nodeType&&b.push(a)}),b},contents:function(a){return a.childNodes||[]},append:function(a,b){f(new lb(b),function(b){(1===a.nodeType||11===a.nodeType)&&a.appendChild(b)})},prepend:function(a,b){if(1===a.nodeType){var c=a.firstChild;f(new lb(b),function(b){a.insertBefore(b,c)})}},wrap:function(a,b){b=ed(b)[0];var c=a.parentNode;c&&c.replaceChild(b,a),b.appendChild(a)},remove:function(a){nb(a);var b=a.parentNode;b&&b.removeChild(a)},after:function(a,b){var c=a,d=a.parentNode;f(new lb(b),function(a){d.insertBefore(a,c.nextSibling),c=a})},addClass:ub,removeClass:tb,toggleClass:function(a,b,c){r(c)&&(c=!sb(a,b)),(c?ub:tb)(a,b)},parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},next:function(a){if(a.nextElementSibling)return a.nextElementSibling;for(var b=a.nextSibling;null!=b&&1!==b.nodeType;)b=b.nextSibling;return b},find:function(a,b){return a.getElementsByTagName(b)},clone:mb,triggerHandler:function(a,b,c){var d=(qb(a,"events")||{})[b];c=c||[];var e=[{preventDefault:o,stopPropagation:o}];f(d,function(b){b.apply(a,e.concat(c))})}},function(a,b){lb.prototype[b]=function(b,c,d){for(var e,f=0;f<this.length;f++)r(e)?(e=a(this[f],b,c,d),s(e)&&(e=ed(e))):vb(e,a(this[f],b,c,d));return s(e)?e:this},lb.prototype.bind=lb.prototype.on,lb.prototype.unbind=lb.prototype.off}),Bb.prototype={put:function(a,b){this[Ab(a)]=b},get:function(a){return this[Ab(a)]},remove:function(a){var b=this[a=Ab(a)];return delete this[a],b}};var Cd=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,Dd=/,/,Ed=/^\s*(_?)(\S+?)\1\s*$/,Fd=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Gd=d("$injector"),Hd=d("$animate"),Id=["$provide",function(a){this.$$selectors={},this.register=function(b,c){var d=b+"-animation";if(b&&"."!=b.charAt(0))throw Hd("notcsel","Expecting class selector starting with '.' got '{0}'.",b);this.$$selectors[b.substr(1)]=d,a.factory(d,c)},this.$get=["$timeout",function(a){return{enter:function(b,c,d,e){var g=d&&d[d.length-1],h=c&&c[0]||g&&g.parentNode,i=g&&g.nextSibling||null;
f(b,function(a){h.insertBefore(a,i)}),e&&a(e,0,!1)},leave:function(b,c){b.remove(),c&&a(c,0,!1)},move:function(a,b,c,d){this.enter(a,b,c,d)},addClass:function(b,c,d){c=u(c)?c:x(c)?c.join(" "):"",f(b,function(a){ub(a,c)}),d&&a(d,0,!1)},removeClass:function(b,c,d){c=u(c)?c:x(c)?c.join(" "):"",f(b,function(a){tb(a,c)}),d&&a(d,0,!1)},enabled:o}}]}],Jd=d("$compile");Jb.$inject=["$provide"];var Kd=/^(x[\:\-_]|data[\:\-_])/i,Ld=a.XMLHttpRequest||function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(a){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(b){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(c){}throw d("$httpBackend")("noxhr","This browser does not support XMLHttpRequest.")},Md=d("$interpolate"),Nd=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,Od={http:80,https:443,ftp:21},Pd=d("$location");fc.prototype=ec.prototype=dc.prototype={$$html5:!1,$$replace:!1,absUrl:gc("$$absUrl"),url:function(a,b){if(r(a))return this.$$url;var c=Nd.exec(a);return c[1]&&this.path(decodeURIComponent(c[1])),(c[2]||c[1])&&this.search(c[3]||""),this.hash(c[5]||"",b),this},protocol:gc("$$protocol"),host:gc("$$host"),port:gc("$$port"),path:hc("$$path",function(a){return"/"==a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(u(a))this.$$search=V(a);else{if(!t(a))throw Pd("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");this.$$search=a}break;default:r(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}return this.$$compose(),this},hash:hc("$$hash",p),replace:function(){return this.$$replace=!0,this}};var Qd,Rd=d("$parse"),Sd={},Td={"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:o,"+":function(a,b,d,e){return d=d(a,b),e=e(a,b),s(d)?s(e)?d+e:d:s(e)?e:c},"-":function(a,b,c,d){return c=c(a,b),d=d(a,b),(s(c)?c:0)-(s(d)?d:0)},"*":function(a,b,c,d){return c(a,b)*d(a,b)},"/":function(a,b,c,d){return c(a,b)/d(a,b)},"%":function(a,b,c,d){return c(a,b)%d(a,b)},"^":function(a,b,c,d){return c(a,b)^d(a,b)},"=":o,"===":function(a,b,c,d){return c(a,b)===d(a,b)},"!==":function(a,b,c,d){return c(a,b)!==d(a,b)},"==":function(a,b,c,d){return c(a,b)==d(a,b)},"!=":function(a,b,c,d){return c(a,b)!=d(a,b)},"<":function(a,b,c,d){return c(a,b)<d(a,b)},">":function(a,b,c,d){return c(a,b)>d(a,b)},"<=":function(a,b,c,d){return c(a,b)<=d(a,b)},">=":function(a,b,c,d){return c(a,b)>=d(a,b)},"&&":function(a,b,c,d){return c(a,b)&&d(a,b)},"||":function(a,b,c,d){return c(a,b)||d(a,b)},"&":function(a,b,c,d){return c(a,b)&d(a,b)},"|":function(a,b,c,d){return d(a,b)(a,b,c(a,b))},"!":function(a,b,c){return!c(a,b)}},Ud={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},Vd=function(a){this.options=a};Vd.prototype={constructor:Vd,lex:function(a){this.text=a,this.index=0,this.ch=c,this.lastCh=":",this.tokens=[];for(var b,d=[];this.index<this.text.length;){if(this.ch=this.text.charAt(this.index),this.is("\"'"))this.readString(this.ch);else if(this.isNumber(this.ch)||this.is(".")&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(this.ch))this.readIdent(),this.was("{,")&&"{"===d[0]&&(b=this.tokens[this.tokens.length-1])&&(b.json=-1===b.text.indexOf("."));else if(this.is("(){}[].,;:?"))this.tokens.push({index:this.index,text:this.ch,json:this.was(":[,")&&this.is("{[")||this.is("}]:,")}),this.is("{[")&&d.unshift(this.ch),this.is("}]")&&d.shift(),this.index++;else{if(this.isWhitespace(this.ch)){this.index++;continue}var e=this.ch+this.peek(),f=e+this.peek(2),g=Td[this.ch],h=Td[e],i=Td[f];i?(this.tokens.push({index:this.index,text:f,fn:i}),this.index+=3):h?(this.tokens.push({index:this.index,text:e,fn:h}),this.index+=2):g?(this.tokens.push({index:this.index,text:this.ch,fn:g,json:this.was("[,:")&&this.is("+-")}),this.index+=1):this.throwError("Unexpected next character ",this.index,this.index+1)}this.lastCh=this.ch}return this.tokens},is:function(a){return-1!==a.indexOf(this.ch)},was:function(a){return-1!==a.indexOf(this.lastCh)},peek:function(a){var b=a||1;return this.index+b<this.text.length?this.text.charAt(this.index+b):!1},isNumber:function(a){return a>="0"&&"9">=a},isWhitespace:function(a){return" "===a||"\r"===a||"	"===a||"\n"===a||""===a||""===a},isIdent:function(a){return a>="a"&&"z">=a||a>="A"&&"Z">=a||"_"===a||"$"===a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,c){c=c||this.index;var d=s(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,c)+"]":" "+c;throw Rd("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",a,d,this.text)},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var c=_c(this.text.charAt(this.index));if("."==c||this.isNumber(c))a+=c;else{var d=this.peek();if("e"==c&&this.isExpOperator(d))a+=c;else if(this.isExpOperator(c)&&d&&this.isNumber(d)&&"e"==a.charAt(a.length-1))a+=c;else{if(!this.isExpOperator(c)||d&&this.isNumber(d)||"e"!=a.charAt(a.length-1))break;this.throwError("Invalid exponent")}}this.index++}a=1*a,this.tokens.push({index:b,text:a,json:!0,fn:function(){return a}})},readIdent:function(){for(var a,b,c,d,e=this,f="",g=this.index;this.index<this.text.length&&(d=this.text.charAt(this.index),"."===d||this.isIdent(d)||this.isNumber(d));)"."===d&&(a=this.index),f+=d,this.index++;if(a)for(b=this.index;b<this.text.length;){if(d=this.text.charAt(b),"("===d){c=f.substr(a-g+1),f=f.substr(0,a-g),this.index=b;break}if(!this.isWhitespace(d))break;b++}var h={index:g,text:f};if(Td.hasOwnProperty(f))h.fn=Td[f],h.json=Td[f];else{var i=oc(f,this.options,this.text);h.fn=l(function(a,b){return i(a,b)},{assign:function(a,b){return mc(a,f,b,e.text,e.options)}})}this.tokens.push(h),c&&(this.tokens.push({index:a,text:".",json:!1}),this.tokens.push({index:a+1,text:c,json:!1}))},readString:function(a){var b=this.index;this.index++;for(var c="",d=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index);if(d+=f,e){if("u"===f){var g=this.text.substring(this.index+1,this.index+5);g.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+g+"]"),this.index+=4,c+=String.fromCharCode(parseInt(g,16))}else{var h=Ud[f];c+=h?h:f}e=!1}else if("\\"===f)e=!0;else{if(f===a)return this.index++,this.tokens.push({index:b,text:d,string:c,json:!0,fn:function(){return c}}),void 0;c+=f}this.index++}this.throwError("Unterminated quote",b)}};var Wd=function(a,b,c){this.lexer=a,this.$filter=b,this.options=c};Wd.ZERO=function(){return 0},Wd.prototype={constructor:Wd,parse:function(a,b){this.text=a,this.json=b,this.tokens=this.lexer.lex(a),b&&(this.assignment=this.logicalOR,this.functionCall=this.fieldAccess=this.objectIndex=this.filterChain=function(){this.throwError("is not valid json",{text:a,index:0})});var c=b?this.primary():this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),c.literal=!!c.literal,c.constant=!!c.constant,c},primary:function(){var a;if(this.expect("("))a=this.filterChain(),this.consume(")");else if(this.expect("["))a=this.arrayDeclaration();else if(this.expect("{"))a=this.object();else{var b=this.expect();a=b.fn,a||this.throwError("not a primary expression",b),b.json&&(a.constant=!0,a.literal=!0)}for(var c,d;c=this.expect("(","[",".");)"("===c.text?(a=this.functionCall(a,d),d=null):"["===c.text?(d=a,a=this.objectIndex(a)):"."===c.text?(d=a,a=this.fieldAccess(a)):this.throwError("IMPOSSIBLE");return a},throwError:function(a,b){throw Rd("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",b.text,a,b.index+1,this.text,this.text.substring(b.index))},peekToken:function(){if(0===this.tokens.length)throw Rd("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(a,b,c,d){if(this.tokens.length>0){var e=this.tokens[0],f=e.text;if(f===a||f===b||f===c||f===d||!a&&!b&&!c&&!d)return e}return!1},expect:function(a,b,c,d){var e=this.peek(a,b,c,d);return e?(this.json&&!e.json&&this.throwError("is not valid json",e),this.tokens.shift(),e):!1},consume:function(a){this.expect(a)||this.throwError("is unexpected, expecting ["+a+"]",this.peek())},unaryFn:function(a,b){return l(function(c,d){return a(c,d,b)},{constant:b.constant})},ternaryFn:function(a,b,c){return l(function(d,e){return a(d,e)?b(d,e):c(d,e)},{constant:a.constant&&b.constant&&c.constant})},binaryFn:function(a,b,c){return l(function(d,e){return b(d,e,a,c)},{constant:a.constant&&c.constant})},statements:function(){for(var a=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&a.push(this.filterChain()),!this.expect(";"))return 1===a.length?a[0]:function(b,c){for(var d,e=0;e<a.length;e++){var f=a[e];f&&(d=f(b,c))}return d}},filterChain:function(){for(var a,b=this.expression();;){if(!(a=this.expect("|")))return b;b=this.binaryFn(b,a.fn,this.filter())}},filter:function(){for(var a=this.expect(),b=this.$filter(a.text),c=[];;){if(!(a=this.expect(":"))){var d=function(a,d,e){for(var f=[e],g=0;g<c.length;g++)f.push(c[g](a,d));return b.apply(a,f)};return function(){return d}}c.push(this.expression())}},expression:function(){return this.assignment()},assignment:function(){var a,b,c=this.ternary();return(b=this.expect("="))?(c.assign||this.throwError("implies assignment but ["+this.text.substring(0,b.index)+"] can not be assigned to",b),a=this.ternary(),function(b,d){return c.assign(b,a(b,d),d)}):c},ternary:function(){var a,b,c=this.logicalOR();return(b=this.expect("?"))?(a=this.ternary(),(b=this.expect(":"))?this.ternaryFn(c,a,this.ternary()):(this.throwError("expected :",b),void 0)):c},logicalOR:function(){for(var a,b=this.logicalAND();;){if(!(a=this.expect("||")))return b;b=this.binaryFn(b,a.fn,this.logicalAND())}},logicalAND:function(){var a,b=this.equality();return(a=this.expect("&&"))&&(b=this.binaryFn(b,a.fn,this.logicalAND())),b},equality:function(){var a,b=this.relational();return(a=this.expect("==","!=","===","!=="))&&(b=this.binaryFn(b,a.fn,this.equality())),b},relational:function(){var a,b=this.additive();return(a=this.expect("<",">","<=",">="))&&(b=this.binaryFn(b,a.fn,this.relational())),b},additive:function(){for(var a,b=this.multiplicative();a=this.expect("+","-");)b=this.binaryFn(b,a.fn,this.multiplicative());return b},multiplicative:function(){for(var a,b=this.unary();a=this.expect("*","/","%");)b=this.binaryFn(b,a.fn,this.unary());return b},unary:function(){var a;return this.expect("+")?this.primary():(a=this.expect("-"))?this.binaryFn(Wd.ZERO,a.fn,this.unary()):(a=this.expect("!"))?this.unaryFn(a.fn,this.unary()):this.primary()},fieldAccess:function(a){var b=this,c=this.expect().text,d=oc(c,this.options,this.text);return l(function(b,c,e){return d(e||a(b,c),c)},{assign:function(d,e,f){return mc(a(d,f),c,e,b.text,b.options)}})},objectIndex:function(a){var b=this,d=this.expression();return this.consume("]"),l(function(e,f){var g,h,i=a(e,f),j=d(e,f);return i?(g=lc(i[j],b.text),g&&g.then&&b.options.unwrapPromises&&(h=g,"$$v"in g||(h.$$v=c,h.then(function(a){h.$$v=a})),g=g.$$v),g):c},{assign:function(c,e,f){var g=d(c,f),h=lc(a(c,f),b.text);return h[g]=e}})},functionCall:function(a,b){var c=[];if(")"!==this.peekToken().text)do c.push(this.expression());while(this.expect(","));this.consume(")");var d=this;return function(e,f){for(var g=[],h=b?b(e,f):e,i=0;i<c.length;i++)g.push(c[i](e,f));var j=a(e,f,h)||o;lc(h,d.text),lc(j,d.text);var k=j.apply?j.apply(h,g):j(g[0],g[1],g[2],g[3],g[4]);return lc(k,d.text)}},arrayDeclaration:function(){var a=[],b=!0;if("]"!==this.peekToken().text)do{var c=this.expression();a.push(c),c.constant||(b=!1)}while(this.expect(","));return this.consume("]"),l(function(b,c){for(var d=[],e=0;e<a.length;e++)d.push(a[e](b,c));return d},{literal:!0,constant:b})},object:function(){var a=[],b=!0;if("}"!==this.peekToken().text)do{var c=this.expect(),d=c.string||c.text;this.consume(":");var e=this.expression();a.push({key:d,value:e}),e.constant||(b=!1)}while(this.expect(","));return this.consume("}"),l(function(b,c){for(var d={},e=0;e<a.length;e++){var f=a[e];d[f.key]=f.value(b,c)}return d},{literal:!0,constant:b})}};var Xd={},Yd=d("$sce"),Zd={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},$d=b.createElement("a"),_d=/^\/?.*?:(\/.*)/,ae=Ac(a.location.href,!0);Ec.$inject=["$provide"],Gc.$inject=["$locale"],Hc.$inject=["$locale"];var be=".",ce={yyyy:Kc("FullYear",4),yy:Kc("FullYear",2,0,!0),y:Kc("FullYear",1),MMMM:Lc("Month"),MMM:Lc("Month",!0),MM:Kc("Month",2,1),M:Kc("Month",1,1),dd:Kc("Date",2),d:Kc("Date",1),HH:Kc("Hours",2),H:Kc("Hours",1),hh:Kc("Hours",2,-12),h:Kc("Hours",1,-12),mm:Kc("Minutes",2),m:Kc("Minutes",1),ss:Kc("Seconds",2),s:Kc("Seconds",1),sss:Kc("Milliseconds",3),EEEE:Lc("Day"),EEE:Lc("Day",!0),a:Nc,Z:Mc},de=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,ee=/^\-?\d+$/;Oc.$inject=["$locale"];var fe=q(_c),ge=q(ad);Rc.$inject=["$parse"];var he=q({restrict:"E",compile:function(a,c){return 8>=dd&&(c.href||c.name||c.$set("href",""),a.append(b.createComment("IE fix"))),function(a,b){b.on("click",function(a){b.attr("href")||a.preventDefault()})}}}),ie={};f(Ad,function(a,b){if("multiple"!=a){var c=Kb("ng-"+b);ie[c]=function(){return{priority:100,compile:function(){return function(a,d,e){a.$watch(e[c],function(a){e.$set(b,!!a)})}}}}}}),f(["src","srcset","href"],function(a){var b=Kb("ng-"+a);ie[b]=function(){return{priority:99,link:function(c,d,e){e.$observe(b,function(b){b&&(e.$set(a,b),dd&&d.prop(a,e[a]))})}}}});var je={$addControl:o,$removeControl:o,$setValidity:o,$setDirty:o,$setPristine:o};Tc.$inject=["$element","$attrs","$scope"];var ke=function(a){return["$timeout",function(b){var d={name:"form",restrict:a?"EAC":"E",controller:Tc,compile:function(){return{pre:function(a,d,e,f){if(!e.action){var g=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};ud(d[0],"submit",g),d.on("$destroy",function(){b(function(){vd(d[0],"submit",g)},0,!1)})}var h=d.parent().controller("form"),i=e.name||e.ngForm;i&&mc(a,i,f,i),h&&d.on("$destroy",function(){h.$removeControl(f),i&&mc(a,i,c,i),l(f,je)})}}}};return d}]},le=ke(),me=ke(!0),ne=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,oe=/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,6}$/,pe=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,qe={text:Uc,number:Vc,url:Wc,email:Xc,radio:Yc,checkbox:Zc,hidden:o,button:o,submit:o,reset:o},re=["$browser","$sniffer",function(a,b){return{restrict:"E",require:"?ngModel",link:function(c,d,e,f){f&&(qe[_c(e.type)]||qe.text)(c,d,e,f,b,a)}}}],se="ng-valid",te="ng-invalid",ue="ng-pristine",ve="ng-dirty",we=["$scope","$exceptionHandler","$attrs","$element","$parse",function(a,b,c,e,g){function h(a,b){b=b?"-"+_(b,"-"):"",e.removeClass((a?te:se)+b).addClass((a?se:te)+b)}this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$name=c.name;var i=g(c.ngModel),j=i.assign;if(!j)throw d("ngModel")("nonassign","Expression '{0}' is non-assignable. Element: {1}",c.ngModel,T(e));this.$render=o,this.$isEmpty=function(a){return r(a)||""===a||null===a||a!==a};var k=e.inheritedData("$formController")||je,l=0,m=this.$error={};e.addClass(ue),h(!0),this.$setValidity=function(a,b){m[a]!==!b&&(b?(m[a]&&l--,l||(h(!0),this.$valid=!0,this.$invalid=!1)):(h(!1),this.$invalid=!0,this.$valid=!1,l++),m[a]=!b,h(b,a),k.$setValidity(a,b,this))},this.$setPristine=function(){this.$dirty=!1,this.$pristine=!0,e.removeClass(ve).addClass(ue)},this.$setViewValue=function(c){this.$viewValue=c,this.$pristine&&(this.$dirty=!0,this.$pristine=!1,e.removeClass(ue).addClass(ve),k.$setDirty()),f(this.$parsers,function(a){c=a(c)}),this.$modelValue!==c&&(this.$modelValue=c,j(a,c),f(this.$viewChangeListeners,function(a){try{a()}catch(c){b(c)}}))};var n=this;a.$watch(function(){var b=i(a);if(n.$modelValue!==b){var c=n.$formatters,d=c.length;for(n.$modelValue=b;d--;)b=c[d](b);n.$viewValue!==b&&(n.$viewValue=b,n.$render())}})}],xe=function(){return{require:["ngModel","^?form"],controller:we,link:function(a,b,c,d){var e=d[0],f=d[1]||je;f.$addControl(e),a.$on("$destroy",function(){f.$removeControl(e)})}}},ye=q({require:"ngModel",link:function(a,b,c,d){d.$viewChangeListeners.push(function(){a.$eval(c.ngChange)})}}),ze=function(){return{require:"?ngModel",link:function(a,b,c,d){if(d){c.required=!0;var e=function(a){return c.required&&d.$isEmpty(a)?(d.$setValidity("required",!1),void 0):(d.$setValidity("required",!0),a)};d.$formatters.push(e),d.$parsers.unshift(e),c.$observe("required",function(){e(d.$viewValue)})}}}},Ae=function(){return{require:"ngModel",link:function(a,b,d,e){var g=/\/(.*)\//.exec(d.ngList),h=g&&new RegExp(g[1])||d.ngList||",",i=function(a){if(!r(a)){var b=[];return a&&f(a.split(h),function(a){a&&b.push(od(a))}),b}};e.$parsers.push(i),e.$formatters.push(function(a){return x(a)?a.join(", "):c}),e.$isEmpty=function(a){return!a||!a.length}}}},Be=/^(true|false|\d+)$/,Ce=function(){return{priority:100,compile:function(a,b){return Be.test(b.ngValue)?function(a,b,c){c.$set("value",a.$eval(c.ngValue))}:function(a,b,c){a.$watch(c.ngValue,function(a){c.$set("value",a)})}}}},De=Sc(function(a,b,d){b.addClass("ng-binding").data("$binding",d.ngBind),a.$watch(d.ngBind,function(a){b.text(a==c?"":a)})}),Ee=["$interpolate",function(a){return function(b,c,d){var e=a(c.attr(d.$attr.ngBindTemplate));c.addClass("ng-binding").data("$binding",e),d.$observe("ngBindTemplate",function(a){c.text(a)})}}],Fe=["$sce","$parse",function(a,b){return function(c,d,e){function f(){return(g(c)||"").toString()}d.addClass("ng-binding").data("$binding",e.ngBindHtml);var g=b(e.ngBindHtml);c.$watch(f,function(){d.html(a.getTrustedHtml(g(c))||"")})}}],Ge=$c("",!0),He=$c("Odd",0),Ie=$c("Even",1),Je=Sc({compile:function(a,b){b.$set("ngCloak",c),a.removeClass("ng-cloak")}}),Ke=[function(){return{scope:!0,controller:"@"}}],Le={};f("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var b=Kb("ng-"+a);Le[b]=["$parse",function(c){return{compile:function(d,e){var f=c(e[b]);return function(b,c){c.on(_c(a),function(a){b.$apply(function(){f(b,{$event:a})})})}}}}]});var Me=["$animate",function(a){return{transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,i;c.$watch(e.ngIf,function(f){S(f)?i||(i=c.$new(),g(i,function(c){h={startNode:c[0],endNode:c[c.length++]=b.createComment(" end ngIf: "+e.ngIf+" ")},a.enter(c,d.parent(),d)})):(i&&(i.$destroy(),i=null),h&&(a.leave(fb(h)),h=null))})}}}],Ne=["$http","$templateCache","$anchorScroll","$compile","$animate","$sce",function(a,b,c,d,e,f){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",compile:function(g,h){var i=h.ngInclude||h.src,j=h.onload||"",k=h.autoscroll;return function(g,h,l,m,n){var o,p,q=0,r=function(){o&&(o.$destroy(),o=null),p&&(e.leave(p),p=null)};g.$watch(f.parseAsResourceUrl(i),function(f){var i=function(){!s(k)||k&&!g.$eval(k)||c()},l=++q;f?(a.get(f,{cache:b}).success(function(a){if(l===q){var b=g.$new();n(b,function(c){r(),o=b,p=c,p.html(a),e.enter(p,null,h,i),d(p.contents())(o),o.$emit("$includeContentLoaded"),g.$eval(j)})}}).error(function(){l===q&&r()}),g.$emit("$includeContentRequested")):r()})}}}}],Oe=Sc({compile:function(){return{pre:function(a,b,c){a.$eval(c.ngInit)}}}}),Pe=Sc({terminal:!0,priority:1e3}),Qe=["$locale","$interpolate",function(a,b){var c=/{}/g;return{restrict:"EA",link:function(d,e,g){var h=g.count,i=g.$attr.when&&e.attr(g.$attr.when),j=g.offset||0,k=d.$eval(i)||{},l={},m=b.startSymbol(),n=b.endSymbol(),o=/^when(Minus)?(.+)$/;f(g,function(a,b){o.test(b)&&(k[_c(b.replace("when","").replace("Minus","-"))]=e.attr(g.$attr[b]))}),f(k,function(a,d){l[d]=b(a.replace(c,m+h+"-"+j+n))}),d.$watch(function(){var b=parseFloat(d.$eval(h));return isNaN(b)?"":(b in k||(b=a.pluralCat(b-j)),l[b](d,e,!0))},function(a){e.text(a)})}}}],Re=["$parse","$animate",function(a,c){var g="$$NG_REMOVED",h=d("ngRepeat");return{transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,link:function(d,i,j,k,l){var m,n,o,p,q,r,s,t,u,v=j.ngRepeat,w=v.match(/^\s*(.+)\s+in\s+(.*?)\s*(\s+track\s+by\s+(.+)\s*)?$/),x={$id:Ab};if(!w)throw h("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",v);if(r=w[1],s=w[2],m=w[4],m?(n=a(m),o=function(a,b,c){return u&&(x[u]=a),x[t]=b,x.$index=c,n(d,x)}):(p=function(a,b){return Ab(b)},q=function(a){return a}),w=r.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/),!w)throw h("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",r);t=w[3]||w[1],u=w[2];var y={};d.$watchCollection(s,function(a){var j,k,m,n,r,s,w,x,z,A,B,C,D=i[0],E={},F=[];if(e(a))A=a,z=o||p;else{z=o||q,A=[];for(s in a)a.hasOwnProperty(s)&&"$"!=s.charAt(0)&&A.push(s);A.sort()}for(n=A.length,k=F.length=A.length,j=0;k>j;j++)if(s=a===A?j:A[j],w=a[s],x=z(s,w,j),db(x,"`track by` id"),y.hasOwnProperty(x))B=y[x],delete y[x],E[x]=B,F[j]=B;else{if(E.hasOwnProperty(x))throw f(F,function(a){a&&a.startNode&&(y[a.id]=a)}),h("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}",v,x);F[j]={id:x},E[x]=!1}for(s in y)y.hasOwnProperty(s)&&(B=y[s],C=fb(B),c.leave(C),f(C,function(a){a[g]=!0}),B.scope.$destroy());for(j=0,k=A.length;k>j;j++){if(s=a===A?j:A[j],w=a[s],B=F[j],F[j-1]&&(D=F[j-1].endNode),B.startNode){r=B.scope,m=D;do m=m.nextSibling;while(m&&m[g]);B.startNode!=m&&c.move(fb(B),null,ed(D)),D=B.endNode}else r=d.$new();r[t]=w,u&&(r[u]=s),r.$index=j,r.$first=0===j,r.$last=j===n-1,r.$middle=!(r.$first||r.$last),r.$odd=!(r.$even=0===(1&j)),B.startNode||l(r,function(a){a[a.length++]=b.createComment(" end ngRepeat: "+v+" "),c.enter(a,null,ed(D)),D=a,B.scope=r,B.startNode=D&&D.endNode?D.endNode:a[0],B.endNode=a[a.length-1],E[B.id]=B})}y=E})}}}],Se=["$animate",function(a){return function(b,c,d){b.$watch(d.ngShow,function(b){a[S(b)?"removeClass":"addClass"](c,"ng-hide")})}}],Te=["$animate",function(a){return function(b,c,d){b.$watch(d.ngHide,function(b){a[S(b)?"addClass":"removeClass"](c,"ng-hide")})}}],Ue=Sc(function(a,b,c){a.$watch(c.ngStyle,function(a,c){c&&a!==c&&f(c,function(a,c){b.css(c,"")}),a&&b.css(a)},!0)}),Ve=["$animate",function(a){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(b,c,d,e){var g,h,i=d.ngSwitch||d.on,j=[];b.$watch(i,function(c){for(var i=0,k=j.length;k>i;i++)j[i].$destroy(),a.leave(h[i]);h=[],j=[],(g=e.cases["!"+c]||e.cases["?"])&&(b.$eval(d.change),f(g,function(c){var d=b.$new();j.push(d),c.transclude(d,function(b){var d=c.element;h.push(b),a.enter(b,d.parent(),d)})}))})}}}],We=Sc({transclude:"element",priority:800,require:"^ngSwitch",compile:function(a,b){return function(a,c,d,e,f){e.cases["!"+b.ngSwitchWhen]=e.cases["!"+b.ngSwitchWhen]||[],e.cases["!"+b.ngSwitchWhen].push({transclude:f,element:c})}}}),Xe=Sc({transclude:"element",priority:800,require:"^ngSwitch",link:function(a,b,c,d,e){d.cases["?"]=d.cases["?"]||[],d.cases["?"].push({transclude:e,element:b})}}),Ye=Sc({controller:["$element","$transclude",function(a,b){if(!b)throw d("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",T(a));this.$transclude=b}],link:function(a,b,c,d){d.$transclude(function(a){b.html(""),b.append(a)})}}),Ze=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,c){if("text/ng-template"==c.type){var d=c.id,e=b[0].text;a.put(d,e)}}}}],$e=d("ngOptions"),_e=q({terminal:!0}),af=["$compile","$parse",function(a,d){var e=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/,h={$setViewValue:o};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(a,b,c){var d,e,f=this,g={},i=h;f.databound=c.ngModel,f.init=function(a,b,c){i=a,d=b,e=c},f.addOption=function(b){db(b,'"option value"'),g[b]=!0,i.$viewValue==b&&(a.val(b),e.parent()&&e.remove())},f.removeOption=function(a){this.hasOption(a)&&(delete g[a],i.$viewValue==a&&this.renderUnknownOption(a))},f.renderUnknownOption=function(b){var c="? "+Ab(b)+" ?";e.val(c),a.prepend(e),a.val(c),e.prop("selected",!0)},f.hasOption=function(a){return g.hasOwnProperty(a)},b.$on("$destroy",function(){f.renderUnknownOption=o})}],link:function(h,i,j,k){function l(a,b,c,d){c.$render=function(){var a=c.$viewValue;d.hasOption(a)?(z.parent()&&z.remove(),b.val(a),""===a&&o.prop("selected",!0)):r(a)&&o?b.val(""):d.renderUnknownOption(a)},b.on("change",function(){a.$apply(function(){z.parent()&&z.remove(),c.$setViewValue(b.val())})})}function m(a,b,c){var d;c.$render=function(){var a=new Bb(c.$viewValue);f(b.find("option"),function(b){b.selected=s(a.get(b.value))})},a.$watch(function(){K(d,c.$viewValue)||(d=I(c.$viewValue),c.$render())}),b.on("change",function(){a.$apply(function(){var a=[];f(b.find("option"),function(b){b.selected&&a.push(b.value)}),c.$setViewValue(a)})})}function n(b,f,h){function i(){var a,c,d,e,i,j,q,u,A,B,C,D,E,F,G,H={"":[]},I=[""],J=h.$modelValue,K=p(b)||[],L=m?g(K):K,M={},N=!1;if(t)if(r&&x(J)){N=new Bb([]);for(var O=0;O<J.length;O++)M[l]=J[O],N.put(r(b,M),J[O])}else N=new Bb(J);for(C=0;A=L.length,A>C;C++){if(q=C,m){if(q=L[C],"$"===q.charAt(0))continue;M[m]=q}if(M[l]=K[q],a=n(b,M)||"",(c=H[a])||(c=H[a]=[],I.push(a)),t)D=s(N.remove(r?r(b,M):o(b,M)));else{if(r){var P={};P[l]=J,D=r(b,P)===r(b,M)}else D=J===o(b,M);N=N||D}G=k(b,M),G=s(G)?G:"",c.push({id:r?r(b,M):m?L[C]:C,label:G,selected:D})}for(t||(v||null===J?H[""].unshift({id:"",label:"",selected:!N}):N||H[""].unshift({id:"?",label:"",selected:!0})),B=0,u=I.length;u>B;B++){for(a=I[B],c=H[a],z.length<=B?(e={element:y.clone().attr("label",a),label:c.label},i=[e],z.push(i),f.append(e.element)):(i=z[B],e=i[0],e.label!=a&&e.element.attr("label",e.label=a)),E=null,C=0,A=c.length;A>C;C++)d=c[C],(j=i[C+1])?(E=j.element,j.label!==d.label&&E.text(j.label=d.label),j.id!==d.id&&E.val(j.id=d.id),E[0].selected!==d.selected&&E.prop("selected",j.selected=d.selected)):(""===d.id&&v?F=v:(F=w.clone()).val(d.id).attr("selected",d.selected).text(d.label),i.push(j={element:F,label:d.label,id:d.id,selected:d.selected}),E?E.after(F):e.element.append(F),E=F);for(C++;i.length>C;)i.pop().element.remove()}for(;z.length>B;)z.pop()[0].element.remove()}var j;if(!(j=u.match(e)))throw $e("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",u,T(f));var k=d(j[2]||j[1]),l=j[4]||j[6],m=j[5],n=d(j[3]||""),o=d(j[2]?j[1]:l),p=d(j[7]),q=j[8],r=q?d(j[8]):null,z=[[{element:f,label:""}]];v&&(a(v)(b),v.removeClass("ng-scope"),v.remove()),f.html(""),f.on("change",function(){b.$apply(function(){var a,d,e,g,i,j,k,n,q,s=p(b)||[],u={};if(t){for(e=[],j=0,n=z.length;n>j;j++)for(a=z[j],i=1,k=a.length;k>i;i++)if((g=a[i].element)[0].selected){if(d=g.val(),m&&(u[m]=d),r)for(q=0;q<s.length&&(u[l]=s[q],r(b,u)!=d);q++);else u[l]=s[d];e.push(o(b,u))}}else if(d=f.val(),"?"==d)e=c;else if(""===d)e=null;else if(r){for(q=0;q<s.length;q++)if(u[l]=s[q],r(b,u)==d){e=o(b,u);break}}else u[l]=s[d],m&&(u[m]=d),e=o(b,u);h.$setViewValue(e)})}),h.$render=i,b.$watch(i)}if(k[1]){for(var o,p=k[0],q=k[1],t=j.multiple,u=j.ngOptions,v=!1,w=ed(b.createElement("option")),y=ed(b.createElement("optgroup")),z=w.clone(),A=0,B=i.children(),C=B.length;C>A;A++)if(""===B[A].value){o=v=B.eq(A);break}if(p.init(q,v,z),t&&(j.required||j.ngRequired)){var D=function(a){return q.$setValidity("required",!j.required||a&&a.length),a};q.$parsers.push(D),q.$formatters.unshift(D),j.$observe("required",function(){D(q.$viewValue)})}u?n(h,i,q):t?m(h,i,q):l(h,i,q,p)}}}}],bf=["$interpolate",function(a){var b={addOption:o,removeOption:o};return{restrict:"E",priority:100,compile:function(c,d){if(r(d.value)){var e=a(c.text(),!0);e||d.$set("value",c.text())}return function(a,c,d){var f="$selectController",g=c.parent(),h=g.data(f)||g.parent().data(f);h&&h.databound?c.prop("selected",!1):h=b,e?a.$watch(e,function(a,b){d.$set("value",a),a!==b&&h.removeOption(b),h.addOption(a)}):h.addOption(d.value),c.on("$destroy",function(){h.removeOption(d.value)})}}}}],cf=q({restrict:"E",terminal:!0});ab(),hb(md),ed(b).ready(function(){Z(b,$)})}(window,document),!angular.$$csp()&&angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-start{clip:rect(0,auto,auto,0);-ms-zoom:1.0001;}.ng-animate-active{clip:rect(-1px,auto,auto,0);-ms-zoom:1;}</style>')},{}],38:[function(a,b,c){!function(a){function b(a){if(a.ownerDocument&&a.ownerDocument.fullDT)return a.ownerDocument.fullDT;var b="<!DOCTYPE "+a.name;return a.publicId&&(b+=' PUBLIC "'+a.publicId+'" '),!a.publicId&&a.systemId&&(b+=" SYSTEM "),a.systemId&&(b+=a.systemId.indexOf('"')>-1?"'"+a.systemId+"'":'"'+a.systemId+'"'),b+=">"}var c={area:1,base:1,basefont:1,br:1,col:1,frame:1,hr:1,img:1,input:1,isindex:1,link:1,meta:1,param:1,embed:1};({upperCaseChars:/([A-Z])/g,breakBetweenTags:/(<(\/?\w+).*?>)(?=<(?!\/\2))/gi,singleTag:function(){var a=[];for(var b in c)a.push(b);return new RegExp("<"+a.join("|<"),"i")}()});var d=function(a){return a};a.stringifyElement=function(a){var b,e=a.tagName.toLowerCase(),f={start:"<"+e,end:""},g=[],h=null;if(a.attributes.length)for(f.start+=" ",b=0;b<a.attributes.length;b++)h=a.attributes.item(b),g.push(h.name+'="'+d(h.nodeValue,!0)+'"');return f.start+=g.join(" "),c[e]?(f.start+=" />",f.end=""):(f.start+=">",f.end="</"+e+">"),f};var e=/SCRIPT|STYLE/i;a.makeHtmlGenerator=function(c,f){return c=c||"",f=f||"",function g(h,i,j){var k,l,m,n="";if(j=j||"",h){h.nodeType&&h.nodeType===h.ENTITY_REFERENCE_NODE&&(h=h.entity);var o=i||e.test(h.nodeName);switch(h.nodeType){case h.ELEMENT_NODE:if("TEMPLATE"===h.tagName?(m=h.content.childNodes,o=!0):m=h.childNodes,k=a.stringifyElement(h),n+=o?j+k.start:j+k.start,"HTML"===h.nodeName&&(n+=f),m.length>0){for(m[0].nodeType!==h.TEXT_NODE&&(n+=f),l=0;l<m.length;l++)n+=g(m[l],o,j+c)||(0===l&&m.length>1?f:"");(m[m.length-1].nodeType!==h.TEXT_NODE||n.charAt(n.length-1)===f)&&(n+=j),n+=k.end+f}else n+=((i?h.nodeValue:d(h.nodeValue,!1))||"")+k.end+f;("HEAD"===h.nodeName||"BODY"===h.nodeName)&&(n+=f);break;case h.TEXT_NODE:c&&/^[\s\n]*$/.test(h.nodeValue)||(n+=(i?h.nodeValue:d(h.nodeValue,!1))||"");break;case h.COMMENT_NODE:n+=j+"<!--"+h.nodeValue+"-->"+f;break;case h.DOCUMENT_NODE:for(l=0;l<h.childNodes.length;l++)n+=g(h.childNodes[l],o,j);break;case h.DOCUMENT_TYPE_NODE:n+=b(h),n+=f}}return n}},a.domToHtml=function(b,c,d){var e=a.makeHtmlGenerator(c?"":"  ",c?"":"\n");if(b.toArray&&(b=b.toArray()),"undefined"!=typeof b.length){for(var f="",g=0,h=b.length;h>g;g++)f+=e(b[g],d);return f}return e(b,d)}}("object"==typeof c?c:dominatrix={})},{}],39:[function(){!function(){var a=angular.module("restangular",[]);a.provider("Restangular",function(){var a={};a.init=function(a,b){function c(a,b,c,d){var e={};return _.each(_.keys(d),function(f){var g=d[f];g.params=_.extend({},g.params,a.defaultRequestParams[g.method.toLowerCase()]),_.isEmpty(g.params)&&delete g.params,e[f]=a.isSafe(g.method)?function(){return b(_.extend(g,{url:c}))}:function(a){return b(_.extend(g,{url:c,data:a}))}}),e}var d=["get","head","options","trace"];b.isSafe=function(a){return _.contains(d,a.toLowerCase())};var e=/^https?:\/\//i;b.isAbsoluteUrl=function(a){return a&&e.test(a)},b.baseUrl=_.isUndefined(b.baseUrl)?"":b.baseUrl,a.setBaseUrl=function(a){return b.baseUrl=/\/$/.test(a)?a.substring(0,a.length-1):a,this},b.extraFields=b.extraFields||[],a.setExtraFields=function(a){return b.extraFields=a,this},b.defaultHttpFields=b.defaultHttpFields||{},a.setDefaultHttpFields=function(a){return b.defaultHttpFields=a,this
},b.withHttpDefaults=function(a){return _.defaults(a,b.defaultHttpFields)},b.encodeIds=_.isUndefined(b.encodeIds)?!0:b.encodeIds,a.setEncodeIds=function(a){b.encodeIds=a},b.defaultRequestParams=b.defaultRequestParams||{get:{},post:{},put:{},remove:{},common:{}},a.setDefaultRequestParams=function(a,c){var d=[],e=c||a;return _.isUndefined(c)?d.push("common"):_.isArray(a)?d=a:d.push(a),_.each(d,function(a){b.defaultRequestParams[a]=e}),this},a.requestParams=b.defaultRequestParams,b.defaultHeaders=b.defaultHeaders||{},a.setDefaultHeaders=function(c){return b.defaultHeaders=c,a.defaultHeaders=b.defaultHeaders,this},a.defaultHeaders=b.defaultHeaders,b.methodOverriders=b.methodOverriders||[],a.setMethodOverriders=function(a){var c=_.extend([],a);return b.isOverridenMethod("delete",c)&&c.push("remove"),b.methodOverriders=c,this},b.isOverridenMethod=function(a,c){var d=c||b.methodOverriders;return!_.isUndefined(_.find(d,function(b){return b.toLowerCase()===a.toLowerCase()}))},b.urlCreator=b.urlCreator||"path",a.setUrlCreator=function(a){if(!_.has(b.urlCreatorFactory,a))throw new Error("URL Path selected isn't valid");return b.urlCreator=a,this},b.restangularFields=b.restangularFields||{id:"id",route:"route",parentResource:"parentResource",restangularCollection:"restangularCollection",cannonicalId:"__cannonicalId",etag:"restangularEtag",selfLink:"href",get:"get",getList:"getList",put:"put",post:"post",remove:"remove",head:"head",trace:"trace",options:"options",patch:"patch",getRestangularUrl:"getRestangularUrl",putElement:"putElement",addRestangularMethod:"addRestangularMethod",getParentList:"getParentList",clone:"clone",ids:"ids"},a.setRestangularFields=function(a){return b.restangularFields=_.extend(b.restangularFields,a),this},b.setFieldToElem=function(a,b,c){var d=a.split("."),e=b;return _.each(_.initial(d),function(a){e[a]={},e=e[a]}),e[_.last(d)]=c,this},b.getFieldFromElem=function(a,b){var c=a.split("."),d=angular.copy(b);return _.each(c,function(a){d&&(d=d[a])}),d},b.setIdToElem=function(a,c){return b.setFieldToElem(b.restangularFields.id,a,c),this},b.getIdFromElem=function(a){return b.getFieldFromElem(b.restangularFields.id,a)},b.isValidId=function(a){return""!==a&&!_.isUndefined(a)&&!_.isNull(a)},b.setUrlToElem=function(a,c){return b.setFieldToElem(b.restangularFields.selfLink,a,c),this},b.getUrlFromElem=function(a){return b.getFieldFromElem(b.restangularFields.selfLink,a)},b.useCannonicalId=_.isUndefined(b.useCannonicalId)?!1:b.useCannonicalId,a.setUseCannonicalId=function(a){return b.useCannonicalId=a,this},b.getCannonicalIdFromElem=function(a){var c=a[b.restangularFields.cannonicalId],d=b.isValidId(c)?c:b.getIdFromElem(a);return d},b.responseExtractor=b.responseExtractor||function(a){return a},a.setResponseExtractor=function(a){return b.responseExtractor=a,this},a.setResponseInterceptor=a.setResponseExtractor,b.fullRequestInterceptor=b.fullRequestInterceptor||function(a,b,c,d,e,f){return{element:a,headers:e,params:f}},a.setRequestInterceptor=function(a){return b.fullRequestInterceptor=function(b,c,d,e,f,g){return{headers:f,params:g,element:a(b,c,d,e)}},this},a.setFullRequestInterceptor=function(a){return b.fullRequestInterceptor=a,this},b.errorInterceptor=b.errorInterceptor||function(){},a.setErrorInterceptor=function(a){return b.errorInterceptor=a,this},b.onBeforeElemRestangularized=b.onBeforeElemRestangularized||function(a){return a},a.setOnBeforeElemRestangularized=function(a){return b.onBeforeElemRestangularized=a,this},b.onElemRestangularized=b.onElemRestangularized||function(a){return a},a.setOnElemRestangularized=function(a){return b.onElemRestangularized=a,this},a.setListTypeIsArray=function(){},b.shouldSaveParent=b.shouldSaveParent||function(){return!0},a.setParentless=function(a){return _.isArray(a)?b.shouldSaveParent=function(b){return!_.contains(a,b)}:_.isBoolean(a)&&(b.shouldSaveParent=function(){return!a}),this},b.suffix=_.isUndefined(b.suffix)?null:b.suffix,a.setRequestSuffix=function(a){return b.suffix=a,this},b.transformers=b.transformers||{},a.addElementTransformer=function(a,c,d){var e=null,f=null;2===arguments.length?f=c:(f=d,e=c);var g=b.transformers[a];g||(g=b.transformers[a]=[]),g.push(function(a,b){return _.isNull(e)||a==e?f(b):b})},a.extendCollection=function(b,c){return a.addElementTransformer(b,!0,c)},a.extendModel=function(b,c){return a.addElementTransformer(b,!1,c)},b.transformElem=function(a,c,d,e){var f=b.transformers[d],g=a;return f&&_.each(f,function(a){g=a(c,g)}),b.onElemRestangularized(g,c,d,e)},b.fullResponse=_.isUndefined(b.fullResponse)?!1:b.fullResponse,a.setFullResponse=function(a){return b.fullResponse=a,this},b.urlCreatorFactory={};var f=function(){};f.prototype.setConfig=function(a){return this.config=a,this},f.prototype.parentsArray=function(a){for(var b=[];a;)b.push(a),a=a[this.config.restangularFields.parentResource];return b.reverse()},f.prototype.resource=function(a,d,e,f,g,h,i){var j=_.defaults(f||{},this.config.defaultRequestParams.common),k=_.defaults(e||{},this.config.defaultHeaders);h&&(b.isSafe(i)?k["If-None-Match"]=h:k["If-Match"]=h);var l=this.base(a);return l+=g?"/"+g:"",l+=this.config.suffix||"",c(this.config,d,l,{getList:this.config.withHttpDefaults({method:"GET",params:j,headers:k}),get:this.config.withHttpDefaults({method:"GET",params:j,headers:k}),put:this.config.withHttpDefaults({method:"PUT",params:j,headers:k}),post:this.config.withHttpDefaults({method:"POST",params:j,headers:k}),remove:this.config.withHttpDefaults({method:"DELETE",params:j,headers:k}),head:this.config.withHttpDefaults({method:"HEAD",params:j,headers:k}),trace:this.config.withHttpDefaults({method:"TRACE",params:j,headers:k}),options:this.config.withHttpDefaults({method:"OPTIONS",params:j,headers:k}),patch:this.config.withHttpDefaults({method:"PATCH",params:j,headers:k})})};var g=function(){};g.prototype=new f,g.prototype.base=function(a){var c=this;return _.reduce(this.parentsArray(a),function(a,d){var e,f=c.config.getUrlFromElem(d);if(f){if(c.config.isAbsoluteUrl(f))return f;e=f}else if(e=d[c.config.restangularFields.route],d[c.config.restangularFields.restangularCollection]){var g=d[c.config.restangularFields.ids];g&&(e+="/"+g.join(","))}else{var h;h=c.config.useCannonicalId?c.config.getCannonicalIdFromElem(d):c.config.getIdFromElem(d),b.isValidId(h)&&(e+="/"+(c.config.encodeIds?encodeURIComponent(h):h))}return a+"/"+e},this.config.baseUrl)},g.prototype.fetchUrl=function(a,b){var c=this.base(a);return b&&(c+="/"+b),c},b.urlCreatorFactory.path=g};var b={};a.init(this,b),this.$get=["$http","$q",function(c,d){function e(f){function g(a,b,c){if(b[f.restangularFields.route]=c,b[f.restangularFields.getRestangularUrl]=_.bind(M.fetchUrl,M,b),b[f.restangularFields.addRestangularMethod]=_.bind(J,b),b[f.restangularFields.clone]=_.bind(s,b,b),b.one=_.bind(h,b,b),b.all=_.bind(i,b,b),b.several=_.bind(j,b,b),b.oneUrl=_.bind(k,b,b),b.allUrl=_.bind(l,b,b),a&&f.shouldSaveParent(c)){var d=f.getIdFromElem(a),e=f.getUrlFromElem(a),g=_.union(_.values(_.pick(f.restangularFields,["route","parentResource"])),f.extraFields),m=_.pick(a,g);f.isValidId(d)&&f.setIdToElem(m,d),f.isValidId(e)&&f.setUrlToElem(m,e),b[f.restangularFields.parentResource]=m}else b[f.restangularFields.parentResource]=null;return b}function h(a,b,c){var d={};return f.setIdToElem(d,c),t(a,d,b)}function i(a,b){return u(a,[],b,!0)}function j(a,b){var c=[];return c[f.restangularFields.ids]=Array.prototype.splice.call(arguments,2),u(a,c,b,!0)}function k(a,b,c){var d={};return f.setUrlToElem(d,c),t(a,d,b)}function l(a,b,c){var d={};return f.setUrlToElem(d,c),u(a,d,b,!0)}function m(a,b){return a.call=_.bind(n,a),a.get=_.bind(o,a),a[f.restangularFields.restangularCollection]=b,b&&(a.push=_.bind(n,a,"push")),a}function n(a){var b=d.defer(),c=arguments;return this.then(function(d){var e=Array.prototype.slice.call(c,1),f=d[a];f.apply(d,e),b.resolve(d)}),m(b.promise,this[f.restangularFields.restangularCollection])}function o(a){var b=d.defer();return this.then(function(c){b.resolve(c[a])}),m(b.promise,this[f.restangularFields.restangularCollection])}function p(a,b,c){return f.fullResponse?a.resolve(_.extend(b,{data:c})):(a.resolve(c),void 0)}function q(a){return _.omit(a,_.values(_.omit(f.restangularFields,"id")))}function r(a){a.customOperation=_.bind(I,a),_.each(["put","post","get","delete"],function(b){_.each(["do","custom"],function(c){var d,e="delete"===b?"remove":b,f=c+b.toUpperCase();d="put"!==e&&"post"!==e?I:function(a,b,c,d,e){return _.bind(I,this)(a,c,d,e,b)},a[f]=_.bind(d,a,e)})}),a.customGETLIST=_.bind(y,a),a.doGETLIST=a.customGETLIST}function s(a){var b=angular.copy(a);return t(b[f.restangularFields.parentResource],b,b[f.restangularFields.route])}function t(a,b,c,d){var e=f.onBeforeElemRestangularized(b,!1,c),h=g(a,e,c);return f.useCannonicalId&&(h[f.restangularFields.cannonicalId]=f.getIdFromElem(h)),d&&(h[f.restangularFields.getParentList]=function(){return d}),h[f.restangularFields.restangularCollection]=!1,h[f.restangularFields.get]=_.bind(A,h),h[f.restangularFields.getList]=_.bind(y,h),h[f.restangularFields.put]=_.bind(C,h),h[f.restangularFields.post]=_.bind(D,h),h[f.restangularFields.remove]=_.bind(B,h),h[f.restangularFields.head]=_.bind(E,h),h[f.restangularFields.trace]=_.bind(F,h),h[f.restangularFields.options]=_.bind(G,h),h[f.restangularFields.patch]=_.bind(H,h),r(h),f.transformElem(h,!1,c,L)}function u(a,b,c){var d=f.onBeforeElemRestangularized(b,!0,c),e=g(a,d,c);return e[f.restangularFields.restangularCollection]=!0,e[f.restangularFields.post]=_.bind(D,e,null),e[f.restangularFields.head]=_.bind(E,e),e[f.restangularFields.trace]=_.bind(F,e),e[f.restangularFields.putElement]=_.bind(w,e),e[f.restangularFields.options]=_.bind(G,e),e[f.restangularFields.patch]=_.bind(H,e),e[f.restangularFields.get]=_.bind(v,e),e[f.restangularFields.getList]=_.bind(y,e,null),r(e),f.transformElem(e,!0,c,L)}function v(a,b,c){return this.customGET(a.toString(),b,c)}function w(a,b,c){var e=this,f=this[a],g=d.defer();return f.put(b,c).then(function(b){var c=s(e);c[a]=b,g.resolve(c)},function(a){g.reject(a)}),m(g.promise,!0)}function x(a,b,c,d,e,g){var h=f.responseExtractor(a,b,c,d,e,g),i=e.headers("ETag");return h&&i&&(h[f.restangularFields.etag]=i),h}function y(a,b,e){var g=this,h=d.defer(),i="getList",j=M.fetchUrl(this,a),k=a||g[f.restangularFields.route],l=f.fullRequestInterceptor(null,i,k,j,e||{},b||{});return M.resource(this,c,l.headers,l.params,a,this[f.restangularFields.etag],i).getList().then(function(b){var c=b.data,d=x(c,i,k,j,b,h),e=_.map(d,function(b){return g[f.restangularFields.restangularCollection]?t(g[f.restangularFields.parentResource],b,g[f.restangularFields.route],d):t(g,b,a,d)});e=_.extend(d,e),g[f.restangularFields.restangularCollection]?p(h,b,u(null,e,g[f.restangularFields.route])):p(h,b,u(g,e,a))},function(a){f.errorInterceptor(a)!==!1&&h.reject(a)}),m(h.promise,!0)}function z(a,b,e,g,h){var i=this,j=d.defer(),k=e||{},l=b||this[f.restangularFields.route],n=M.fetchUrl(this,b),o=g||this,r=o[f.restangularFields.etag];_.isObject(o)&&(o=q(o));var s=f.fullRequestInterceptor(o,a,l,n,h||{},k||{}),u=function(c){var d=c.data,e=x(d,a,l,n,c,j);e?"post"!==a||i[f.restangularFields.restangularCollection]?p(j,c,t(i[f.restangularFields.parentResource],e,i[f.restangularFields.route])):p(j,c,t(i,e,b)):p(j,c,void 0)},v=function(a){f.errorInterceptor(a)!==!1&&j.reject(a)},w=a,y=_.extend({},s.headers),z=f.isOverridenMethod(a);return z&&(w="post",y=_.extend(y,{"X-HTTP-Method-Override":"remove"===a?"DELETE":a})),f.isSafe(a)?z?M.resource(this,c,y,s.params,b,r,w)[w]({}).then(u,v):M.resource(this,c,y,s.params,b,r,w)[w]().then(u,v):M.resource(this,c,y,s.params,b,r,w)[w](s.element).then(u,v),m(j.promise)}function A(a,b){return _.bind(z,this)("get",void 0,a,void 0,b)}function B(a,b){return _.bind(z,this)("remove",void 0,a,void 0,b)}function C(a,b){return _.bind(z,this)("put",void 0,a,void 0,b)}function D(a,b,c,d){return _.bind(z,this)("post",a,c,b,d)}function E(a,b){return _.bind(z,this)("head",void 0,a,void 0,b)}function F(a,b){return _.bind(z,this)("trace",void 0,a,void 0,b)}function G(a,b){return _.bind(z,this)("options",void 0,a,void 0,b)}function H(a,b,c){return _.bind(z,this)("patch",void 0,b,a,c)}function I(a,b,c,d,e){return _.bind(z,this)(a,b,c,e,d)}function J(a,b,c,d,e,g){var h;h="getList"===b?_.bind(y,this,c):_.bind(I,this,b,c);var i=function(a,b,c){var f=_.defaults({params:a,headers:b,elem:c},{params:d,headers:e,elem:g});return h(f.params,f.headers,f.elem)};this[a]=f.isSafe(b)?i:function(a,b,c){return i(b,c,a)}}function K(c){var d=angular.copy(b);return a.init(d,d),c(d),e(d)}var L={},M=new f.urlCreatorFactory[f.urlCreator];return M.setConfig(f),a.init(L,f),L.copy=_.bind(s,L),L.withConfig=_.bind(K,L),L.one=_.bind(h,L,null),L.all=_.bind(i,L,null),L.several=_.bind(j,L,null),L.oneUrl=_.bind(k,L,null),L.allUrl=_.bind(l,L,null),L.restangularizeElement=_.bind(t,L),L.restangularizeCollection=_.bind(u,L),L}return e(b)}]})}()},{}],40:[function(require,module,exports){!function(){function e(){return function(){}}function m(a){return function(b){this[a]=b}}function aa(a){return function(){return this[a]}}function ba(a){return function(){return a}}function da(a){a=a.split(".");for(var b,c=q;b=a.shift();){if(null==c[b])return null;c=c[b]}return c}function ea(){}function fa(a){var b=typeof a;if("object"==b){if(!a)return"null";if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function s(a){return"array"==fa(a)}function ga(a){var b=fa(a);return"array"==b||"object"==b&&"number"==typeof a.length}function u(a){return"string"==typeof a}function ha(a){return"function"==fa(a)}function v(a){return a[ia]||(a[ia]=++ja)}function ka(a){return a.call.apply(a.bind,arguments)}function la(a,b){if(!a)throw Error();if(2<arguments.length){var c=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,c),a.apply(b,d)}}return function(){return a.apply(b,arguments)}}function w(){return w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ka:la,w.apply(null,arguments)}function y(a,b){function c(){}c.prototype=b.prototype,a.ra=b.prototype,a.prototype=new c}function ma(a){for(var b=1;b<arguments.length;b++){var c=String(arguments[b]).replace(/\$/g,"$$$$");a=a.replace(/\%s/,c)}return a}function na(a){return oa.test(a)?(-1!=a.indexOf("&")&&(a=a.replace(pa,"&amp;")),-1!=a.indexOf("<")&&(a=a.replace(qa,"&lt;")),-1!=a.indexOf(">")&&(a=a.replace(ra,"&gt;")),-1!=a.indexOf('"')&&(a=a.replace(sa,"&quot;")),a):a}function wa(){return q.navigator?q.navigator.userAgent:null}function Da(){var a=q.document;return a?a.documentMode:void 0}function C(a){var b;if(!(b=Ka[a])){b=0;for(var c=String(Ea).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&e>f;f++){var g=c[f]||"",h=d[f]||"",i=RegExp("(\\d*)(\\D*)","g"),j=RegExp("(\\d*)(\\D*)","g");do{var k=i.exec(g)||["","",""],l=j.exec(h)||["","",""];if(0==k[0].length&&0==l[0].length)break;b=((0==k[1].length?0:parseInt(k[1],10))<(0==l[1].length?0:parseInt(l[1],10))?-1:(0==k[1].length?0:parseInt(k[1],10))>(0==l[1].length?0:parseInt(l[1],10))?1:0)||((0==k[2].length)<(0==l[2].length)?-1:(0==k[2].length)>(0==l[2].length)?1:0)||(k[2]<l[2]?-1:k[2]>l[2]?1:0)}while(0==b)}b=Ka[a]=b>=0}return b}function Na(a){Error.captureStackTrace?Error.captureStackTrace(this,Na):this.stack=Error().stack||"",a&&(this.message=String(a))}function Oa(a,b){b.unshift(a),Na.call(this,ma.apply(null,b)),b.shift(),this.Jc=a}function Pa(a){throw new Oa("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1))}function Ra(a){var b,c=Sa;for(b in c)a.call(void 0,c[b],b,c)}function Ta(a){var b,c=[],d=0;for(b in a)c[d++]=a[b];return c}function Ua(a){var b,c=[],d=0;for(b in a)c[d++]=b;return c}function Wa(a){for(var b,c,d=1;d<arguments.length;d++){c=arguments[d];for(b in c)a[b]=c[b];for(var e=0;e<Va.length;e++)b=Va[e],Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])}}function Za(){return D.concat.apply(D,arguments)}function $a(a){var b=a.length;if(b>0){for(var c=Array(b),d=0;b>d;d++)c[d]=a[d];return c}return[]}function ab(a){if("function"==typeof a.N)return a.N();if(u(a))return a.split("");if(ga(a)){for(var b=[],c=a.length,d=0;c>d;d++)b.push(a[d]);return b}return Ta(a)}function E(a,b,c){if("function"==typeof a.forEach)a.forEach(b,c);else if(ga(a)||u(a))Ya(a,b,c);else{var d;if("function"==typeof a.ka)d=a.ka();else if("function"!=typeof a.N)if(ga(a)||u(a)){d=[];for(var e=a.length,f=0;e>f;f++)d.push(f)}else d=Ua(a);else d=void 0;for(var e=ab(a),f=e.length,g=0;f>g;g++)b.call(c,e[g],d&&d[g],a)}}function bb(a){this.O={},this.j=[];var b=arguments.length;if(b>1){if(b%2)throw Error("Uneven number of arguments");for(var c=0;b>c;c+=2)this.set(arguments[c],arguments[c+1])}else if(a){a instanceof bb?(b=a.ka(),c=a.N()):(b=Ua(a),c=Ta(a));for(var d=0;d<b.length;d++)this.set(b[d],c[d])}}function cb(a){if(a.f!=a.j.length){for(var b=0,c=0;b<a.j.length;){var d=a.j[b];db(a.O,d)&&(a.j[c++]=d),b++}a.j.length=c}if(a.f!=a.j.length){for(var e={},c=b=0;b<a.j.length;)d=a.j[b],db(e,d)||(a.j[c++]=d,e[d]=1),b++;a.j.length=c}}function db(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function F(a,b){var c;if(a instanceof F)this.D=void 0!==b?b:a.D,eb(this,a.qa),c=a.ab,H(this),this.ab=c,fb(this,a.ja),gb(this,a.Ba),hb(this,a.H),ib(this,a.R.n()),c=a.Ma,H(this),this.Ma=c;else if(a&&(c=String(a).match(Qa))){this.D=!!b,eb(this,c[1]||"",!0);var d=c[2]||"";H(this),this.ab=d?decodeURIComponent(d):"",fb(this,c[3]||"",!0),gb(this,c[4]),hb(this,c[5]||"",!0),ib(this,c[6]||"",!0),c=c[7]||"",H(this),this.Ma=c?decodeURIComponent(c):""}else this.D=!!b,this.R=new jb(null,0,this.D)}function eb(a,b,c){H(a),a.qa=c?b?decodeURIComponent(b):"":b,a.qa&&(a.qa=a.qa.replace(/:$/,""))}function fb(a,b,c){H(a),a.ja=c?b?decodeURIComponent(b):"":b}function gb(a,b){if(H(a),b){if(b=Number(b),isNaN(b)||0>b)throw Error("Bad port number "+b);a.Ba=b}else a.Ba=null}function hb(a,b,c){H(a),a.H=c?b?decodeURIComponent(b):"":b}function ib(a,b,c){H(a),b instanceof jb?(a.R=b,a.R.qb(a.D)):(c||(b=kb(b,pb)),a.R=new jb(b,0,a.D))}function I(a,b,c){H(a),a.R.set(b,c)}function qb(a,b,c){H(a),s(c)||(c=[String(c)]),rb(a.R,b,c)}function J(a){return H(a),I(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^x()).toString(36)),a}function H(a){if(a.mc)throw Error("Tried to modify a read-only Uri")}function sb(a,b,c,d){var e=new F(null,void 0);return a&&eb(e,a),b&&fb(e,b),c&&gb(e,c),d&&hb(e,d),e}function kb(a,b){return u(a)?encodeURI(a).replace(b,tb):null}function tb(a){return a=a.charCodeAt(0),"%"+(15&a>>4).toString(16)+(15&a).toString(16)}function jb(a,b,c){this.C=a||null,this.D=!!c}function K(a){if(!a.i&&(a.i=new bb,a.f=0,a.C))for(var b=a.C.split("&"),c=0;c<b.length;c++){var d=b[c].indexOf("="),e=null,f=null;d>=0?(e=b[c].substring(0,d),f=b[c].substring(d+1)):e=b[c],e=decodeURIComponent(e.replace(/\+/g," ")),e=L(a,e),a.add(e,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}function rb(a,b,c){a.remove(b),0<c.length&&(a.C=null,a.i.set(L(a,b),$a(c)),a.f+=c.length)}function L(a,b){var c=String(b);return a.D&&(c=c.toLowerCase()),c}function ub(){}function wb(){}function xb(a){return(a=yb(a))?new ActiveXObject(a):new XMLHttpRequest}function zb(a){var b={};return yb(a)&&(b[0]=!0,b[1]=!0),b}function yb(a){if(!a.Gb&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.Gb=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return a.Gb}function M(){0!=Ab&&(this.Gc=Error().stack,Bb[v(this)]=this)}function N(a,b){this.type=a,this.currentTarget=this.target=b}function Db(){}function Gb(a){return Gb[" "](a),a}function Hb(a,b){a&&this.Oa(a,b)}function Jb(a,b,c,d,e){if(s(b)){for(var f=0;f<b.length;f++)Jb(a,b[f],c,d,e);return null}a:{if(!b)throw Error("Invalid event type");d=!!d;var g=O;b in g||(g[b]={f:0,t:0}),g=g[b],d in g||(g[d]={f:0,t:0},g.f++);var h,g=g[d],f=v(a);if(g.t++,g[f]){h=g[f];for(var i=0;i<h.length;i++)if(g=h[i],g.W==c&&g.lb==e){if(g.ea)break;h[i].Ha=!1,a=h[i];break a}}else h=g[f]=[],g.f++;i=Kb(),g=new Db,g.Oa(c,i,a,b,d,e),g.Ha=!1,i.src=a,i.W=g,h.push(g),P[f]||(P[f]=[]),P[f].push(g),a.addEventListener?a!=q&&a.wb||a.addEventListener(b,i,d):a.attachEvent(b in Ib?Ib[b]:Ib[b]="on"+b,i),a=g}return b=a.key,Sa[b]=a,b}function Kb(){var a=Lb,b=Eb?function(c){return a.call(b.src,b.W,c)}:function(c){return c=a.call(b.src,b.W,c),c?void 0:c};return b}function Mb(a,b,c,d,e){if(s(b))for(var f=0;f<b.length;f++)Mb(a,b[f],c,d,e);else if(d=!!d,f=O,a=b in f&&(f=f[b],d in f&&(f=f[d],a=v(a),f[a]))?f[a]:null,a)for(f=0;f<a.length;f++)if(a[f].W==c&&a[f].capture==d&&a[f].lb==e){Nb(a[f].key);break}}function Nb(a){var b=Sa[a];if(!b||b.ea)return!1;var c=b.src,d=b.type,e=b.Ub,f=b.capture;if(c.removeEventListener?c!=q&&c.wb||c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in Ib?Ib[d]:Ib[d]="on"+d,e),c=v(c),P[c]){var e=P[c],g=Xa(e,b);g>=0&&D.splice.call(e,g,1),0==e.length&&delete P[c]}return b.ea=!0,(b=O[d][f][c])&&(b.Mb=!0,Ob(d,f,c,b)),delete Sa[a],!0}function Ob(a,b,c,d){if(!d.Qa&&d.Mb){for(var e=0,f=0;e<d.length;e++)d[e].ea?d[e].Ub.src=null:(e!=f&&(d[f]=d[e]),f++);d.length=f,d.Mb=!1,0==f&&(delete O[a][b][c],O[a][b].f--,0==O[a][b].f&&(delete O[a][b],O[a].f--),0==O[a].f&&delete O[a])}}function Pb(a){var b=0;if(null!=a){if(a=v(a),P[a]){a=P[a];for(var c=a.length-1;c>=0;c--)Nb(a[c].key),b++}}else Ra(function(a,c){Nb(c),b++})}function Qb(a,b,c,d,e){var f=1;if(b=v(b),a[b]){var g=--a.t,h=a[b];h.Qa?h.Qa++:h.Qa=1;try{for(var i=h.length,j=0;i>j;j++){var k=h[j];k&&!k.ea&&(f&=!1!==Rb(k,e))}}finally{a.t=Math.max(g,a.t),h.Qa--,Ob(c,d,b,h)}}return Boolean(f)}function Rb(a,b){return a.Ha&&Nb(a.key),a.handleEvent(b)}function Lb(a,b){if(a.ea)return!0;var c=a.type,d=O;if(!(c in d))return!0;var e,f,d=d[c];if(!Eb){e=b||da("window.event");var g=!0 in d,h=!1 in d;if(g){if(0>e.keyCode||void 0!=e.returnValue)return!0;a:{var i=!1;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(j){i=!0}(i||void 0==e.returnValue)&&(e.returnValue=!0)}}i=new Hb,i.Oa(e,this),e=!0;try{if(g){for(var k=[],l=i.currentTarget;l;l=l.parentNode)k.push(l);f=d[!0],f.t=f.f;for(var m=k.length-1;!i.na&&m>=0&&f.t;m--)i.currentTarget=k[m],e&=Qb(f,k[m],c,!0,i);if(h)for(f=d[!1],f.t=f.f,m=0;!i.na&&m<k.length&&f.t;m++)i.currentTarget=k[m],e&=Qb(f,k[m],c,!1,i)}else e=Rb(a,i)}finally{k&&(k.length=0)}return e}return c=new Hb(b,this),e=Rb(a,c)}function Sb(){M.call(this)}function Tb(a,b){M.call(this),this.da=a||1,this.Ea=b||q,this.eb=w(this.Ec,this),this.ob=x()}function Vb(a){M.call(this),this.e=a,this.j=[]}function Xb(a,b,c,d){s(c)||(Wb[0]=c,c=Wb);for(var e=0;e<c.length;e++){var f=Jb(b,c[e],d||a,!1,a.e||a);a.j.push(f)}}function Yb(a,b,c){M.call(this),this.nc=a,this.da=b,this.e=c,this.hc=w(this.tc,this)}function Zb(a){var b;b=a.hc;var c=a.da;if(!ha(b)){if(!b||"function"!=typeof b.handleEvent)throw Error("Invalid listener argument");b=w(b.handleEvent,b)}b=c>2147483647?-1:q.setTimeout(b,c||0),a.r=b,a.nc.call(a.e)}function Q(a,b,c,d,e){this.b=a,this.a=b,this.Z=c,this.B=d,this.Ca=e||1,this.Da=$b,this.jb=new Vb(this),this.Sa=new Tb,this.Sa.setInterval(ac)}function bc(a,b){switch(a){case 0:return"Non-200 return code ("+b+")";case 1:return"XMLHTTP failure (no data)";case 2:return"HttpConnection timeout";default:return"Unknown error"}}function ec(){return!A||A&&Ma>=10}function fc(a,b,c){a.sa=1,a.T=J(b.n()),a.X=c,a.xb=!0,gc(a,null)}function hc(a,b,c,d,e){a.sa=1,a.T=J(b.n()),a.X=null,a.xb=c,e&&(a.Xb=!1),gc(a,d)}function gc(a,b){a.pa=x(),ic(a),a.w=a.T.n(),qb(a.w,"t",a.Ca),a.Fa=0,a.l=a.b.hb(a.b.Ya()?b:null),0<a.oa&&(a.Ta=new Yb(w(a.dc,a,a.l),a.oa)),Xb(a.jb,a.l,"readystatechange",a.Ac);var c;if(a.v){c=a.v;var d,e={};for(d in c)e[d]=c[d];c=e}else c={};if(a.X?(a.ta="POST",c["Content-Type"]="application/x-www-form-urlencoded",a.l.send(a.w,a.ta,a.X,c)):(a.ta="GET",a.Xb&&!B&&(c.Connection="close"),a.l.send(a.w,a.ta,null,c)),a.b.G(jc),e=a.X)for(c="",e=e.split("&"),d=0;d<e.length;d++){var f=e[d].split("=");if(1<f.length){var g=f[0],f=f[1],h=g.split("_");c=2<=h.length&&"type"==h[1]?c+(g+"="+f+"&"):c+(g+"=redacted&")}}else c=null;a.a.info("XMLHTTP REQ ("+a.B+") [attempt "+a.Ca+"]: "+a.ta+"\n"+a.w+"\n"+c)}function rc(a,b,c){for(var d=!0;!a.aa&&a.Fa<c.length;){var e=yc(a,c);if(e==dc){4==b&&(a.p=4,T(zc),d=!1),sc(a.a,a.B,null,"[Incomplete Response]");break}if(e==cc){a.p=4,T(Ac),sc(a.a,a.B,c,"[Invalid Chunk]"),d=!1;break}sc(a.a,a.B,e,null),tc(a,e)}4==b&&0==c.length&&(a.p=1,T(Bc),d=!1),a.J=a.J&&d,d||(sc(a.a,a.B,c,"[Invalid Chunked Response]"),S(a),wc(a))}function yc(a,b){var c=a.Fa,d=b.indexOf("\n",c);if(-1==d)return dc;if(c=Number(b.substring(c,d)),isNaN(c))return cc;if(d+=1,d+c>b.length)return dc;var e=b.substr(d,c);return a.Fa=d+c,e}function Cc(a,b){a.pa=x(),ic(a);var c=b?window.location.hostname:"";a.w=a.T.n(),I(a.w,"DOMAIN",c),I(a.w,"t",a.Ca);try{a.K=new ActiveXObject("htmlfile")}catch(d){return a.a.I("ActiveX blocked"),S(a),a.p=7,T(Dc),wc(a),void 0}var e="<html><body>";b&&(e+='<script>document.domain="'+c+'"</script>'),e+="</body></html>",a.K.open(),a.K.write(e),a.K.close(),a.K.parentWindow.m=w(a.wc,a),a.K.parentWindow.d=w(a.Sb,a,!0),a.K.parentWindow.rpcClose=w(a.Sb,a,!1),c=a.K.createElement("div"),a.K.parentWindow.document.body.appendChild(c),c.innerHTML='<iframe src="'+a.w+'"></iframe>',a.a.info("TRIDENT REQ ("+a.B+") [ attempt "+a.Ca+"]: GET\n"+a.w),a.b.G(jc)}function ic(a){a.sb=x()+a.Da,Gc(a,a.Da)}function Gc(a,b){if(null!=a.ua)throw Error("WatchDog timer not null");a.ua=U(w(a.xc,a),b)}function qc(a){a.ua&&(q.clearTimeout(a.ua),a.ua=null)}function wc(a){a.b.Hb()||a.aa||a.b.ma(a)}function S(a){qc(a);var b=a.Ta;b&&"function"==typeof b.Ia&&b.Ia(),a.Ta=null,a.Sa.stop(),b=a.jb,Ya(b.j,Nb),b.j.length=0,a.l&&(b=a.l,a.l=null,b.abort(),b.Ia()),a.K&&(a.K=null)}function tc(a,b){try{a.b.Pb(a,b),a.b.G(Fc)}catch(c){xc(a.a,c,"Error in httprequest callback")}}function Ic(a){if(a=String(a),/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a)}function Jc(a){return eval("("+a+")")}function Kc(a){var b=[];return Lc(new Mc(void 0),a,b),b.join("")}function Mc(a){this.Va=a}function Lc(a,b,c){switch(typeof b){case"string":Nc(b,c);break;case"number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case"boolean":c.push(b);break;case"undefined":c.push("null");break;case"object":if(null==b){c.push("null");break}if(s(b)){var d=b.length;c.push("[");for(var e="",f=0;d>f;f++)c.push(e),e=b[f],Lc(a,a.Va?a.Va.call(b,String(f),e):e,c),e=",";c.push("]");break}c.push("{"),d="";for(f in b)Object.prototype.hasOwnProperty.call(b,f)&&(e=b[f],"function"!=typeof e&&(c.push(d),Nc(f,c),c.push(":"),Lc(a,a.Va?a.Va.call(b,f,e):e,c),d=","));c.push("}");break;case"function":break;default:throw Error("Unknown type: "+typeof b)}}function Nc(a,b){b.push('"',a.replace(Pc,function(a){if(a in Oc)return Oc[a];var b=a.charCodeAt(0),c="\\u";return 16>b?c+="000":256>b?c+="00":4096>b&&(c+="0"),Oc[a]=c+b.toString(16)}),'"')}function Qc(a){return Rc(a||arguments.callee.caller,[])}function Rc(a,b){var c=[];if(0<=Xa(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Sc(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){e>0&&c.push(", ");var f;switch(f=d[e],typeof f){case"object":f=f?"object":"null";break;case"string":break;case"number":f=String(f);break;case"boolean":f=f?"true":"false";break;case"function":f=(f=Sc(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"..."),c.push(f)}b.push(a),c.push(")\n");try{c.push(Rc(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Sc(a){if(Tc[a])return Tc[a];if(a=String(a),!Tc[a]){var b=/function ([^\(]+)/.exec(a);Tc[a]=b?b[1]:"[Anonymous]"}return Tc[a]}function Uc(a,b,c,d,e){this.reset(a,b,c,d,e)}function V(a){this.pc=a}function Wc(a,b){this.name=a,this.value=b}function bd(a){return a.za?a.za:a.Ra?bd(a.Ra):(Pa("Root logger has no level set."),null)}function W(a,b){a.log(ad,b,void 0)}function ed(a){dd||(dd=new V(""),cd[""]=dd,dd.Yb($c));var b;if(!(b=cd[a])){b=new V(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=ed(a.substr(0,c));c.fb||(c.fb={}),c.fb[d]=b,b.Ra=c,cd[a]=b}return b}function X(){this.q=ed("goog.net.BrowserChannel")}function sc(a,b,c,d){a.info("XMLHTTP TEXT ("+b+"): "+Ec(a,c)+(d?" "+d:""))}function xc(a,b,c){a.I((c||"Exception")+b)}function Ec(a,b){if(!b||b==fd)return b;try{var c=Jc(b);if(c)for(var d=0;d<c.length;d++)if(s(c[d])){var e=c[d];if(!(2>e.length)){var f=e[1];if(s(f)&&!(1>f.length)){var g=f[0];if("noop"!=g&&"stop"!=g)for(var h=1;h<f.length;h++)f[h]=""}}}return Kc(c)}catch(i){return a.debug("Exception parsing expected JS array - probably was not JS"),b}}function gd(a,b){this.Oc=new Mc(a),this.P=b?Jc:Ic}function hd(a){M.call(this),this.headers=new bb,this.va=a||null}function jd(a,b){a.S=!1,a.g&&(a.ca=!0,a.g.abort(),a.ca=!1),a.p=b,a.la=5,kd(a),ld(a)}function kd(a){a.ib||(a.ib=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}function md(a){if(a.S&&"undefined"!=typeof ca)if(a.bb[1]&&4==R(a)&&2==kc(a))W(a.q,Y(a,"Local request error detected and ignored"));else if(a.Na&&4==R(a))q.setTimeout(w(a.Ob,a),0);else if(a.dispatchEvent("readystatechange"),4==R(a)){W(a.q,Y(a,"Request complete")),a.S=!1;try{var b,c,d=kc(a);a:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:c=!0;break a;default:c=!1}if(!(b=c)){var e;if(e=0===d){var f=String(a.Pa).match(Qa)[1]||null;if(!f&&self.location)var g=self.location.protocol,f=g.substr(0,g.length-1);e=!id.test(f?f.toLowerCase():"")}b=e}if(b)a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.la=6;var h;try{h=2<R(a)?a.g.statusText:""}catch(i){W(a.q,"Can not get status: "+i.message),h=""}a.p=h+" ["+kc(a)+"]",kd(a)}}finally{ld(a)}}}function ld(a,b){if(a.g){var c=a.g,d=a.bb[0]?ea:null;a.g=null,a.bb=null,a.fa&&(q.clearTimeout(a.fa),a.fa=null),b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){a.q.I("Problem encountered resetting onreadystatechange: "+e.message)}}}function R(a){return a.g?a.g.readyState:0}function kc(a){try{return 2<R(a)?a.g.status:-1}catch(b){return a.q.$("Can not get status: "+b.message),-1}}function lc(a){try{return a.g?a.g.responseText:""}catch(b){return W(a.q,"Can not get responseText: "+b.message),""}}function Y(a,b){return b+" ["+a.Jb+" "+a.Pa+" "+kc(a)+"]"}function nd(){this.Vb=x()}function od(a,b,c,d,e){if((new X).debug("TestLoadImageWithRetries: "+e),0==d)c(!1);else{var f=e||0;d--,pd(a,b,function(e){e?c(!0):q.setTimeout(function(){od(a,b,c,d,f)},f)})}}function pd(a,b,c){function d(a,b){return function(){try{e.debug("TestLoadImage: "+b),f.onload=null,f.onerror=null,f.onabort=null,f.ontimeout=null,q.clearTimeout(g),c(a)}catch(d){xc(e,d)}}}var e=new X;e.debug("TestLoadImage: loading "+a);var f=new Image,g=null;f.onload=d(!0,"loaded"),f.onerror=d(!1,"error"),f.onabort=d(!1,"abort"),f.ontimeout=d(!1,"timeout"),g=q.setTimeout(function(){f.ontimeout&&f.ontimeout()},b),f.src=a}function qd(a,b){this.b=a,this.a=b,this.P=new gd(null,!0)}function td(a){var b=vd(a.b,a.wa,"/mail/images/cleardot.gif");J(b),od(b.toString(),5e3,w(a.ic,a),3,2e3),a.G(jc)
}function ud(a){a.a.debug("TestConnection: starting stage 2"),a.A=new Q(a,a.a,void 0,void 0,void 0),a.A.Y(a.v);var b=xd(a.b,a.L,a.H);if(T(yd),ec())qb(b,"TYPE","xmlhttp"),hc(a.A,b,!1,a.L,!1);else{qb(b,"TYPE","html");var c=a.A;a=Boolean(a.L),c.sa=3,c.T=J(b.n()),Cc(c,a)}}function Id(a,b){this.vb=a||null,this.c=Jd,this.s=[],this.Q=[],this.a=new X,this.P=new gd(null,!0),this.Cb=b||null}function Kd(a,b){this.Lb=a,this.map=b,this.Fc=null}function Md(a,b){N.call(this,"statevent",a),this.Pc=b}function Nd(a,b,c,d){N.call(this,"timingevent",a),this.size=b,this.Nc=c,this.Mc=d}function Od(a,b){N.call(this,"serverreachability",a),this.Lc=b}function Qd(a){a.U&&(a.U.abort(),a.U=null),a.k&&(a.k.cancel(),a.k=null),a.M&&(q.clearTimeout(a.M),a.M=null),Ud(a),a.o&&(a.o.cancel(),a.o=null),a.F&&(q.clearTimeout(a.F),a.F=null)}function Vd(a){a.o||a.F||(a.F=U(w(a.Rb,a),0),a.V=0)}function Xd(a,b){var c,d;b?6<a.ha?(a.s=a.Q.concat(a.s),a.Q.length=0,c=a.Aa-1,d=Wd(a)):(c=b.B,d=b.X):(c=a.Aa++,d=Wd(a));var e=a.La.n();I(e,"SID",a.Z),I(e,"RID",c),I(e,"AID",a.ya),Rd(a,e),c=new Q(a,a.a,a.Z,c,a.V+1),c.Y(a.v),c.setTimeout(Math.round(.5*a.Db)+Math.round(.5*a.Db*Math.random())),a.o=c,fc(c,e,d)}function Rd(a,b){if(a.e){var c=a.e.getAdditionalParams(a);c&&E(c,function(a,c){I(b,c,a)})}}function Wd(a){var b,c=Math.min(a.s.length,1e3),d=["count="+c];6<a.ha&&c>0?(b=a.s[0].Lb,d.push("ofs="+b)):b=0;for(var e=0;c>e;e++){var f=a.s[e].Lb,g=a.s[e].map,f=6>=a.ha?e:f-b;try{E(g,function(a,b){d.push("req"+f+"_"+b+"="+encodeURIComponent(a))})}catch(h){d.push("req"+f+"_type="+encodeURIComponent("_badmap")),a.e&&a.e.badMapError(a,g)}}return a.Q=a.Q.concat(a.s.splice(0,c)),d.join("&")}function Yd(a){a.k||a.M||(a.tb=1,a.M=U(w(a.Qb,a),0),a.ga=0)}function Zd(a){return a.k||a.M?(a.a.I("Request already in progress"),!1):3<=a.ga?!1:(a.a.debug("Going to retry GET"),a.tb++,a.M=U(w(a.Qb,a),$d(a,a.ga)),a.ga++,!0)}function Pd(a){if(a.e){var b=a.e.okToMakeRequest(a);if(0!=b)return a.a.debug("Handler returned error code from okToMakeRequest"),Z(a,b),!1}return!0}function Dd(a,b,c){a.a.debug("Test Connection Finished"),a.rb=a.ec&&c,a.h=b.h,a.a.debug("connectChannel_()"),a.jc(Jd,0),a.La=rd(a,a.H),Vd(a)}function zd(a,b){a.a.debug("Test Connection Failed"),a.h=b.h,Z(a,2)}function Ud(a){null!=a.ba&&(q.clearTimeout(a.ba),a.ba=null)}function $d(a,b){var c=a.gc+Math.floor(Math.random()*a.Bc);return a.isActive()||(a.a.debug("Inactive channel"),c*=2),c*b}function Z(a,b){if(a.a.info("Error code "+b),2==b||9==b){var c=null;a.e&&(c=a.e.getNetworkTestImageUri(a));var d=w(a.Dc,a);c||(c=new F("//www.google.com/images/cleardot.gif"),J(c)),pd(c.toString(),1e4,d)}else T(2);ae(a,b)}function ae(a,b){a.a.debug("HttpChannel: error - "+b),a.c=0,a.e&&a.e.channelError(a,b),Td(a),Qd(a)}function Td(a){if(a.c=0,a.h=-1,a.e)if(0==a.Q.length&&0==a.s.length)a.e.channelClosed(a);else{a.a.debug("Number of undelivered maps, pending: "+a.Q.length+", outgoing: "+a.s.length);var b=$a(a.Q),c=$a(a.s);a.Q.length=0,a.s.length=0,a.e.channelClosed(a,b,c)}}function rd(a,b){var c=vd(a,null,b);return a.a.debug("GetForwardChannelUri: "+c),c}function xd(a,b,c){return b=vd(a,a.Ya()?b:null,c),a.a.debug("GetBackChannelUri: "+b),b}function vd(a,b,c){var d=c instanceof F?c.n():new F(c,void 0);if(""!=d.ja)b&&fb(d,b+"."+d.ja),gb(d,d.Ba);else var e=window.location,d=sb(e.protocol,b?b+"."+e.hostname:e.hostname,e.port,c);return a.xa&&E(a.xa,function(a,b){I(d,b,a)}),I(d,"VER",a.ha),Rd(a,d),d}function U(a,b){if(!ha(a))throw Error("Fn must not be null and must be a function");return q.setTimeout(function(){a()},b)}function T(a){Ld.dispatchEvent(new Md(Ld,a))}function be(){}var p,ca=ca||{},q=this,ia="closure_uid_"+(1e9*Math.random()>>>0),ja=0,x=Date.now||function(){return+new Date},pa=/&/g,qa=/</g,ra=/>/g,sa=/\"/g,oa=/[&<>\"]/,z,ta,ua,va;va=ua=ta=z=!1;var xa;if(xa=wa()){var ya=q.navigator;z=0==xa.indexOf("Opera"),ta=!z&&-1!=xa.indexOf("MSIE"),ua=!z&&-1!=xa.indexOf("WebKit"),va=!z&&!ua&&"Gecko"==ya.product}var za=z,A=ta,Aa=va,B=ua,Ba=q.navigator,Ca=-1!=(Ba&&Ba.platform||"").indexOf("Mac"),Ea;a:{var Fa="",Ga;if(za&&q.opera)var Ha=q.opera.version,Fa="function"==typeof Ha?Ha():Ha;else if(Aa?Ga=/rv\:([^\);]+)(\)|;)/:A?Ga=/MSIE\s+([^\);]+)(\)|;)/:B&&(Ga=/WebKit\/(\S+)/),Ga)var Ia=Ga.exec(wa()),Fa=Ia?Ia[1]:"";if(A){var Ja=Da();if(Ja>parseFloat(Fa)){Ea=String(Ja);break a}}Ea=Fa}var Ka={},La=q.document,Ma=La&&A?Da()||("CSS1Compat"==La.compatMode?parseInt(Ea,10):5):void 0;y(Na,Error),Na.prototype.name="CustomError",y(Oa,Na),Oa.prototype.name="AssertionError";var Qa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),Va="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),D=Array.prototype,Xa=D.indexOf?function(a,b,c){return D.indexOf.call(a,b,c)}:function(a,b,c){if(c=null==c?0:0>c?Math.max(0,a.length+c):c,u(a))return u(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ya=D.forEach?function(a,b,c){D.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=u(a)?a.split(""):a,f=0;d>f;f++)f in e&&b.call(c,e[f],f,a)};p=bb.prototype,p.f=0,p.bc=0,p.N=function(){cb(this);for(var a=[],b=0;b<this.j.length;b++)a.push(this.O[this.j[b]]);return a},p.ka=function(){return cb(this),this.j.concat()},p.ia=function(a){return db(this.O,a)},p.remove=function(a){return db(this.O,a)?(delete this.O[a],this.f--,this.bc++,this.j.length>2*this.f&&cb(this),!0):!1},p.get=function(a,b){return db(this.O,a)?this.O[a]:b},p.set=function(a,b){db(this.O,a)||(this.f++,this.j.push(a),this.bc++),this.O[a]=b},p.n=function(){return new bb(this)},p=F.prototype,p.qa="",p.ab="",p.ja="",p.Ba=null,p.H="",p.Ma="",p.mc=!1,p.D=!1,p.toString=function(){var a=[],b=this.qa;if(b&&a.push(kb(b,lb),":"),b=this.ja){a.push("//");var c=this.ab;c&&a.push(kb(c,lb),"@"),a.push(encodeURIComponent(String(b))),b=this.Ba,null!=b&&a.push(":",String(b))}return(b=this.H)&&(this.ja&&"/"!=b.charAt(0)&&a.push("/"),a.push(kb(b,"/"==b.charAt(0)?mb:nb))),(b=this.R.toString())&&a.push("?",b),(b=this.Ma)&&a.push("#",kb(b,ob)),a.join("")},p.n=function(){return new F(this)},p.qb=function(a){return this.D=a,this.R&&this.R.qb(a),this};var lb=/[#\/\?@]/g,nb=/[\#\?:]/g,mb=/[\#\?]/g,pb=/[\#\?@]/g,ob=/#/g;p=jb.prototype,p.i=null,p.f=null,p.add=function(a,b){K(this),this.C=null,a=L(this,a);var c=this.i.get(a);return c||this.i.set(a,c=[]),c.push(b),this.f++,this},p.remove=function(a){return K(this),a=L(this,a),this.i.ia(a)?(this.C=null,this.f-=this.i.get(a).length,this.i.remove(a)):!1},p.ia=function(a){return K(this),a=L(this,a),this.i.ia(a)},p.ka=function(){K(this);for(var a=this.i.N(),b=this.i.ka(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c},p.N=function(a){K(this);var b=[];if(a)this.ia(a)&&(b=Za(b,this.i.get(L(this,a))));else{a=this.i.N();for(var c=0;c<a.length;c++)b=Za(b,a[c])}return b},p.set=function(a,b){return K(this),this.C=null,a=L(this,a),this.ia(a)&&(this.f-=this.i.get(a).length),this.i.set(a,[b]),this.f++,this},p.get=function(a,b){var c=a?this.N(a):[];return 0<c.length?String(c[0]):b},p.toString=function(){if(this.C)return this.C;if(!this.i)return"";for(var a=[],b=this.i.ka(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.N(d),f=0;f<d.length;f++){var g=e;""!==d[f]&&(g+="="+encodeURIComponent(String(d[f]))),a.push(g)}return this.C=a.join("&")},p.n=function(){var a=new jb;return a.C=this.C,this.i&&(a.i=this.i.n(),a.f=this.f),a},p.qb=function(a){a&&!this.D&&(K(this),this.C=null,E(this.i,function(a,b){var c=b.toLowerCase();b!=c&&(this.remove(b),rb(this,c,a))},this)),this.D=a},ub.prototype.Ga=null;var vb;y(wb,ub),vb=new wb;var Ab=0,Bb={};M.prototype.yb=!1,M.prototype.Ia=function(){if(!this.yb&&(this.yb=!0,this.u(),0!=Ab)){var a=v(this);delete Bb[a]}},M.prototype.u=function(){if(this.Nb)for(;this.Nb.length;)this.Nb.shift()()},p=N.prototype,p.u=e(),p.Ia=e(),p.na=!1,p.defaultPrevented=!1,p.Wa=!0,p.preventDefault=function(){this.defaultPrevented=!0,this.Wa=!1};var Cb=0;p=Db.prototype,p.key=0,p.ea=!1,p.Ha=!1,p.Oa=function(a,b,c,d,e,f){if(ha(a))this.Ib=!0;else{if(!(a&&a.handleEvent&&ha(a.handleEvent)))throw Error("Invalid listener argument");this.Ib=!1}this.W=a,this.Ub=b,this.src=c,this.type=d,this.capture=!!e,this.lb=f,this.Ha=!1,this.key=++Cb,this.ea=!1},p.handleEvent=function(a){return this.Ib?this.W.call(this.lb||this.src,a):this.W.handleEvent.call(this.W,a)};var Eb=!A||A&&Ma>=9,Fb=A&&!C("9");!B||C("528"),Aa&&C("1.9b")||A&&C("8")||za&&C("9.5")||B&&C("528"),Aa&&!C("8")||A&&C("9"),Gb[" "]=ea,y(Hb,N),p=Hb.prototype,p.target=null,p.relatedTarget=null,p.offsetX=0,p.offsetY=0,p.clientX=0,p.clientY=0,p.screenX=0,p.screenY=0,p.button=0,p.keyCode=0,p.charCode=0,p.ctrlKey=!1,p.altKey=!1,p.shiftKey=!1,p.metaKey=!1,p.yc=!1,p.zb=null,p.Oa=function(a,b){var c=this.type=a.type;N.call(this,c),this.target=a.target||a.srcElement,this.currentTarget=b;var d=a.relatedTarget;if(d){if(Aa){var e;a:{try{Gb(d.nodeName),e=!0;break a}catch(f){}e=!1}e||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d,this.offsetX=B||void 0!==a.offsetX?a.offsetX:a.layerX,this.offsetY=B||void 0!==a.offsetY?a.offsetY:a.layerY,this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0,this.button=a.button,this.keyCode=a.keyCode||0,this.charCode=a.charCode||("keypress"==c?a.keyCode:0),this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.yc=Ca?a.metaKey:a.ctrlKey,this.state=a.state,this.zb=a,a.defaultPrevented&&this.preventDefault(),delete this.na},p.preventDefault=function(){Hb.ra.preventDefault.call(this);var a=this.zb;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Fb)try{(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)&&(a.keyCode=-1)}catch(b){}},p.u=e();var Sa={},O={},P={},Ib={};y(Sb,M),p=Sb.prototype,p.wb=!0,p.pb=null,p.addEventListener=function(a,b,c,d){Jb(this,a,b,c,d)},p.removeEventListener=function(a,b,c,d){Mb(this,a,b,c,d)},p.dispatchEvent=function(a){var b=a.type||a,c=O;if(b in c){if(u(a))a=new N(a,this);else if(a instanceof N)a.target=a.target||this;else{var d=a;a=new N(b,this),Wa(a,d)}var e,f,d=1,c=c[b],b=!0 in c;if(b){for(e=[],f=this;f;f=f.pb)e.push(f);f=c[!0],f.t=f.f;for(var g=e.length-1;!a.na&&g>=0&&f.t;g--)a.currentTarget=e[g],d&=Qb(f,e[g],a.type,!0,a)&&0!=a.Wa}if(!1 in c)if(f=c[!1],f.t=f.f,b)for(g=0;!a.na&&g<e.length&&f.t;g++)a.currentTarget=e[g],d&=Qb(f,e[g],a.type,!1,a)&&0!=a.Wa;else for(e=this;!a.na&&e&&f.t;e=e.pb)a.currentTarget=e,d&=Qb(f,e,a.type,!1,a)&&0!=a.Wa;a=Boolean(d)}else a=!0;return a},p.u=function(){Sb.ra.u.call(this),Pb(this),this.pb=null},y(Tb,Sb),p=Tb.prototype,p.enabled=!1,p.r=null,p.setInterval=function(a){this.da=a,this.r&&this.enabled?(this.stop(),this.start()):this.r&&this.stop()},p.Ec=function(){if(this.enabled){var a=x()-this.ob;a>0&&a<.8*this.da?this.r=this.Ea.setTimeout(this.eb,this.da-a):(this.dispatchEvent(Ub),this.enabled&&(this.r=this.Ea.setTimeout(this.eb,this.da),this.ob=x()))}},p.start=function(){this.enabled=!0,this.r||(this.r=this.Ea.setTimeout(this.eb,this.da),this.ob=x())},p.stop=function(){this.enabled=!1,this.r&&(this.Ea.clearTimeout(this.r),this.r=null)},p.u=function(){Tb.ra.u.call(this),this.stop(),delete this.Ea};var Ub="tick";y(Vb,M);var Wb=[];Vb.prototype.u=function(){Vb.ra.u.call(this),Ya(this.j,Nb),this.j.length=0},Vb.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},y(Yb,M),p=Yb.prototype,p.Xa=!1,p.Tb=0,p.r=null,p.stop=function(){this.r&&(q.clearTimeout(this.r),this.r=null,this.Xa=!1)},p.u=function(){Yb.ra.u.call(this),this.stop()},p.tc=function(){this.r=null,this.Xa&&!this.Tb&&(this.Xa=!1,Zb(this))},p=Q.prototype,p.v=null,p.J=!1,p.ua=null,p.sb=null,p.pa=null,p.sa=null,p.T=null,p.w=null,p.X=null,p.l=null,p.Fa=0,p.K=null,p.ta=null,p.p=null,p.h=-1,p.Xb=!0,p.aa=!1,p.oa=0,p.Ta=null;var $b=45e3,ac=250,cc={},dc={};p=Q.prototype,p.Y=m("v"),p.setTimeout=m("Da"),p.$b=m("oa"),p.Ac=function(a){a=a.target;var b=this.Ta;b&&3==R(a)?(this.a.debug("Throttling readystatechange."),b.r||b.Tb?b.Xa=!0:Zb(b)):this.dc(a)},p.dc=function(a){try{if(a==this.l)a:{var b=R(this.l),c=this.l.la,d=kc(this.l);if(!ec()||B&&!C("420+")){if(4>b)break a}else if(3>b||3==b&&!za&&!lc(this.l))break a;this.aa||4!=b||c==mc||(c==nc||0>=d?this.b.G(oc):this.b.G(pc)),qc(this);var e=kc(this.l);this.h=e;var f=lc(this.l);f||this.a.debug("No response text for uri "+this.w+" status "+e),this.J=200==e,this.a.info("XMLHTTP RESP ("+this.B+") [ attempt "+this.Ca+"]: "+this.ta+"\n"+this.w+"\n"+b+" "+e),this.J?(4==b&&S(this),this.xb?(rc(this,b,f),za&&3==b&&(Xb(this.jb,this.Sa,Ub,this.zc),this.Sa.start())):(sc(this.a,this.B,f,null),tc(this,f)),this.J&&!this.aa&&(4==b?this.b.ma(this):(this.J=!1,ic(this)))):(400==e&&0<f.indexOf("Unknown SID")?(this.p=3,T(uc),this.a.$("XMLHTTP Unknown SID ("+this.B+")")):(this.p=0,T(vc),this.a.$("XMLHTTP Bad status "+e+" ("+this.B+")")),S(this),wc(this))}else this.a.$("Called back with an unexpected xmlhttp")}catch(g){this.a.debug("Failed call to OnXmlHttpReadyStateChanged_"),this.l&&lc(this.l)?xc(this.a,g,"ResponseText: "+lc(this.l)):xc(this.a,g,"No response text")}finally{}},p.zc=function(){var a=R(this.l),b=lc(this.l);this.Fa<b.length&&(qc(this),rc(this,a,b),this.J&&4!=a&&ic(this))},p.wc=function(a){U(w(this.vc,this,a),0)},p.vc=function(a){if(!this.aa){var b=this.a;b.info("TRIDENT TEXT ("+this.B+"): "+Ec(b,a)),qc(this),tc(this,a),ic(this)}},p.Sb=function(a){U(w(this.uc,this,a),0)},p.uc=function(a){this.aa||(this.a.info("TRIDENT TEXT ("+this.B+"): "+a?"success":"failure"),S(this),this.J=a,this.b.ma(this),this.b.G(Fc))},p.lc=function(){qc(this),this.b.ma(this)},p.cancel=function(){this.aa=!0,S(this)},p.xc=function(){this.ua=null;var a=x();0<=a-this.sb?(this.J&&this.a.I("Received watchdog timeout even though request loaded successfully"),this.a.info("TIMEOUT: "+this.w),2!=this.sa&&this.b.G(oc),S(this),this.p=2,T(Hc),wc(this)):(this.a.$("WatchDog timer called too early"),Gc(this,this.sb-a))},p.Eb=aa("p");var Oc={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","":"\\u000b"},Pc=/\uffff/.test("")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,Tc={};Uc.prototype.Cc=0,Uc.prototype.Bb=null,Uc.prototype.Ab=null;var Vc=0;Uc.prototype.reset=function(a,b,c,d,e){this.Cc="number"==typeof e?e:Vc++,this.Qc=d||x(),this.za=a,this.oc=b,this.Ic=c,delete this.Bb,delete this.Ab},Uc.prototype.Yb=m("za"),V.prototype.Ra=null,V.prototype.za=null,V.prototype.fb=null,V.prototype.Fb=null,Wc.prototype.toString=aa("name");var Xc=new Wc("SEVERE",1e3),Yc=new Wc("WARNING",900),Zc=new Wc("INFO",800),$c=new Wc("CONFIG",700),ad=new Wc("FINE",500);p=V.prototype,p.getParent=aa("Ra"),p.Yb=m("za"),p.log=function(a,b,c){if(a.value>=bd(this).value)for(a=this.kc(a,b,c),b="log:"+a.oc,q.console&&(q.console.timeStamp?q.console.timeStamp(b):q.console.markTimeline&&q.console.markTimeline(b)),q.msWriteProfilerMark&&q.msWriteProfilerMark(b),b=this;b;){c=b;var d=a;if(c.Fb)for(var e=0,f=void 0;f=c.Fb[e];e++)f(d);b=b.getParent()}},p.kc=function(a,b,c){var d=new Uc(a,String(b),this.pc);if(c){d.Bb=c;var e,f=arguments.callee.caller;try{var g,h=da("window.location.href");if(u(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:h,stack:"Not available"};else{var i,j,k=!1;try{i=c.lineNumber||c.Hc||"Not available"}catch(l){i="Not available",k=!0}try{j=c.fileName||c.filename||c.sourceURL||q.$googDebugFname||h}catch(m){j="Not available",k=!0}g=!k&&c.lineNumber&&c.fileName&&c.stack?c:{message:c.message,name:c.name,lineNumber:i,fileName:j,stack:c.stack||"Not available"}}e="Message: "+na(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+na(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+na(Qc(f)+"-> ")}catch(n){e="Exception trying to expose exception! You win, we lose. "+n}d.Ab=e}return d},p.I=function(a,b){this.log(Xc,a,b)},p.$=function(a,b){this.log(Yc,a,b)},p.info=function(a,b){this.log(Zc,a,b)};var cd={},dd=null;X.prototype.debug=function(a){this.info(a)},X.prototype.info=function(a){this.q.info(a)},X.prototype.$=function(a){this.q.$(a)},X.prototype.I=function(a){this.q.I(a)},gd.prototype.parse=function(a){return this.P(a)};var mc=7,nc=8;y(hd,Sb),hd.prototype.q=ed("goog.net.XhrIo");var id=/^https?$/i;p=hd.prototype,p.S=!1,p.g=null,p.bb=null,p.Pa="",p.Jb="",p.la=0,p.p="",p.ib=!1,p.Na=!1,p.mb=!1,p.ca=!1,p.$a=0,p.fa=null,p.Wb="",p.cc=!1,p.send=function(a,b,c,d){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.Pa+"; newUri="+a);b=b?b.toUpperCase():"GET",this.Pa=a,this.p="",this.la=0,this.Jb=b,this.ib=!1,this.S=!0,this.g=this.va?xb(this.va):xb(vb),this.bb=this.va?this.va.Ga||(this.va.Ga=zb(this.va)):vb.Ga||(vb.Ga=zb(vb)),this.g.onreadystatechange=w(this.Ob,this);try{W(this.q,Y(this,"Opening Xhr")),this.mb=!0,this.g.open(b,a,!0),this.mb=!1}catch(e){return W(this.q,Y(this,"Error opening Xhr: "+e.message)),jd(this,e),void 0}a=c||"";var f=this.headers.n();d&&E(d,function(a,b){f.set(b,a)}),d=q.FormData&&a instanceof q.FormData,"POST"!=b||f.ia("Content-Type")||d||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),E(f,function(a,b){this.g.setRequestHeader(b,a)},this),this.Wb&&(this.g.responseType=this.Wb),"withCredentials"in this.g&&(this.g.withCredentials=this.cc);try{this.fa&&(q.clearTimeout(this.fa),this.fa=null),0<this.$a&&(W(this.q,Y(this,"Will abort after "+this.$a+"ms if incomplete")),this.fa=q.setTimeout(w(this.Da,this),this.$a)),W(this.q,Y(this,"Sending request")),this.Na=!0,this.g.send(a),this.Na=!1}catch(g){W(this.q,Y(this,"Send error: "+g.message)),jd(this,g)}},p.Da=function(){"undefined"!=typeof ca&&this.g&&(this.p="Timed out after "+this.$a+"ms, aborting",this.la=nc,W(this.q,Y(this,this.p)),this.dispatchEvent("timeout"),this.abort(nc))},p.abort=function(a){this.g&&this.S&&(W(this.q,Y(this,"Aborting")),this.S=!1,this.ca=!0,this.g.abort(),this.ca=!1,this.la=a||mc,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ld(this))},p.u=function(){this.g&&(this.S&&(this.S=!1,this.ca=!0,this.g.abort(),this.ca=!1),ld(this,!0)),hd.ra.u.call(this)},p.Ob=function(){this.mb||this.Na||this.ca?md(this):this.sc()},p.sc=function(){md(this)},p.isActive=function(){return!!this.g},p.Eb=function(){return u(this.p)?this.p:String(this.p)},new nd,nd.prototype.set=m("Vb"),nd.prototype.reset=function(){this.set(x())},nd.prototype.get=aa("Vb"),p=qd.prototype,p.v=null,p.A=null,p.Ua=!1,p.ac=null,p.Ka=null,p.nb=null,p.H=null,p.c=null,p.h=-1,p.L=null,p.wa=null,p.Y=m("v"),p.Zb=m("P"),p.gb=function(a){this.H=a,a=rd(this.b,this.H),T(sd),this.ac=x();var b=this.b.Cb;null!=b?(this.L=this.b.correctHostPrefix(b[0]),(this.wa=b[1])?(this.c=1,td(this)):(this.c=2,ud(this))):(qb(a,"MODE","init"),this.A=new Q(this,this.a,void 0,void 0,void 0),this.A.Y(this.v),hc(this.A,a,!1,null,!0),this.c=0)},p.ic=function(a){if(a)this.c=2,ud(this);else{T(wd);var b=this.b;b.a.debug("Test Connection Blocked"),b.h=b.U.h,Z(b,9)}a&&this.G(pc)},p.hb=function(a){return this.b.hb(a)},p.abort=function(){this.A&&(this.A.cancel(),this.A=null),this.h=-1},p.Hb=ba(!1),p.Pb=function(a,b){if(this.h=a.h,0==this.c)if(this.a.debug("TestConnection: Got data for stage 1"),b){try{var c=this.P.parse(b)}catch(d){return xc(this.a,d),zd(this.b,this),void 0}this.L=this.b.correctHostPrefix(c[0]),this.wa=c[1]}else this.a.debug("TestConnection: Null responseText"),zd(this.b,this);else 2==this.c&&(this.Ua?(T(Ad),this.nb=x()):"11111"==b?(T(Bd),this.Ua=!0,this.Ka=x(),c=this.Ka-this.ac,(ec()||500>c)&&(this.h=200,this.A.cancel(),this.a.debug("Test connection succeeded; using streaming connection"),T(Cd),Dd(this.b,this,!0))):(T(Ed),this.Ka=this.nb=x(),this.Ua=!1))},p.ma=function(){if(this.h=this.A.h,this.A.J){if(0==this.c)this.a.debug("TestConnection: request complete for initial check"),this.wa?(this.c=1,td(this)):(this.c=2,ud(this));else if(2==this.c){this.a.debug("TestConnection: request complete for stage 2");var a=!1;(a=ec()?this.Ua:200>this.nb-this.Ka?!1:!0)?(this.a.debug("Test connection succeeded; using streaming connection"),T(Cd),Dd(this.b,this,!0)):(this.a.debug("Test connection failed; not using streaming"),T(Hd),Dd(this.b,this,!1))}}else this.a.debug("TestConnection: request failed, in state "+this.c),0==this.c?T(Fd):2==this.c&&T(Gd),zd(this.b,this)},p.Ya=function(){return this.b.Ya()},p.isActive=function(){return this.b.isActive()},p.G=function(a){this.b.G(a)},p=Id.prototype,p.v=null,p.xa=null,p.o=null,p.k=null,p.H=null,p.La=null,p.ub=null,p.L=null,p.fc=!0,p.Aa=0,p.qc=0,p.Ja=!1,p.e=null,p.F=null,p.M=null,p.ba=null,p.U=null,p.rb=null,p.ec=!0,p.ya=-1,p.Kb=-1,p.h=-1,p.V=0,p.ga=0,p.gc=5e3,p.Bc=1e4,p.kb=2,p.Db=2e4,p.oa=0,p.Za=!1,p.ha=8;var Jd=1,Ld=new Sb;y(Md,N),y(Nd,N);var jc=1,pc=2,oc=3,Fc=4;y(Od,N);var sd=3,wd=4,yd=5,Bd=6,Ad=7,Ed=8,Fd=9,Gd=10,Hd=11,Cd=12,uc=13,vc=14,zc=15,Ac=16,Bc=17,Hc=18,Dc=22,fd="y2f%";p=Id.prototype,p.gb=function(a,b,c,d,e){this.a.debug("connect()"),T(0),this.H=b,this.xa=c||{},d&&void 0!==e&&(this.xa.OSID=d,this.xa.OAID=e),this.a.debug("connectTest_()"),Pd(this)&&(this.U=new qd(this,this.a),this.U.Y(this.v),this.U.Zb(this.P),this.U.gb(a))},p.disconnect=function(){if(this.a.debug("disconnect()"),Qd(this),3==this.c){var a=this.Aa++,b=this.La.n();I(b,"SID",this.Z),I(b,"RID",a),I(b,"TYPE","terminate"),Rd(this,b),a=new Q(this,this.a,this.Z,a,void 0),a.sa=2,a.T=J(b.n()),b=new Image,b.src=a.T,b.onload=b.onerror=w(a.lc,a),a.pa=x(),ic(a)}Td(this)},p.Y=m("v"),p.$b=m("oa"),p.Hb=function(){return 0==this.c},p.Zb=m("P"),p.Rb=function(a){if(this.F=null,this.a.debug("startForwardChannel_"),Pd(this))if(this.c==Jd)if(a)this.a.I("Not supposed to retry the open");else{this.a.debug("open_()"),this.Aa=Math.floor(1e5*Math.random()),a=this.Aa++;var b=new Q(this,this.a,"",a,void 0);b.Y(this.v);var c=Wd(this),d=this.La.n();I(d,"RID",a),this.vb&&I(d,"CVER",this.vb),Rd(this,d),fc(b,d,c),this.o=b,this.c=2}else 3==this.c&&(a?Xd(this,a):0==this.s.length?this.a.debug("startForwardChannel_ returned: nothing to send"):this.o?this.a.I("startForwardChannel_ returned: connection already in progress"):(Xd(this),this.a.debug("startForwardChannel_ finished, sent request")))},p.Qb=function(){if(this.M=null,Pd(this)){this.a.debug("Creating new HttpRequest"),this.k=new Q(this,this.a,this.Z,"rpc",this.tb),this.k.Y(this.v),this.k.$b(this.oa);var a=this.ub.n();if(I(a,"RID","rpc"),I(a,"SID",this.Z),I(a,"CI",this.rb?"0":"1"),I(a,"AID",this.ya),Rd(this,a),ec())I(a,"TYPE","xmlhttp"),hc(this.k,a,!0,this.L,!1);else{I(a,"TYPE","html");var b=this.k,c=Boolean(this.L);b.sa=3,b.T=J(a.n()),Cc(b,c)}this.a.debug("New Request created")}},p.Pb=function(a,b){if(0!=this.c&&(this.k==a||this.o==a))if(this.h=a.h,this.o==a&&3==this.c)if(7<this.ha){var c;try{c=this.P.parse(b)}catch(d){c=null}if(s(c)&&3==c.length){var e=c;if(0==e[0])a:if(this.a.debug("Server claims our backchannel is missing."),this.M)this.a.debug("But we are currently starting the request.");else{if(this.k){if(!(this.k.pa+3e3<this.o.pa))break a;Ud(this),this.k.cancel(),this.k=null}else this.a.$("We do not have a BackChannel established");Zd(this),T(19)}else this.Kb=e[1],c=this.Kb-this.ya,c>0&&(e=e[2],this.a.debug(e+" bytes (in "+c+" arrays) are outstanding on the BackChannel"),37500>e&&this.rb&&0==this.ga&&!this.ba&&(this.ba=U(w(this.rc,this),6e3)))}else this.a.debug("Bad POST response data returned"),Z(this,11)}else b!=fd&&(this.a.debug("Bad data returned - missing/invald magic cookie"),Z(this,11));else if(this.k==a&&Ud(this),!/^[\s\xa0]*$/.test(b)){c=this.P.parse(b);for(var e=this.e&&this.e.channelHandleMultipleArrays?[]:null,f=0;f<c.length;f++){var g=c[f];this.ya=g[0],g=g[1],2==this.c?"c"==g[0]?(this.Z=g[1],this.L=this.correctHostPrefix(g[2]),g=g[3],this.ha=null!=g?g:6,this.c=3,this.e&&this.e.channelOpened(this),this.ub=xd(this,this.L,this.H),Yd(this)):"stop"==g[0]&&Z(this,7):3==this.c&&("stop"==g[0]?(e&&e.length&&(this.e.channelHandleMultipleArrays(this,e),e.length=0),Z(this,7)):"noop"!=g[0]&&(e?e.push(g):this.e&&this.e.channelHandleArray(this,g)),this.ga=0)}e&&e.length&&this.e.channelHandleMultipleArrays(this,e)}},p.correctHostPrefix=function(a){return this.fc?this.e?this.e.correctHostPrefix(a):a:null},p.rc=function(){null!=this.ba&&(this.ba=null,this.k.cancel(),this.k=null,Zd(this),T(20))},p.ma=function(a){this.a.debug("Request complete");var b;if(this.k==a)Ud(this),this.k=null,b=2;else{if(this.o!=a)return;this.o=null,b=1}if(this.h=a.h,0!=this.c)if(a.J)1==b?(b=x()-a.pa,Ld.dispatchEvent(new Nd(Ld,a.X?a.X.length:0,b,this.V)),Vd(this),this.Q.length=0):Yd(this);else{var c=a.Eb();if(3==c||7==c||0==c&&0<this.h)this.a.debug("Not retrying due to error type");else{this.a.debug("Maybe retrying, last error: "+bc(c,this.h));var d;if((d=1==b)&&(this.o||this.F?(this.a.I("Request already in progress"),d=!1):this.c==Jd||this.V>=(this.Ja?0:this.kb)?d=!1:(this.a.debug("Going to retry POST"),this.F=U(w(this.Rb,this,a),$d(this,this.V)),this.V++,d=!0)),d||2==b&&Zd(this))return;this.a.debug("Exceeded max number of retries")}switch(this.a.debug("Error: HTTP request failed"),c){case 1:Z(this,5);break;case 4:Z(this,10);break;case 3:Z(this,6);break;case 7:Z(this,12);break;default:Z(this,2)}}},p.jc=function(){if(!(0<=Xa(arguments,this.c)))throw Error("Unexpected channel state: "+this.c)},p.Dc=function(a){a?(this.a.info("Successfully pinged google.com"),T(2)):(this.a.info("Failed to ping google.com"),T(1),ae(this,8))},p.hb=function(a){if(a&&!this.Za)throw Error("Can't create secondary domain capable XhrIo object.");return a=new hd,a.cc=this.Za,a},p.isActive=function(){return!!this.e&&this.e.isActive(this)},p.G=function(a){Ld.dispatchEvent(new Od(Ld,a))},p.Ya=function(){return this.Za||!ec()},p=be.prototype,p.channelHandleMultipleArrays=null,p.okToMakeRequest=ba(0),p.channelOpened=e(),p.channelHandleArray=e(),p.channelError=e(),p.channelClosed=e(),p.getAdditionalParams=function(){return{}},p.getNetworkTestImageUri=ba(null),p.isActive=ba(!0),p.badMapError=e(),p.correctHostPrefix=function(a){return a};var $,ce,de=[].slice;ce={0:"Ok",4:"User is logging out",6:"Unknown session ID",7:"Stopped by server",8:"General network error",2:"Request failed",9:"Blocked by a network administrator",5:"No data from server",10:"Got bad data from the server",11:"Got a bad response from the server"},$=function(a,b){var c,d,e,f,g,h,i,j,k,l;return j=this,a||(a="channel"),a.match(/:\/\//)&&a.replace(/^ws/,"http"),b||(b={}),s(b||"string"==typeof b)&&(b={}),h=b.reconnectTime||3e3,l=function(a){j.readyState=j.readyState=a},l(this.CLOSED),k=null,f=b.Kc,c=function(){var a,b;b=arguments[0],a=2<=arguments.length?de.call(arguments,1):[];try{return"function"==typeof j[b]?j[b].apply(j,a):void 0}catch(c){throw a=c,"undefined"!=typeof console&&null!==console&&console.error(a.stack),a}},d=new be,d.channelOpened=function(){return f=k,l($.OPEN),c("onopen")},e=null,d.channelError=function(a,b){var d;d=ce[b],e=b,l($.cb);try{return c("onerror",d,b)}catch(f){}},i=null,d.channelClosed=function(a,d,f){if(j.readyState!==$.CLOSED){k=null,a=e?ce[e]:"Closed",l($.CLOSED);try{c("onclose",a,d,f)}catch(m){}return b.reconnect&&7!==e&&0!==e&&(d=6===e?0:h,clearTimeout(i),i=setTimeout(g,d)),e=null}},d.channelHandleArray=function(a,b){return c("onmessage",b)},g=function(){if(k)throw Error("Reconnect() called from invalid state");if(l($.CONNECTING),c("onconnecting"),clearTimeout(i),k=new Id(b.appVersion,null!=f?f.Cb:void 0),b.crossDomainXhr&&(k.Za=!0),k.e=d,e=null,b.failFast){var g=k;g.Ja=!0,g.a.info("setFailFast: true"),(g.o||g.F)&&g.V>(g.Ja?0:g.kb)&&(g.a.info("Retry count "+g.V+" > new maxRetries "+(g.Ja?0:g.kb)+". Fail immediately!"),g.o?(g.o.cancel(),g.ma(g.o)):(q.clearTimeout(g.F),g.F=null,Z(g,2)))}return k.gb(""+a+"/test",""+a+"/bind",b.extraParams,null!=f?f.Z:void 0,null!=f?f.ya:void 0)},this.open=function(){if(j.readyState!==j.CLOSED)throw Error("Already open");return g()},this.close=function(){return clearTimeout(i),e=0,j.readyState!==$.CLOSED?(l($.cb),k.disconnect()):void 0},this.sendMap=function(a){var b;if((b=j.readyState)===$.cb||b===$.CLOSED)throw Error("Cannot send to a closed connection");if(b=k,0==b.c)throw Error("Invalid operation: sending map when state is closed");1e3==b.s.length&&b.a.I("Already have 1000 queued maps upon queueing "+Kc(a)),b.s.push(new Kd(b.qc++,a)),2!=b.c&&3!=b.c||Vd(b)},this.send=function(a){return this.sendMap({JSON:Kc(a)})},g(),this},$.prototype.CONNECTING=$.CONNECTING=$.CONNECTING=0,$.prototype.OPEN=$.OPEN=$.OPEN=1,$.prototype.CLOSING=$.CLOSING=$.cb=2,$.prototype.CLOSED=$.CLOSED=$.CLOSED=3,("undefined"!=typeof exports&&null!==exports?exports:window).BCSocket=$}()},{}],41:[function(a,b){!function(){function a(a){for(var b in a)return!0;return!1}!function(){var a={exports:{}},b=a.exports;b.name="text",b.uri="http://sharejs.org/types/textv1",b.create=function(a){if(null!=a&&"string"!=typeof a)throw Error("Initial data must be a string");return a||""};var c=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},d=function(a){if(!c(a))throw Error("Op must be an array of components");for(var b=null,d=0;a.length>d;d++){var e=a[d];switch(typeof e){case"object":if(!("number"==typeof e.d&&e.d>0))throw Error("Object components must be deletes of size > 0");break;case"string":if(!(e.length>0))throw Error("Inserts cannot be empty");break;case"number":if(!(e>0))throw Error("Skip components must be >0");if("number"==typeof b)throw Error("Adjacent skip components should be combined")}b=e}if("number"==typeof b)throw Error("Op has a trailing skip")},e=function(a){return function(b){return b&&0!==b.d?0===a.length?a.push(b):typeof b==typeof a[a.length-1]?"object"==typeof b?a[a.length-1].d+=b.d:a[a.length-1]+=b:a.push(b):void 0}},f=function(a){var b=0,c=0,d=function(d,e){if(b===a.length)return-1===d?null:d;var f,g=a[b];return"number"==typeof g?-1===d||d>=g-c?(f=g-c,++b,c=0,f):(c+=d,d):"string"==typeof g?-1===d||"i"===e||d>=g.length-c?(f=g.slice(c),++b,c=0,f):(f=g.slice(c,c+d),c+=d,f):-1===d||"d"===e||d>=g.d-c?(f={d:g.d-c},++b,c=0,f):(c+=d,{d:d})},e=function(){return a[b]};return[d,e]},g=function(a){return"number"==typeof a?a:a.length||a.d},h=function(a){return a.length>0&&"number"==typeof a[a.length-1]&&a.pop(),a};b.normalize=function(a){for(var b=[],c=e(b),d=0;a.length>d;d++)c(a[d]);return h(b)},b.apply=function(a,b){if("string"!=typeof a)throw Error("Snapshot should be a string");d(b);for(var c=[],e=0;b.length>e;e++){var f=b[e];switch(typeof f){case"number":if(f>a.length)throw Error("The op is too long for this document");c.push(a.slice(0,f)),a=a.slice(f);break;case"string":c.push(f);break;case"object":a=a.slice(f.d)}}return c.join("")+a},b.transform=function(a,b,c){if("left"!=c&&"right"!=c)throw Error("side ("+c+") must be 'left' or 'right'");d(a),d(b);for(var i=[],j=e(i),k=f(a),l=k[0],m=k[1],n=0;b.length>n;n++){var o,p,q=b[n];switch(typeof q){case"number":for(o=q;o>0;)p=l(o,"i"),j(p),"string"!=typeof p&&(o-=g(p));break;case"string":"left"===c&&"string"==typeof m()&&j(l(-1)),j(q.length);break;case"object":for(o=q.d;o>0;)switch(p=l(o,"i"),typeof p){case"number":o-=p;break;case"string":j(p);break;case"object":o-=p.d}}}for(;q=l(-1);)j(q);return h(i)},b.compose=function(a,b){d(a),d(b);for(var c=[],i=e(c),j=f(a)[0],k=0;b.length>k;k++){var l,m,n=b[k];switch(typeof n){case"number":for(l=n;l>0;)m=j(l,"d"),i(m),"object"!=typeof m&&(l-=g(m));break;case"string":i(n);break;case"object":for(l=n.d;l>0;)switch(m=j(l,"d"),typeof m){case"number":i({d:m}),l-=m;break;case"string":l-=m.length;break;case"object":i(m)}}}for(;n=j(-1);)i(n);return h(c)};var i=function(a,b){for(var c=0,d=0;b.length>d;d++){var e=b[d];if(c>=a)break;switch(typeof e){case"number":if(c+e>=a)return a;c+=e;break;case"string":c+=e.length,a+=e.length;break;case"object":a-=Math.min(e.d,a-c)}}return a};b.transformSelection=function(a,b,c){var d=0;if(c){for(var e=0;b.length>e;e++){var f=b[e];switch(typeof f){case"number":d+=f;break;case"string":d+=f.length
}}return d}return"number"==typeof a?i(a,b):[i(a[0],b),i(a[1],b)]},b.transformCursor=b.transformSelection,b.selectionEq=function(a,b){return null!=a[0]&&a[0]===a[1]&&(a=a[0]),null!=b[0]&&b[0]===b[1]&&(b=b[0]),a===b||null!=a[0]&&null!=b[0]&&a[0]===b[0]&&a[1]==b[1]};var j=window.ottypes=window.ottypes||{},k=a.exports;j[k.name]=k,k.uri&&(j[k.uri]=k)}();var c="undefined"!=typeof brequire?brequire("ottypes"):window.ottypes;c["http://sharejs.org/types/textv1"].api={provides:{text:!0},getLength:function(){return this.getSnapshot().length},get:function(){return this.getSnapshot()},getText:function(){return console.warn("`getText()` is deprecated; use `get()` instead."),this.get()},insert:function(a,b,c){return this.submitOp([a,b],c)},remove:function(a,b,c){return this.submitOp([a,{d:b}],c)},_onOp:function(a){for(var b=0,c=0,d=0;d<a.length;d++){var e=a[d];switch(typeof e){case"number":b+=e,c+=e;break;case"string":this.onInsert&&this.onInsert(b,e),b+=e.length;break;case"object":this.onRemove&&this.onRemove(b,e.d),c+=e.d}}}},function(){var a={exports:{}},b=a.exports;b._bootstrapTransform=function(a,b,c,d){var e=function(a,c,d,e){b(d,a,c,"left"),b(e,c,a,"right")},f=a.transformX=function(a,b){c(a),c(b);for(var g=[],h=0;b.length>h;h++){for(var i=b[h],j=[],k=0;a.length>k;){var l=[];if(e(a[k],i,j,l),k++,1!==l.length){if(0===l.length){for(var m=k;a.length>m;m++)d(j,a[m]);i=null;break}for(var n=f(a.slice(k),l),o=0;n[0].length>o;o++)d(j,n[0][o]);for(var p=0;n[1].length>p;p++)d(g,n[1][p]);i=null;break}i=l[0]}null!=i&&d(g,i),a=j}return[a,g]};a.transform=a.transform=function(a,c,d){if("left"!==d&&"right"!==d)throw Error("type must be 'left' or 'right'");return 0===c.length?a:1===a.length&&1===c.length?b([],a[0],c[0],d):"left"===d?f(a,c)[0]:f(c,a)[1]}};var c=a.exports={name:"text0",uri:"http://sharejs.org/types/textv0",create:function(a){if(null!=a&&"string"!=typeof a)throw Error("Initial data must be a string");return a||""}},d=function(a,b,c){return a.slice(0,b)+c+a.slice(b)},e=function(a){if("number"!=typeof a.p)throw Error("component missing position field");if("string"==typeof a.i==("string"==typeof a.d))throw Error("component needs an i or d field");if(0>a.p)throw Error("position cannot be negative")},f=function(a){for(var b=0;a.length>b;b++)e(a[b])};c.apply=function(a,b){var c;f(b);for(var e=0;b.length>e;e++){var g=b[e];if(null!=g.i)a=d(a,g.p,g.i);else{if(c=a.slice(g.p,g.p+g.d.length),g.d!==c)throw Error("Delete component '"+g.d+"' does not match deleted text '"+c+"'");a=a.slice(0,g.p)+a.slice(g.p+g.d.length)}}return a};var g=c._append=function(a,b){if(""!==b.i&&""!==b.d)if(0===a.length)a.push(b);else{var c=a[a.length-1];null!=c.i&&null!=b.i&&c.p<=b.p&&b.p<=c.p+c.i.length?a[a.length-1]={i:d(c.i,b.p-c.p,b.i),p:c.p}:null!=c.d&&null!=b.d&&b.p<=c.p&&c.p<=b.p+b.d.length?a[a.length-1]={d:d(b.d,c.p-b.p,c.d),p:b.p}:a.push(b)}};c.compose=function(a,b){f(a),f(b);for(var c=a.slice(),d=0;b.length>d;d++)g(c,b[d]);return c},c.normalize=function(a){var b=[];(null!=a.i||null!=a.p)&&(a=[a]);for(var c=0;a.length>c;c++){var d=a[c];null==d.p&&(d.p=0),g(b,d)}return b};var h=function(a,b,c){return null!=b.i?a>b.p||b.p===a&&c?a+b.i.length:a:b.p>=a?a:b.p+b.d.length>=a?b.p:a-b.d.length};c.transformCursor=function(a,b,c){for(var d="right"===c,e=0;b.length>e;e++)a=h(a,b[e],d);return a};var i=c._tc=function(a,b,c,d){if(e(b),e(c),null!=b.i)g(a,{i:b.i,p:h(b.p,c,"right"===d)});else if(null!=c.i){var f=b.d;b.p<c.p&&(g(a,{d:f.slice(0,c.p-b.p),p:b.p}),f=f.slice(c.p-b.p)),""!==f&&g(a,{d:f,p:b.p+c.i.length})}else if(b.p>=c.p+c.d.length)g(a,{d:b.d,p:b.p-c.d.length});else if(b.p+b.d.length<=c.p)g(a,b);else{var i={d:"",p:b.p};b.p<c.p&&(i.d=b.d.slice(0,c.p-b.p)),b.p+b.d.length>c.p+c.d.length&&(i.d+=b.d.slice(c.p+c.d.length-b.p));var j=Math.max(b.p,c.p),k=Math.min(b.p+b.d.length,c.p+c.d.length),l=b.d.slice(j-b.p,k-b.p),m=c.d.slice(j-c.p,k-c.p);if(l!==m)throw Error("Delete ops delete different text in the same region of the document");""!==i.d&&(i.p=h(i.p,c),g(a,i))}return a},j=function(a){return null!=a.i?{d:a.i,p:a.p}:{i:a.d,p:a.p}};c.invert=function(a){a=a.slice().reverse();for(var b=0;a.length>b;b++)a[b]=j(a[b]);return a},b._bootstrapTransform?b._bootstrapTransform(c,i,f,g):brequire("./helpers")._bootstrapTransform(c,i,f,g);var k=function(a){return"[object Array]"==Object.prototype.toString.call(a)},l=function(a){return JSON.parse(JSON.stringify(a))};if(void 0===c)var c="undefined"!=typeof brequire?brequire("./text0"):window.ottypes.text;var m={name:"json0",uri:"http://sharejs.org/types/JSONv0"};m.create=function(a){return void 0===a?null:a},m.invertComponent=function(a){var b={p:a.p};return void 0!==a.si&&(b.sd=a.si),void 0!==a.sd&&(b.si=a.sd),void 0!==a.oi&&(b.od=a.oi),void 0!==a.od&&(b.oi=a.od),void 0!==a.li&&(b.ld=a.li),void 0!==a.ld&&(b.li=a.ld),void 0!==a.na&&(b.na=-a.na),void 0!==a.lm&&(b.lm=a.p[a.p.length-1],b.p=a.p.slice(0,a.p.length-1).concat([a.lm])),b},m.invert=function(a){for(var b=a.slice().reverse(),c=[],d=0;b.length>d;d++)c.push(m.invertComponent(b[d]));return c},m.checkValidOp=function(a){for(var b=0;a.length>b;b++)if(!k(a[b].p))throw Error("Missing path")},m.checkList=function(a){if(!k(a))throw Error("Referenced element not a list")},m.checkObj=function(a){if(a.constructor!==Object)throw Error("Referenced element not an object (it was "+JSON.stringify(a)+")")},m.apply=function(a,b){m.checkValidOp(b),b=l(b);for(var c={data:a},d=0;b.length>d;d++){for(var e=b[d],f=null,g=null,h=c,i="data",j=0;e.p.length>j;j++){var k=e.p[j];if(f=h,g=i,h=h[i],i=k,null==f)throw Error("Path invalid")}if(void 0!==e.na){if("number"!=typeof h[i])throw Error("Referenced element not a number");h[i]+=e.na}else if(void 0!==e.si){if("string"!=typeof h)throw Error("Referenced element not a string (it was "+JSON.stringify(h)+")");f[g]=h.slice(0,i)+e.si+h.slice(i)}else if(void 0!==e.sd){if("string"!=typeof h)throw Error("Referenced element not a string");if(h.slice(i,i+e.sd.length)!==e.sd)throw Error("Deleted string does not match");f[g]=h.slice(0,i)+h.slice(i+e.sd.length)}else if(void 0!==e.li&&void 0!==e.ld)m.checkList(h),h[i]=e.li;else if(void 0!==e.li)m.checkList(h),h.splice(i,0,e.li);else if(void 0!==e.ld)m.checkList(h),h.splice(i,1);else if(void 0!==e.lm){if(m.checkList(h),e.lm!=i){var n=h[i];h.splice(i,1),h.splice(e.lm,0,n)}}else if(void 0!==e.oi)m.checkObj(h),h[i]=e.oi;else{if(void 0===e.od)throw Error("invalid / missing instruction in op");m.checkObj(h),delete h[i]}}return c.data},m.shatter=function(a){for(var b=[],c=0;a.length>c;c++)b.push([a[c]]);return b},m.incrementalApply=function(a,b,c){for(var d=0;b.length>d;d++){var e=[b[d]];a=m.apply(a,e),c(e,a)}return a};var n=m.pathMatches=function(a,b,c){if(a.length!=b.length)return!1;for(var d=0;a.length>d;d++)if(a[d]!==b[d]&&(!c||d!==a.length-1))return!1;return!0},o=function(a){var b={p:a.p[a.p.length-1]};return null!=a.si?b.i=a.si:b.d=a.sd,b};m.append=function(a,b){b=l(b);var d;if(0!=a.length&&n(b.p,(d=a[a.length-1]).p))null!=d.na&&null!=b.na?a[a.length-1]={p:d.p,na:d.na+b.na}:void 0!==d.li&&void 0===b.li&&b.ld===d.li?void 0!==d.ld?delete d.li:a.pop():void 0!==d.od&&void 0===d.oi&&void 0!==b.oi&&void 0===b.od?d.oi=b.oi:void 0!==d.oi&&void 0!==b.od?void 0!==b.oi?d.oi=b.oi:void 0!==d.od?delete d.oi:a.pop():void 0!==b.lm&&b.p[b.p.length-1]===b.lm||a.push(b);else if(0!=a.length&&n(b.p,d.p,!0))if(null==b.si&&null==b.sd||null==d.si&&null==d.sd)a.push(b);else{var e=[o(d)];if(c._append(e,o(b)),1!==e.length)a.push(b);else{var f=e[0];d.p[d.p.length-1]=f.p,null!=f.i?d.si=f.i:d.sd=f.d}}else a.push(b)},m.compose=function(a,b){m.checkValidOp(a),m.checkValidOp(b);for(var c=l(a),d=0;b.length>d;d++)m.append(c,b[d]);return c},m.normalize=function(a){var b=[];a=k(a)?a:[a];for(var c=0;a.length>c;c++){var d=a[c];null==d.p&&(d.p=[]),m.append(b,d)}return b},m.canOpAffectOp=function(a,b){if(0===a.length)return!0;if(0===b.length)return!1;b=b.slice(0,b.length-1),a=a.slice(0,a.length-1);for(var c=0;a.length>c;c++){var d=a[c];if(c>=b.length||d!=b[c])return!1}return!0},m.transformComponent=function(a,b,d,e){b=l(b),void 0!==b.na&&b.p.push(0),void 0!==d.na&&d.p.push(0);var f;m.canOpAffectOp(d.p,b.p)&&(f=d.p.length-1);var g;m.canOpAffectOp(b.p,d.p)&&(g=b.p.length-1);var h=b.p.length,i=d.p.length;if(void 0!==b.na&&b.p.pop(),void 0!==d.na&&d.p.pop(),d.na){if(null!=g&&i>=h&&d.p[g]==b.p[g])if(void 0!==b.ld){var j=l(d);j.p=j.p.slice(h),b.ld=m.apply(l(b.ld),[j])}else if(void 0!==b.od){var j=l(d);j.p=j.p.slice(h),b.od=m.apply(l(b.od),[j])}return m.append(a,b),a}if(null!=g&&i>h&&b.p[g]==d.p[g])if(void 0!==b.ld){var j=l(d);j.p=j.p.slice(h),b.ld=m.apply(l(b.ld),[j])}else if(void 0!==b.od){var j=l(d);j.p=j.p.slice(h),b.od=m.apply(l(b.od),[j])}if(null!=f){var k=h==i;if(void 0!==d.na);else if(void 0!==d.si||void 0!==d.sd){if(void 0!==b.si||void 0!==b.sd){if(!k)throw Error("must be a string?");var n=o(b),p=o(d),q=[];c._tc(q,n,p,e);for(var r=0;q.length>r;r++){var s=q[r],t={p:b.p.slice(0,f)};t.p.push(s.p),null!=s.i&&(t.si=s.i),null!=s.d&&(t.sd=s.d),m.append(a,t)}return a}}else if(void 0!==d.li&&void 0!==d.ld){if(d.p[f]===b.p[f]){if(!k)return a;if(void 0!==b.ld){if(void 0===b.li||"left"!==e)return a;b.ld=l(d.li)}}}else if(void 0!==d.li)void 0!==b.li&&void 0===b.ld&&k&&b.p[f]===d.p[f]?"right"===e&&b.p[f]++:d.p[f]<=b.p[f]&&b.p[f]++,void 0!==b.lm&&k&&d.p[f]<=b.lm&&b.lm++;else if(void 0!==d.ld){if(void 0!==b.lm&&k){if(d.p[f]===b.p[f])return a;var u=d.p[f],v=b.p[f],w=b.lm;(w>u||u===w&&w>v)&&b.lm--}if(d.p[f]<b.p[f])b.p[f]--;else if(d.p[f]===b.p[f]){if(h>i)return a;if(void 0!==b.ld){if(void 0===b.li)return a;delete b.ld}}}else if(void 0!==d.lm)if(void 0!==b.lm&&h===i){var v=b.p[f],w=b.lm,x=d.p[f],y=d.lm;if(x!==y)if(v===x){if("left"!==e)return a;b.p[f]=y,v===w&&(b.lm=y)}else v>x&&b.p[f]--,v>y?b.p[f]++:v===y&&x>y&&(b.p[f]++,v===w&&b.lm++),w>x?b.lm--:w===x&&w>v&&b.lm--,w>y?b.lm++:w===y&&(y>x&&w>v||x>y&&v>w?"right"===e&&b.lm++:w>v?b.lm++:w===x&&b.lm--)}else if(void 0!==b.li&&void 0===b.ld&&k){var v=d.p[f],w=d.lm;u=b.p[f],u>v&&b.p[f]--,u>w&&b.p[f]++}else{var v=d.p[f],w=d.lm;u=b.p[f],u===v?b.p[f]=w:(u>v&&b.p[f]--,u>w?b.p[f]++:u===w&&v>w&&b.p[f]++)}else if(void 0!==d.oi&&void 0!==d.od){if(b.p[f]===d.p[f]){if(void 0===b.oi||!k)return a;if("right"===e)return a;b.od=d.oi}}else if(void 0!==d.oi){if(void 0!==b.oi&&b.p[f]===d.p[f]){if("left"!==e)return a;m.append(a,{p:b.p,od:d.oi})}}else if(void 0!==d.od&&b.p[f]==d.p[f]){if(!k)return a;if(void 0===b.oi)return a;delete b.od}}return m.append(a,b),a},b._bootstrapTransform?b._bootstrapTransform(m,m.transformComponent,m.checkValidOp,m.append):brequire("./helpers")._bootstrapTransform(m,m.transformComponent,m.checkValidOp,m.append),a.exports=m;var p=window.ottypes=window.ottypes||{},q=a.exports;p[q.name]=q,q.uri&&(p[q.uri]=q)}(),function(){function a(a){return 1===a.length&&a[0].constructor===Array?a[0]:a}function b(a,b){for(var c="data",d={data:a},e=0;e<b.length;e++)if(d=d[c],c=b[e],"undefined"==typeof d)throw new Error("bad path");return{elem:d,key:c}}function c(a,b){if(a.length!==b.length)return!1;for(var c=0;c<a.length;++c)if(a[c]!==b[c])return!1;return!0}function d(a,b){return a.length<b.length?!1:c(a.slice(0,b.length),b)}function e(){}function f(a){return a instanceof Array?a:"number"==typeof a?[a]:void 0}function g(a,b,c,d){b=Array.prototype.slice.call(b);var g=a.path||[];return c.length>1&&"function"!=typeof b[b.length-1]&&b.push(e),b.length<(d||c.length)?b.unshift(g):b[0]=g.concat(f(b[0])),c.apply(a,b)}var h=[].slice,i="undefined"!=typeof brequire?brequire("ottypes"):window.ottypes,j=i["http://sharejs.org/types/JSONv0"],k=function(a,b){this.context=a,this.path=b||[]};k.prototype._updatePath=function(a){console.log("UPDATEPATH",a);for(var b=0;b<a.length;b++){var c=a[b];if(void 0!==c.lm&&d(this.path,c.p)){var e=c.p.slice(0,c.p.length-1);e.push(c.lm),this.path=e.concat(this.path.slice(e.length))}}},k.prototype.createContextAt=function(){var b=1<=arguments.length?h.call(arguments,0):[];return this.context.createContextAt(this.path.concat(a(b)))},k.prototype.get=function(){return g(this,arguments,function(a){return this.context.get(a)})},k.prototype.set=function(){return g(this,arguments,function(a,b,c){return this.context.set(a,b,c)})},k.prototype.insert=function(){return g(this,arguments,function(a,b,c){return this.context.insert(a,b,c)})},k.prototype.remove=function(){return g(this,arguments,function(a,b,c){return this.context.remove(a,b,c)},2)},k.prototype.push=function(){return g(this,arguments,function(a,c,d){var e=b(this.context.getSnapshot(),a),f=e.elem[e.key].length;return a.push(f),this.context.insert(a,c,d)})},k.prototype.move=function(){return g(this,arguments,function(a,b,c,d){return console.log("sd MOVE"),this.context.move(a,b,c,d)})},k.prototype.add=function(){return g(this,arguments,function(a,b,c){return this.context.add(a,b,c)})},k.prototype.on=function(a,b){return this.context.addListener(this.path,a,b)},k.prototype.removeListener=function(a){return this.context.removeListener(a)},k.prototype.getLength=function(){return g(this,arguments,function(a){return this.context.getLength(a)})},k.prototype.getText=function(){return g(this,arguments,function(a){return this.context.getText(a)})},k.prototype.deleteText=function(){return g(this,arguments,function(a,b,c,d){return this.context.deleteText(a,c,b,d)})},k.prototype.destroy=function(){this.context._removeSubDoc(this)},j.api={provides:{json:!0},_fixComponentPaths:function(a){if(this._listeners&&void 0===a.na&&void 0===a.si&&void 0===a.sd){for(var b=[],c=this._listeners,d=0;d<c.length;d++){var e=c[d],f={p:e.path,na:0},g=j.transformComponent([],f,a,"left");if(0===g.length)b.push(d);else{if(1!==g.length)throw new Error("Bad assumption in json-api: xforming an 'na' op will always result in 0 or 1 components.");e.path=g[0].p}}b.sort(function(a,b){return b-a});for(var h=[],i=0;i<b.length;i++)d=b[i],h.push(this._listeners.splice(d,1));return h}},_fixPaths:function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c];b.push(this._fixComponentPaths(d))}return b},_submit:function(a,b){return this._fixPaths(a),this.submitOp(a,b)},_addSubDoc:function(a){this._subdocs||(this._subdocs=[]),this._subdocs.push(a)},_removeSubDoc:function(a){this._subdocs||(this._subdocs=[]);for(var b=0;b<this._subdocs.length;b++)return this._subdocs[b]===a&&this._subdocs.splice(b,1),void 0},_updateSubdocPaths:function(a){this._subdocs||(this._subdocs=[]);for(var b=0;b<this._subdocs.length;b++)this._subdocs[b]._updatePath(a)},createContextAt:function(){var b=1<=arguments.length?h.call(arguments,0):[],c=new k(this,a(b));return this._addSubDoc(c),c},get:function(a){return a?g(this,arguments,function(a){var c=b(this.getSnapshot(),a);return c.elem[c.key]}):this.getSnapshot()},set:function(){return g(this,arguments,function(a,c,d){var e=b(this.getSnapshot(),a),f=e.elem,g=e.key,h={p:a};if(f.constructor===Array)h.li=c,"undefined"!=typeof f[g]&&(h.ld=f[g]);else{if("object"!=typeof f)throw new Error("bad path");h.oi=c,"undefined"!=typeof f[g]&&(h.od=f[g])}return this._submit([h],d)})},remove:function(){return g(this,arguments,function(a,c,d){!d&&c instanceof Function&&(d=c,c=null);var e,f,g,h;if(null===c||void 0===c){if(e=b(this.getSnapshot(),a),f=e.elem,h=e.key,g={p:a},"undefined"==typeof f[h])throw new Error("no element at that path");if(f.constructor===Array)g.ld=f[h];else{if("object"!=typeof f)throw new Error("bad path");g.od=f[h]}return this._submit([g],d)}var i;if(i=a.pop(),e=b(this.getSnapshot(),a),f=e.elem,h=e.key,"string"==typeof f[h])return g={p:a.concat(i),sd:e.elem[e.key].slice(i,i+c)},this._submit([g],d);if(f[h].constructor===Array){for(var j=[],k=i;i+c>k;k++)j.push({p:a.concat(i),ld:f[h][k]});return this._submit(j,d)}throw new Error("element at path does not support range")},2)},insert:function(){return g(this,arguments,function(a,c,d){var e=a.pop(),f=b(this.getSnapshot(),a),g=f.elem,h=f.key,i={p:a.concat(e)};return g[h].constructor===Array?i.li=c:"string"==typeof g[h]&&(i.si=c),this._submit([i],d)})},move:function(){return g(this,arguments,function(a,b,c,d){var e=this,f=[{p:a.concat(b),lm:c}];return this._submit(f,function(){e._updateSubdocPaths(f),d&&d.apply(d,arguments)})})},push:function(){return g(this,arguments,function(a,c,d){var e=b(this.getSnapshot(),a),f=e.elem[e.key].length;return a.push(f),this.insert(a,c,d)})},add:function(a,b){return g(this,arguments,function(a,c,d){var e=[{p:a,na:b}];return this._submit(e,d)})},getLength:function(){return g(this,arguments,function(a){return this.get(a).length})},getText:function(){return g(this,arguments,function(a){return console.warn("Deprecated. Use `get()` instead"),this.get(a)})},deleteText:function(){return g(this,arguments,function(a,c,d,e){console.warn("Deprecated. Use `remove(path, length, cb)` instead");var f=b(this.getSnapshot(),a),g=[{p:a.concat(d),sd:f.elem[f.key].slice(d,d+c)}];return this._submit(g,e)})},addListener:function(a,b){return g(this,arguments,function(a,c,d){var e={path:a,event:b,cb:d};return this._listeners||(this._listeners=[]),this._listeners.push(e),e})},removeListener:function(a){if(this._listeners){var b=this._listeners.indexOf(a);return 0>b?!1:(this._listeners.splice(b,1),!0)}},_onOp:function(a){for(var b=0;b<a.length;b++){var d=a[b];this._fixComponentPaths(d),void 0!==d.lm&&this._updateSubdocPaths([d]);for(var e=void 0===d.na?d.p.slice(0,d.p.length-1):d.p,f=0;f<this._listeners.length;f++){var g=this._listeners[f],h=g.cb;if(c(g.path,e))switch(g.event){case"insert":void 0!==d.li&&void 0===d.ld?h(d.p[d.p.length-1],d.li):void 0!==d.oi&&void 0===d.od?h(d.p[d.p.length-1],d.oi):void 0!==d.si&&h(d.p[d.p.length-1],d.si);break;case"delete":void 0===d.li&&void 0!==d.ld?h(d.p[d.p.length-1],d.ld):void 0===d.oi&&void 0!==d.od?h(d.p[d.p.length-1],d.od):void 0!==d.sd&&h(d.p[d.p.length-1],d.sd);break;case"replace":void 0!==d.li&&void 0!==d.ld?h(d.p[d.p.length-1],d.ld,d.li):void 0!==d.oi&&void 0!==d.od&&h(d.p[d.p.length-1],d.od,d.oi);break;case"move":void 0!==d.lm&&h(d.p[d.p.length-1],d.lm);break;case"add":void 0!==d.na&&h(d.na)}else if(j.canOpAffectOp(g.path,e)&&"child op"===g.event){var i=d.p.slice(g.path.length);h(i,d)}}}}}}.call(this);var d=window.sharejs={version:"0.7.0-alpha8"},e=function(){};e.prototype.on=function(a,b){var c=this._events=this._events||{};(c[a]=c[a]||[]).push(b)},e.prototype.removeListener=function(a,b){for(var c=this._events=this._events||{},d=c[a]=c[a]||[],e=0;e<d.length;)d[e]===b&&(d[e]=void 0),e++;setTimeout(function(){c[a]=[];for(var b,e=0;e<d.length;e++)(b=d[e])&&c[a].push(b)},0)},e.prototype.emit=function(a){var b=this._events,c=Array.prototype.splice.call(arguments,1);if(!b||!b[a])return"error"==a&&console&&console.error.apply(console,c),void 0;for(var d=b[a],e=0;e<d.length;e++)d[e]&&d[e].apply(this,c)},e.prototype.once=function(a,b){var c,d=this;this.on(a,c=function(){d.removeListener(a,c),b.apply(d,arguments)})},e.mixin=function(a){var b=a.prototype||a;return b.on=e.prototype.on,b.removeListener=e.prototype.removeListener,b.emit=e.prototype.emit,b.once=e.prototype.once,a},"undefined"!=typeof b&&(b.exports=e);var f,e;"undefined"!=typeof brequire?(f=brequire("ottypes"),e=brequire("./microevent")):f=window.ottypes;var g=d.Doc=function(a,b,c){this.connection=a,this.collection=b,this.name=c,this.version=this.type=null,this.action=null,this.state=null,this.subscribed=!1,this.wantSubscribe=!1,this._subscribeCallbacks=[],this.provides={},this.editingContexts=[],this.inflightData=null,this.pendingData=[]};e.mixin(g),g.prototype.destroy=function(a){var b=this;this.unsubscribe(function(){setTimeout(function(){for(var a=0;a<b._subscribeCallbacks.length;a++)b._subscribeCallbacks[a]("Document destroyed");b._subscribeCallbacks.length=0},0),b.connection._destroyDoc(b),b.removeContexts(),a&&a()})},g.prototype._setType=function(a){if("string"==typeof a){if(!f[a])throw new Error("Missing type "+a);a=f[a]}this.removeContexts(),this.type=a,a?a.api&&(this.provides=a.api.provides):this.provides={}},g.prototype.injestData=function(a){if(this.state)return"undefined"!=typeof console&&console.warn("Ignoring attempt to injest data in state",this.state),void 0;if("number"!=typeof a.v)throw new Error("Missing version in injested data");this.version=a.v,this.snapshot=a.data||a.snapshot,this._setType(a.type),this.state="ready",this.emit("ready")},g.prototype.getSnapshot=function(){return this.snapshot},g.prototype.whenReady=function(a){"ready"===this.state?a():this.on("ready",a)},g.prototype.hasPending=function(){return null!=this.inflightData||!!this.pendingData.length},g.prototype._send=function(a){a.c=this.collection,a.d=this.name,this.connection.send(a)},g.prototype._handleSubscribe=function(a,b){a&&"Already subscribed"!==a?(console&&console.error("Could not subscribe: "+a),this.emit("error",a),this._setWantSubscribe(!1,null,a)):(b&&this.injestData(b),this.subscribed=!0,this.emit("subscribe"),this._finishSub(!0)),this._clearAction("subscribe")},g.prototype._onMessage=function(a){if(a.c!==this.collection||a.d!==this.name)throw new Error("Got message for wrong document.");switch(a.a){case"fetch":a.data&&this.injestData(a.data),this._finishSub("fetch",a.error),"fetch"===this.wantSubscribe&&(this.wantSubscribe=!1),this._clearAction("fetch");break;case"sub":this._handleSubscribe(a.error,a.data);break;case"unsub":this.subscribed=!1,this.emit("unsubscribe"),this._finishSub(!1,a.error),this._clearAction("unsubscribe");break;case"ack":a.error&&"Op already submitted"!==a.error&&(this.inflightData?(console.warn("Operation was rejected ("+a.error+"). Trying to rollback change locally."),this._tryRollback(this.inflightData)):console&&console.warn("Second acknowledgement message (error) received",a,this),this._clearInflightOp(a.error));break;case"op":if(this.inflightData&&a.src===this.inflightData.src&&a.seq===this.inflightData.seq){this._opAcknowledged(a);break}if(a.v!==this.version)break;this.inflightData&&k(this.inflightData,a);for(var b=0;b<this.pendingData.length;b++)k(this.pendingData[b],a);this.version++,this._otApply(a,!1),this._afterOtApply(a,!1);break;case"meta":console&&console.warn("Unhandled meta op:",a);break;default:console&&console.warn("Unhandled document message:",a)}},g.prototype._onConnectionStateChanged=function(a){"connecting"===a?this.inflightData?this._sendOpData():this.flush():"connected"===a?this.flush():"disconnected"===a&&(this.action=null,this.subscribed=!1,this.subscribed&&this.emit("unsubscribed"))},g.prototype._clearAction=function(a){this.action!==a&&console.warn("Unexpected action "+this.action+" expected: "+a),this.action=null,this.flush()},g.prototype.flush=function(){if(this.connection.canSend&&!this.action){for(var a;this.pendingData.length&&i(a=this.pendingData[0]);){for(var b=a.callbacks,c=0;c<b.length;c++)b[c](a.error);this.pendingData.shift()}this.subscribed&&!this.wantSubscribe?(this.action="unsubscribe",this._send({a:"unsub"})):this.subscribed||"fetch"!==this.wantSubscribe?!this.subscribed&&this.wantSubscribe?(this.action="subscribe",this.connection.sendSubscribe(this.collection,this.name,"ready"===this.state?this.version:null)):!this.paused&&this.pendingData.length&&"connected"===this.connection.state&&(this.inflightData=this.pendingData.shift(),this._sendOpData()):(this.action="fetch",this._send("ready"===this.state?{a:"fetch",v:this.version}:{a:"fetch"}))}},g.prototype._setWantSubscribe=function(a,b,c){if(this.subscribed===this.wantSubscribe&&(this.subscribed===a||"fetch"===a&&this.subscribed))return b&&b(c),void 0;if(!this.wantSubscribe!=!a){for(var d=0;d<this._subscribeCallbacks.length;d++)this._subscribeCallbacks[d](c);this._subscribeCallbacks.length=0}("fetch"!==a||this.wantSubscribe!==!0)&&(this.wantSubscribe=a),b&&this._subscribeCallbacks.push(b),this.flush()},g.prototype.subscribe=function(a){this._setWantSubscribe(!0,a)},g.prototype.unsubscribe=function(a){this._setWantSubscribe(!1,a)},g.prototype.fetch=function(a){this._setWantSubscribe("fetch",a)},g.prototype._finishSub=function(a,b){if(a===this.wantSubscribe){for(var c=0;c<this._subscribeCallbacks.length;c++)this._subscribeCallbacks[c](b);this._subscribeCallbacks.length=0}};var h=function(a){delete a.op,delete a.create,delete a.del},i=function(a){return!a.op&&!a.create&&!a.del},j=function(a,b,c){if(b.create&&c.del)h(b);else if(b.create&&c.op){var d=void 0===b.create.data?a.create():b.create.data;b.create.data=a.apply(d,c.op)}else if(i(b))b.create=c.create,b.del=c.del,b.op=c.op;else{if(!(b.op&&c.op&&a.compose))return!1;b.op=a.compose(b.op,c.op)}return!0},k=function(a,b){if(b.create||b.del)return h(a);if(a.create)throw new Error("Invalid state. This is a bug.");if(a.del)return h(b);if(b.op&&a.op)if(a.type.transformX){var c=a.type.transformX(a.op,b.op);a.op=c[0],b.op=c[1]}else{var d=a.type.transform(a.op,b.op,"left"),e=a.type.transform(b.op,a.op,"right");a.op=d,b.op=e}};g.prototype._otApply=function(a,b){if(this.locked=!0,a.create){var c=a.create;this._setType(c.type),this.snapshot=this.type.create(c.data),this.once("unlock",function(){this.emit("create",b)})}else if(a.del){var d=this.snapshot;this._setType(null),this.once("unlock",function(){this.emit("del",b,d)})}else if(a.op){if(!this.type)throw new Error("Document does not exist");for(var e=this.type,f=a.op,g=0;g<this.editingContexts.length;g++){var h=this.editingContexts[g];h!=b&&h._beforeOp&&h._beforeOp(a.op)}if(this.emit("before op",f,b),this.incremental&&e.incrementalApply){var i=this;e.incrementalApply(this.snapshot,f,function(a,c){i.snapshot=c,i.emit("op",a,b)})}else this.snapshot=e.apply(this.snapshot,f),this.emit("op",f,b)}},g.prototype._afterOtApply=function(a,b){if(this.locked=!1,this.emit("unlock"),a.op){for(var c=this.editingContexts,d=0;d<c.length;d++){var e=c[d];e!=b&&e._onOp&&e._onOp(a.op)}for(var d=0;d<c.length;d++)c.remove&&c.splice(d--,1);return this.emit("after op",a.op,b)}},g.prototype._sendOpData=function(){var a=this.inflightData;if(this.action)throw new Error("invalid state "+this.action+" for sendOpData");this.action="submit";var b={a:"op",v:this.version};a.src&&(b.src=a.src,b.seq=a.seq),a.op&&(b.op=a.op),a.create&&(b.create=a.create),a.del&&(b.del=a.del),b.c=this.collection,b.d=this.name,this.connection.sendOp(b),a.src||(a.src=this.connection.id,a.seq=this.connection.seq++)},g.prototype._submitOpData=function(a,b,c){"function"==typeof b&&(c=b,b=!0),null==b&&(b=!0);var d=function(a){c?c(a):console&&console.warn("Failed attempt to submitOp:",a)};if(this.locked)return d("Cannot call submitOp from inside an 'op' event handler");if(a.op){if(!this.type)return d("Document has not been created");this.type.normalize&&(a.op=this.type.normalize(a.op))}this.state||(this.state="floating"),this._otApply(a,b);var e=this.pendingData[this.pendingData.length-1];this.pendingData.length&&(e=this.pendingData[this.pendingData.length-1],j(this.type,e,a))||(e=a,a.type=this.type,a.callbacks=[],this.pendingData.push(a)),c&&e.callbacks.push(c),this._afterOtApply(a,b);var f=this;setTimeout(function(){f.flush()},0)},g.prototype.submitOp=function(a,b,c){this._submitOpData({op:a},b,c)},g.prototype.create=function(a,b,c,d){return"function"==typeof b&&(c=b,b=void 0),this.type?(d&&d("Document already exists"),void 0):(this._submitOpData({create:{type:a,data:b}},c,d),void 0)},g.prototype.del=function(a,b){return this.type?(this._submitOpData({del:!0},a,b),void 0):(b&&b("Document does not exist"),void 0)},g.prototype.pause=function(){this.paused=!0},g.prototype.resume=function(){this.paused=!1,this.flush()},g.prototype._tryRollback=function(a){if(a.create)this._setType(null),"floating"===this.state?this.state=null:console.warn("Rollback a create from state "+this.state);else if(a.op&&a.type.invert){a.op=a.type.invert(a.op);for(var b=0;b<this.pendingData.length;b++)k(this.pendingData[b],a);this._otApply(a,!1),this._afterOtApply(a,!1)}else(a.op||a.del)&&(this._setType(null),this.version=null,this.state=null,this.subscribed=!1,this.emit("error","Op apply failed and the operation could not be reverted"),this.fetch(),this.flush())},g.prototype._clearInflightOp=function(a){for(var b=this.inflightData.callbacks,c=0;c<b.length;c++)b[c](a||this.inflightData.error);this.inflightData=null,this._clearAction("submit"),this.pendingData.length||this.emit("nothing pending")},g.prototype._opAcknowledged=function(a){if(!this.state)throw new Error("opAcknowledged called from a null state. This should never happen.");if("floating"===this.state){if(!this.inflightData.create)throw new Error("Cannot acknowledge an op.");this.version=a.v,this.state="ready";var b=this;setTimeout(function(){b.emit("ready")},0)}else if(a.v!==this.version)throw new Error("Invalid version from server. This can happen when you submit ops in a submitOp callback.");this.version++,this._clearInflightOp()},g.prototype.createContext=function(){var a=this.type;if(!a)throw new Error("Missing type");var b=this,c={getSnapshot:function(){return b.snapshot},submitOp:function(a,d){b.submitOp(a,c,d)},destroy:function(){this.detach&&(this.detach(),delete this.detach),delete this._onOp,this.remove=!0},_doc:this};if(a.api)for(var d in a.api)c[d]=a.api[d];else c.provides={};return this.editingContexts.push(c),c},g.prototype.removeContexts=function(){for(var a=0;a<this.editingContexts.length;a++)this.editingContexts[a].destroy();this.editingContexts.length=0};var f,g;"undefined"!=typeof brequire?(f=brequire("ottypes"),g=brequire("./doc").Doc,n=brequire("./query").Query):(f=window.ottypes,g=d.Doc);var l=d.Connection=function(a){this.socket=a,this.collections={},this.nextQueryId=1,this.queries={},this.state=0===a.readyState||1===a.readyState?"connecting":"disconnected",this.canSend="connecting"===this.state,this.reset(),this.debug=!1,this.messageBuffer=[];var b=this,c=function(a){switch(a.a){case"init":if(0!==a.protocol)throw new Error("Invalid protocol version");if("string"!=typeof a.id)throw new Error("Invalid client id");b.id=a.id,b._setState("connected");break;case"qfetch":case"qsub":case"q":case"qunsub":var c=b.queries[a.id];c&&c._onMessage(a);break;case"bs":var d=a.s;for(var e in d)for(var f in d[e]){var g=b.get(e,f);if(!g){console&&console.error("Message for unknown doc. Ignoring.",a);break}var a=d[e][f];"object"==typeof a?g._handleSubscribe(a.error,a.data):g._handleSubscribe(null,null)}break;default:var h,f,g;if(a.d?(h=b._lastReceivedCollection=a.c,f=b._lastReceivedDoc=a.d):(h=a.c=b._lastReceivedCollection,f=a.d=b._lastReceivedDoc),g=b.get(h,f),!g){console&&console.error("Message for unknown doc. Ignoring.",a);break}g._onMessage(a)}};a.onmessage=function(a){for(b.debug&&console.log("RECV",JSON.stringify(a)),b.messageBuffer.push({t:(new Date).toTimeString(),recv:JSON.stringify(a)});b.messageBuffer.length>100;)b.messageBuffer.shift();try{c(a)}catch(d){b.emit("error",d)}},a.onopen=function(){b._setState("connecting")},a.onerror=function(a){b.emit("connection error",a)},a.onclose=function(a){b._setState("disconnected",a),("Closed"===a||"Stopped by server"===a)&&b._setState("stopped",a)}};l.prototype.reset=function(){this.id=this.lastError=this._lastReceivedCollection=this._lastReceivedDoc=this._lastSentCollection=this._lastSentDoc=null,this.seq=1},l.prototype._setState=function(a,b){if(this.state!==a){if("connecting"===a&&"disconnected"!==this.state&&"stopped"!==this.state||"connected"===a&&"connecting"!==this.state)throw new Error("Cannot transition directly from "+this.state+" to "+a);this.state=a,this.canSend="connecting"===a||"connected"===a,"disconnected"===a&&this.reset(),this.emit(a,b),this.opQueue=[],this.subscribeData={};for(var c in this.collections){var d=this.collections[c];for(var e in d)d[e]._onConnectionStateChanged(a,b)}this.opQueue.sort(function(a,b){return a.seq-b.seq});for(var f=0;f<this.opQueue.length;f++)this.send(this.opQueue[f]);for(var g in this.subscribeData){this.send({a:"bs",s:this.subscribeData});break}this.opQueue=null,this.subscribeData=null;for(var h in this.queries)this.queries[h]._onConnectionStateChanged(a,b)}},l.prototype.sendOp=function(a){this.opQueue?this.opQueue.push(a):this.send(a)},l.prototype.sendSubscribe=function(a,b,c){if(this.subscribeData){var d=this.subscribeData;d[a]||(d[a]={}),d[a][b]=c||null}else{var e={a:"sub",c:a,d:b};
null!=c&&(e.v=c),this.send(e)}},l.prototype.send=function(a){for(this.debug&&console.log("SEND",JSON.stringify(a)),this.messageBuffer.push({t:Date.now(),send:JSON.stringify(a)});this.messageBuffer.length>100;)this.messageBuffer.shift();if(a.d){var b=a.c,c=a.d;b===this._lastSentCollection&&c===this._lastSentDoc?(delete a.c,delete a.d):(this._lastSentCollection=b,this._lastSentDoc=c)}this.socket.send(a)},l.prototype.disconnect=function(){this.socket.close()},l.prototype.getExisting=function(a,b){return this.collections[a]?this.collections[a][b]:void 0},l.prototype.getOrCreate=function(a,b,c){return console.trace("getOrCreate is deprecated. Use get() instead"),this.get(a,b,c)},l.prototype.get=function(a,b,c){var d=this.getExisting(a,b);if(!d){d=new g(this,a,b);var e=this.collections[a]=this.collections[a]||{};e[b]=d}return c&&void 0!==c.data&&!d.state&&d.injestData(c),d},l.prototype._destroyDoc=function(b){var c=this.collections[b.collection];c&&(delete c[b.name],a(c)||delete this.collections[b.collection])},l.prototype._createQuery=function(a,b,c,d,e){if("fetch"!==a&&"sub"!==a)throw new Error("Invalid query type: "+a);d||(d={});var f=this.nextQueryId++,g=new n(a,this,f,b,c,d,e);return this.queries[f]=g,g._execute(),g},l.prototype._destroyQuery=function(a){delete this.queries[a.id]},l.prototype.createFetchQuery=function(a,b,c,d){return this._createQuery("fetch",a,b,c,d)},l.prototype.createSubscribeQuery=function(a,b,c,d){return this._createQuery("sub",a,b,c,d)},"undefined"!=typeof brequire&&(e=brequire("./microevent")),e.mixin(l);var m=function(a,b,c){if(b!==c){for(var d=0;b.charAt(d)===c.charAt(d);)d++;for(var e=0;b.charAt(b.length-1-e)===c.charAt(c.length-1-e)&&e+d<b.length&&e+d<c.length;)e++;b.length!==d+e&&a.remove(d,b.length-d-e),c.length!==d+e&&a.insert(d,c.slice(d,c.length-e))}};window.sharejs.Doc.prototype.attachTextarea=function(a,b){if(b||(b=this.createContext()),!b.provides.text)throw new Error("Cannot attach to non-text document");a.value=b.get();var c,d=function(b,d){if(d)var e=[d(a.selectionStart),d(a.selectionEnd)];var f=a.scrollTop;a.value=b,c=a.value,a.scrollTop!==f&&(a.scrollTop=f),e&&window.document.activeElement===a&&(a.selectionStart=e[0],a.selectionEnd=e[1])};d(b.get()),b.onInsert=function(b,c){var e=function(a){return a>b?a+c.length:a},f=a.value.replace(/\r\n/g,"\n");d(f.slice(0,b)+c+f.slice(b),e)},b.onRemove=function(b,c){var e=function(a){return a>b?a-Math.min(c,a-b):a},f=a.value.replace(/\r\n/g,"\n");d(f.slice(0,b)+f.slice(b+c),e)};for(var e=function(){setTimeout(function(){a.value!==c&&(c=a.value,m(b,b.get(),a.value.replace(/\r\n/g,"\n")))},0)},f=["textInput","keydown","keyup","select","cut","paste"],g=0;g<f.length;g++){var h=f[g];a.addEventListener?a.addEventListener(h,e,!1):a.attachEvent("on"+h,e)}return b.detach=function(){for(var b=0;b<f.length;b++){var c=f[b];a.removeEventListener?a.removeEventListener(c,e,!1):a.detachEvent("on"+c,e)}},b};var g;"undefined"!=typeof brequire&&(g=brequire("./doc").Doc);var n=d.Query=function(a,b,c,d,e,f,g){this.type=a,this.connection=b,this.id=c,this.collection=d,this.query=e,this.docMode=f.docMode,"subscribe"===this.docMode&&(this.docMode="sub"),this.poll=f.poll,this.backend=f.backend||f.source,this.knownDocs=f.knownDocs||[],this.results=[],this.ready=!1,this.callback=g};n.prototype.action="qsub",n.prototype._execute=function(){if(this.connection.canSend){if(this.docMode)for(var a={},b=0;b<this.knownDocs.length;b++){var c=this.knownDocs[b],d=a[c.collection]=a[c.collection]||{};d[c.name]=c.version}var e={a:"q"+this.type,id:this.id,c:this.collection,o:{},q:this.query};this.docMode&&(e.o.m=this.docMode,e.o.vs=a),null!=this.backend&&(e.o.b=this.backend),void 0!==this.poll&&(e.o.p=this.poll),this.connection.send(e)}},n.prototype._dataToDocs=function(a){for(var b,c=[],d=0;d<a.length;d++){var e=a[d];e.type?b=e.type:e.type=b;var f=this.connection.get(e.c||this.collection,e.d,e);"sub"===this.docMode&&(f.subscribed=!0,f._setWantSubscribe(!0),f.emit("subscribe"),f._finishSub(!0)),c.push(f)}return c},n.prototype.destroy=function(){this.connection.canSend&&"sub"===this.type&&this.connection.send({a:"qunsub",id:this.id}),this.connection._destroyQuery(this)},n.prototype._onConnectionStateChanged=function(){"connecting"===this.connection.state&&this._execute()},n.prototype._onMessage=function(a){if("qfetch"===a.a!=("fetch"===this.type))return console&&console.warn("Invalid message sent to query",a,this),void 0;switch(a.error&&this.emit("error",a.error),a.a){case"qfetch":var b=a.data?this._dataToDocs(a.data):void 0;this.callback&&this.callback(a.error,b,a.extra),this.connection._destroyQuery(this);break;case"q":if(a.diff){for(var c=0;c<a.diff.length;c++){var d=a.diff[c];"insert"===d.type&&(d.values=this._dataToDocs(d.values))}for(var c=0;c<a.diff.length;c++){var d=a.diff[c];switch(d.type){case"insert":var e=d.values;Array.prototype.splice.apply(this.results,[d.index,0].concat(e)),this.emit("insert",e,d.index);break;case"remove":var f=d.howMany||1,g=this.results.splice(d.index,f);this.emit("remove",g,d.index);break;case"move":var f=d.howMany||1,h=this.results.splice(d.from,f);Array.prototype.splice.apply(this.results,[d.to,0].concat(h)),this.emit("move",h,d.from,d.to)}}}a.extra&&this.emit("extra",a.extra);break;case"qsub":if(!a.error){var i=this.results;this.results=this.knownDocs=this._dataToDocs(a.data),this.extra=a.extra,this.ready=!0,this.emit("change",this.results,i)}this.callback&&(this.callback(a.error,this.results,this.extra),delete this.callback)}},n.prototype.setQuery=function(a){if("sub"!==this.type)throw new Error("cannot change a fetch query");this.query=a,this.connection.canSend&&(this.connection.send({a:"qunsub",id:this.id}),this._execute())};var e;"undefined"!=typeof brequire&&(e=brequire("./microevent")),e.mixin(n)}()},{}],42:[function(a,b){b.exports=function(a,b,c){for(null==a&&(a=32),null==b&&(b=""),null==c&&(c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789");a-->0;)b+=c.charAt(Math.floor(Math.random()*c.length));return b}},{}],43:[function(){},{}],44:[function(a,b){function c(a,b,c){var g,j,k,l,m,n,o,p=0,q=!1,r=!0;if(!e(a))throw new TypeError;if(b=i(0,b)||0,c===!0){var s=!0;r=!1}else f(c)&&(s=c.leading,q="maxWait"in c&&(i(b,c.maxWait)||0),r="trailing"in c?c.trailing:r);var t=function(){var c=b-(h()-l);if(0>=c){j&&clearTimeout(j);var e=o;j=n=o=d,e&&(p=h(),k=a.apply(m,g))}else n=setTimeout(t,c)},u=function(){n&&clearTimeout(n),j=n=o=d,(r||q!==b)&&(p=h(),k=a.apply(m,g))};return function(){if(g=arguments,l=h(),m=this,o=r&&(n||!s),q===!1)var c=s&&!n;else{j||s||(p=l);var d=q-(l-p);0>=d?(j&&(j=clearTimeout(j)),p=l,k=a.apply(m,g)):j||(j=setTimeout(u,d))}return n||b===q||(n=setTimeout(t,b)),c&&(k=a.apply(m,g)),k}}var d,e=a("lodash.isfunction"),f=a("lodash.isobject"),g=a("lodash._renative");Object.prototype;var h=g.test(h=Date.now)&&h||function(){return+new Date},i=Math.max;b.exports=c},{"lodash._renative":45,"lodash.isfunction":46,"lodash.isobject":47}],45:[function(a,b){var c=Object.prototype,d=RegExp("^"+String(c.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$");b.exports=d},{}],46:[function(a,b){function c(a){return"function"==typeof a}b.exports=c},{}],47:[function(a,b){function c(a){return!(!a||!d[typeof a])}var d=a("lodash._objecttypes");b.exports=c},{"lodash._objecttypes":48}],48:[function(a,b){var c={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};b.exports=c},{}],49:[function(a,b,c){var d="undefined"!=typeof self?self:"undefined"!=typeof window?window:{};(function(){function a(a,b,c){for(var d=(c||0)-1,e=a?a.length:0;++d<e;)if(a[d]===b)return d;return-1}function e(b,c){var d=typeof c;if(b=b.cache,"boolean"==d||null==c)return b[c]?0:-1;"number"!=d&&"string"!=d&&(d="object");var e="number"==d?c:u+c;return b=(b=b[d])&&b[e],"object"==d?b&&a(b,c)>-1?0:-1:b?0:-1}function f(a){var b=this.cache,c=typeof a;if("boolean"==c||null==a)b[a]=!0;else{"number"!=c&&"string"!=c&&(c="object");var d="number"==c?a:u+a,e=b[c]||(b[c]={});"object"==c?(e[d]||(e[d]=[])).push(a):e[d]=!0}}function g(a){return a.charCodeAt(0)}function h(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||"undefined"==typeof c)return 1;if(d>c||"undefined"==typeof d)return-1}return a.index-b.index}function i(a){var b=-1,c=a.length,d=a[0],e=a[c-1];if(d&&"object"==typeof d&&e&&"object"==typeof e)return!1;var g=l();g["false"]=g["null"]=g["true"]=g.undefined=!1;var h=l();for(h.array=a,h.cache=g,h.push=f;++b<c;)h.push(a[b]);return h}function j(a){return"\\"+W[a]}function k(){return r.pop()||[]}function l(){return s.pop()||{array:null,cache:null,configurable:!1,criteria:null,enumerable:!1,"false":!1,index:0,leading:!1,maxWait:0,"null":!1,number:null,object:null,push:null,string:null,trailing:!1,"true":!1,undefined:!1,value:null,writable:!1}}function m(a){a.length=0,r.length<w&&r.push(a)}function n(a){var b=a.cache;b&&n(b),a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null,s.length<w&&s.push(a)}function o(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);for(var d=-1,e=c-b||0,f=Array(0>e?0:e);++d<e;)f[d]=a[b+d];return f}function p(b){function c(a){return a&&"object"==typeof a&&!Ud(a)&&vd.call(a,"__wrapped__")?a:new d(a)}function d(a,b){this.__chain__=!!b,this.__wrapped__=a}function f(a,b,c,d,e){var g=a;if(c){if(g=c(g),"undefined"!=typeof g)return g;g=a}var h=xb(g);if(h){var i=Bd.call(g);if(!U[i])return g;var j=Ud(g)}if(!h||!b)return h?j?o(g):_d({},g):g;var l=Rd[i];switch(i){case N:case O:return new l(+g);case Q:case T:return new l(g);case S:return l(g.source,C.exec(g))}var n=!d;d||(d=k()),e||(e=k());for(var p=d.length;p--;)if(d[p]==a)return e[p];return g=j?l(g.length):{},j&&(vd.call(a,"index")&&(g.index=a.index),vd.call(a,"input")&&(g.input=a.input)),d.push(a),e.push(g),(j?Qb:ce)(a,function(a,h){g[h]=f(a,b,c,d,e)}),n&&(m(d),m(e)),g}function r(a,b,c){if("function"!=typeof a)return Qc;if("undefined"==typeof b)return a;var d=a.__bindData__||Sd.funcNames&&!a.name;if("undefined"==typeof d){var e=H&&td.call(a);Sd.funcNames||!e||D.test(e)||(d=!0),(Sd.funcNames||!d)&&(d=!H||H.test(e),Td(a,d))}if(d!==!0&&d&&1&d[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return Ac(a,b)}function s(a,b,c,d){for(var e=(d||0)-1,f=a?a.length:0,g=[];++e<f;){var h=a[e];h&&"object"==typeof h&&(Ud(h)||gb(h))?xd.apply(g,b?h:s(h,b,c)):c||g.push(h)}return g}function w(a,b,c,d,e,f){if(c){var g=c(a,b);if("undefined"!=typeof g)return!!g}if(a===b)return 0!==a||1/a==1/b;var h=typeof a,i=typeof b;if(!(a!==a||a&&V[h]||b&&V[i]))return!1;if(null==a||null==b)return a===b;var j=Bd.call(a),l=Bd.call(b);if(j==L&&(j=R),l==L&&(l=R),j!=l)return!1;switch(j){case N:case O:return+a==+b;case Q:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case S:case T:return a==kd(b)}var n=j==M;if(!n){if(vd.call(a,"__wrapped__ ")||vd.call(b,"__wrapped__"))return w(a.__wrapped__||a,b.__wrapped__||b,c,d,e,f);if(j!=R)return!1;var o=a.constructor,p=b.constructor;if(o!=p&&!(wb(o)&&o instanceof o&&wb(p)&&p instanceof p))return!1}var q=!e;e||(e=k()),f||(f=k());for(var r=e.length;r--;)if(e[r]==a)return f[r]==b;var s=0;if(g=!0,e.push(a),f.push(b),n){if(r=a.length,s=b.length,g=s==a.length,!g&&!d)return g;for(;s--;){var t=r,u=b[s];if(d)for(;t--&&!(g=w(a[t],u,c,d,e,f)););else if(!(g=w(a[s],u,c,d,e,f)))break}return g}return be(b,function(b,h,i){return vd.call(i,h)?(s++,g=vd.call(a,h)&&w(a[h],b,c,d,e,f)):void 0}),g&&!d&&be(a,function(a,b,c){return vd.call(c,b)?g=--s>-1:void 0}),q&&(m(e),m(f)),g}function W(a,b,c,d,e){(Ud(b)?Qb:ce)(b,function(b,f){var g,h,i=b,j=a[f];if(b&&((h=Ud(b))||de(b))){for(var k=d.length;k--;)if(g=d[k]==b){j=e[k];break}if(!g){var l;c&&(i=c(j,b),(l="undefined"!=typeof i)&&(j=i)),l||(j=h?Ud(j)?j:[]:de(j)?j:{}),d.push(b),e.push(j),l||W(j,b,c,d,e)}}else c&&(i=c(j,b),"undefined"==typeof i&&(i=b)),"undefined"!=typeof i&&(j=i);a[f]=j})}function Y(b,c,d){var f=-1,g=db(),h=b?b.length:0,j=[],l=!c&&h>=v&&g===a,o=d||l?k():j;if(l){var p=i(o);p?(g=e,o=p):(l=!1,o=d?o:(m(o),j))}for(;++f<h;){var q=b[f],r=d?d(q,f,b):q;(c?!f||o[o.length-1]!==r:g(o,r)<0)&&((d||l)&&o.push(r),j.push(q))}return l?(m(o.array),n(o)):d&&m(o),j}function $(a){return function(b,d,e){var f={};d=c.createCallback(d,e,3);var g=-1,h=b?b.length:0;if("number"==typeof h)for(;++g<h;){var i=b[g];a(f,i,d(i,g,b),b)}else ce(b,function(b,c,e){a(f,b,d(b,c,e),e)});return f}}function ab(a,b,c,d,e,f){var g=1&b,h=2&b,i=4&b,j=8&b,k=16&b,l=32&b,m=a;if(!h&&!wb(a))throw new ld;k&&!c.length&&(b&=-17,k=c=!1),l&&!d.length&&(b&=-33,l=d=!1);var n=a&&a.__bindData__;if(n)return!g||1&n[1]||(n[4]=e),!g&&1&n[1]&&(b|=8),!i||4&n[1]||(n[5]=f),k&&xd.apply(n[2]||(n[2]=[]),c),l&&xd.apply(n[3]||(n[3]=[]),d),n[1]|=b,ab.apply(null,n);if(!g||h||i||l||!(Sd.fastBind||Ed&&k))p=function(){var n=arguments,o=g?e:this;if((i||k||l)&&(n=Od.call(n),k&&Cd.apply(n,c),l&&xd.apply(n,d),i&&n.length<f))return b|=16,ab(a,j?b:-4&b,n,null,e,f);if(h&&(a=o[m]),this instanceof p){o=bb(a.prototype);var q=a.apply(o,n);return xb(q)?q:o}return a.apply(o,n)};else{if(k){var o=[e];xd.apply(o,c)}var p=k?Ed.apply(a,o):Ed.call(a,e)}return Td(p,Od.call(arguments)),p}function bb(a){return xb(a)?Fd(a):{}}function cb(a){return Xd[a]}function db(){var b=(b=c.indexOf)===kc?a:b;return b}function eb(a){var b,c;return a&&Bd.call(a)==R&&(b=a.constructor,!wb(b)||b instanceof b)?(be(a,function(a,b){c=b}),"undefined"==typeof c||vd.call(a,c)):!1}function fb(a){return Yd[a]}function gb(a){return a&&"object"==typeof a?Bd.call(a)==L:!1}function hb(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c=b,b=!1),f(a,b,"function"==typeof c&&r(c,d,1))}function ib(a,b,c){return f(a,!0,"function"==typeof b&&r(b,c,1))}function jb(a,b,d){var e;return b=c.createCallback(b,d,3),ce(a,function(a,c,d){return b(a,c,d)?(e=c,!1):void 0}),e}function kb(a,b,d){var e;return b=c.createCallback(b,d,3),mb(a,function(a,c,d){return b(a,c,d)?(e=c,!1):void 0}),e}function lb(a,b,c){var d=[];be(a,function(a,b){d.push(b,a)});var e=d.length;for(b=r(b,c,3);e--&&b(d[e--],d[e],a)!==!1;);return a}function mb(a,b,c){var d=Wd(a),e=d.length;for(b=r(b,c,3);e--;){var f=d[e];if(b(a[f],f,a)===!1)break}return a}function nb(a){var b=[];return be(a,function(a,c){wb(a)&&b.push(c)}),b.sort()}function ob(a,b){return a?vd.call(a,b):!1}function pb(a){for(var b=-1,c=Wd(a),d=c.length,e={};++b<d;){var f=c[b];e[a[f]]=f}return e}function qb(a){return a===!0||a===!1||Bd.call(a)==N}function rb(a){return a?"object"==typeof a&&Bd.call(a)==O:!1}function sb(a){return a?1===a.nodeType:!1}function tb(a){var b=!0;if(!a)return b;var c=Bd.call(a),d=a.length;return c==M||c==T||c==L||c==R&&"number"==typeof d&&wb(a.splice)?!d:(ce(a,function(){return b=!1}),b)}function ub(a,b,c,d){return w(a,b,"function"==typeof c&&r(c,d,2))}function vb(a){return Hd(a)&&!Id(parseFloat(a))}function wb(a){return"function"==typeof a}function xb(a){return!(!a||!V[typeof a])}function yb(a){return Ab(a)&&a!=+a}function zb(a){return null===a}function Ab(a){return"number"==typeof a||Bd.call(a)==Q}function Bb(a){return a?"object"==typeof a&&Bd.call(a)==S:!1}function Cb(a){return"string"==typeof a||Bd.call(a)==T}function Db(a){return"undefined"==typeof a}function Eb(a){var b=arguments,c=2;if(!xb(a))return a;if("number"!=typeof b[2]&&(c=b.length),c>3&&"function"==typeof b[c-2])var d=r(b[--c-1],b[c--],2);else c>2&&"function"==typeof b[c-1]&&(d=b[--c]);for(var e=Od.call(arguments,1,c),f=-1,g=k(),h=k();++f<c;)W(a,e[f],d,g,h);return m(g),m(h),a}function Fb(a,b,d){var e=db(),f="function"==typeof b,g={};if(f)b=c.createCallback(b,d,3);else var h=s(arguments,!0,!1,1);return be(a,function(a,c,d){(f?!b(a,c,d):e(h,c)<0)&&(g[c]=a)}),g}function Gb(a){for(var b=-1,c=Wd(a),d=c.length,e=cd(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function Hb(a,b,d){var e={};if("function"!=typeof b)for(var f=-1,g=s(arguments,!0,!1,1),h=xb(a)?g.length:0;++f<h;){var i=g[f];i in a&&(e[i]=a[i])}else b=c.createCallback(b,d,3),be(a,function(a,c,d){b(a,c,d)&&(e[c]=a)});return e}function Ib(a,b,c,d){var e=Ud(a);if(b=r(b,d,4),null==c)if(e)c=[];else{var f=a&&a.constructor,g=f&&f.prototype;c=bb(g)}return(e?Qb:ce)(a,function(a,d,e){return b(c,a,d,e)}),c}function Jb(a){for(var b=-1,c=Wd(a),d=c.length,e=cd(d);++b<d;)e[b]=a[c[b]];return e}function Kb(a){for(var b=arguments,c=-1,d=s(b,!0,!1,1),e=b[2]&&b[2][b[1]]===a?1:d.length,f=cd(e);++c<e;)f[c]=a[d[c]];return f}function Lb(a,b,c){var d=-1,e=db(),f=a?a.length:0,g=!1;return c=(0>c?Kd(0,f+c):c)||0,Ud(a)?g=e(a,b,c)>-1:"number"==typeof f?g=(Cb(a)?a.indexOf(b,c):e(a,b,c))>-1:ce(a,function(a){return++d>=c?!(g=a===b):void 0}),g}function Mb(a,b,d){var e=!0;b=c.createCallback(b,d,3);var f=-1,g=a?a.length:0;if("number"==typeof g)for(;++f<g&&(e=!!b(a[f],f,a)););else ce(a,function(a,c,d){return e=!!b(a,c,d)});return e}function Nb(a,b,d){var e=[];b=c.createCallback(b,d,3);var f=-1,g=a?a.length:0;if("number"==typeof g)for(;++f<g;){var h=a[f];b(h,f,a)&&e.push(h)}else ce(a,function(a,c,d){b(a,c,d)&&e.push(a)});return e}function Ob(a,b,d){b=c.createCallback(b,d,3);var e=-1,f=a?a.length:0;if("number"!=typeof f){var g;return ce(a,function(a,c,d){return b(a,c,d)?(g=a,!1):void 0}),g}for(;++e<f;){var h=a[e];if(b(h,e,a))return h}}function Pb(a,b,d){var e;return b=c.createCallback(b,d,3),Rb(a,function(a,c,d){return b(a,c,d)?(e=a,!1):void 0}),e}function Qb(a,b,c){var d=-1,e=a?a.length:0;if(b=b&&"undefined"==typeof c?b:r(b,c,3),"number"==typeof e)for(;++d<e&&b(a[d],d,a)!==!1;);else ce(a,b);return a}function Rb(a,b,c){var d=a?a.length:0;if(b=b&&"undefined"==typeof c?b:r(b,c,3),"number"==typeof d)for(;d--&&b(a[d],d,a)!==!1;);else{var e=Wd(a);d=e.length,ce(a,function(a,c,f){return c=e?e[--d]:--d,b(f[c],c,f)})}return a}function Sb(a,b){var c=Od.call(arguments,2),d=-1,e="function"==typeof b,f=a?a.length:0,g=cd("number"==typeof f?f:0);return Qb(a,function(a){g[++d]=(e?b:a[b]).apply(a,c)}),g}function Tb(a,b,d){var e=-1,f=a?a.length:0;if(b=c.createCallback(b,d,3),"number"==typeof f)for(var g=cd(f);++e<f;)g[e]=b(a[e],e,a);else g=[],ce(a,function(a,c,d){g[++e]=b(a,c,d)});return g}function Ub(a,b,d){var e=-1/0,f=e;if(!b&&Ud(a))for(var h=-1,i=a.length;++h<i;){var j=a[h];j>f&&(f=j)}else b=!b&&Cb(a)?g:c.createCallback(b,d,3),Qb(a,function(a,c,d){var g=b(a,c,d);g>e&&(e=g,f=a)});return f}function Vb(a,b,d){var e=1/0,f=e;if(!b&&Ud(a))for(var h=-1,i=a.length;++h<i;){var j=a[h];f>j&&(f=j)}else b=!b&&Cb(a)?g:c.createCallback(b,d,3),Qb(a,function(a,c,d){var g=b(a,c,d);e>g&&(e=g,f=a)});return f}function Wb(a,b){var c=-1,d=a?a.length:0;if("number"==typeof d)for(var e=cd(d);++c<d;)e[c]=a[c][b];return e||Tb(a,b)}function Xb(a,b,c,d){if(!a)return c;var e=arguments.length<3;b=r(b,d,4);var f=-1,g=a.length;if("number"==typeof g)for(e&&(c=a[++f]);++f<g;)c=b(c,a[f],f,a);else ce(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)});return c}function Yb(a,b,c,d){var e=arguments.length<3;return b=r(b,d,4),Rb(a,function(a,d,f){c=e?(e=!1,a):b(c,a,d,f)}),c}function Zb(a,b,d){return b=c.createCallback(b,d,3),Nb(a,function(a,c,d){return!b(a,c,d)})}function $b(a,b,c){var d=a?a.length:0;if("number"!=typeof d&&(a=Jb(a)),null==b||c)return a?a[Tc(d-1)]:q;var e=_b(a);return e.length=Ld(Kd(0,b),e.length),e}function _b(a){var b=-1,c=a?a.length:0,d=cd("number"==typeof c?c:0);return Qb(a,function(a){var c=Tc(++b);d[b]=d[c],d[c]=a}),d}function ac(a){var b=a?a.length:0;return"number"==typeof b?b:Wd(a).length}function bc(a,b,d){var e;b=c.createCallback(b,d,3);var f=-1,g=a?a.length:0;if("number"==typeof g)for(;++f<g&&!(e=b(a[f],f,a)););else ce(a,function(a,c,d){return!(e=b(a,c,d))});return!!e}function cc(a,b,d){var e=-1,f=a?a.length:0,g=cd("number"==typeof f?f:0);for(b=c.createCallback(b,d,3),Qb(a,function(a,c,d){var f=g[++e]=l();f.criteria=b(a,c,d),f.index=e,f.value=a}),f=g.length,g.sort(h);f--;){var i=g[f];g[f]=i.value,n(i)}return g}function dc(a){return a&&"number"==typeof a.length?o(a):Jb(a)}function ec(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function fc(b){var c=-1,d=db(),f=b?b.length:0,g=s(arguments,!0,!0,1),h=[],j=f>=v&&d===a;if(j){var k=i(g);k?(d=e,g=k):j=!1}for(;++c<f;){var l=b[c];d(g,l)<0&&h.push(l)}return j&&n(g),h}function gc(a,b,d){var e=-1,f=a?a.length:0;for(b=c.createCallback(b,d,3);++e<f;)if(b(a[e],e,a))return e;return-1}function hc(a,b,d){var e=a?a.length:0;for(b=c.createCallback(b,d,3);e--;)if(b(a[e],e,a))return e;return-1}function ic(a,b,d){var e=0,f=a?a.length:0;if("number"!=typeof b&&null!=b){var g=-1;for(b=c.createCallback(b,d,3);++g<f&&b(a[g],g,a);)e++}else if(e=b,null==e||d)return a?a[0]:q;return o(a,0,Ld(Kd(0,e),f))}function jc(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c=d&&d[b]===a?null:b,b=!1),null!=c&&(a=Tb(a,c,d)),s(a,b)}function kc(b,c,d){if("number"==typeof d){var e=b?b.length:0;d=0>d?Kd(0,e+d):d||0}else if(d){var f=tc(b,c);return b[f]===c?f:-1}return a(b,c,d)}function lc(a,b,d){var e=0,f=a?a.length:0;if("number"!=typeof b&&null!=b){var g=f;for(b=c.createCallback(b,d,3);g--&&b(a[g],g,a);)e++}else e=null==b||d?1:b||e;return o(a,0,Ld(Kd(0,f-e),f))}function mc(b){for(var c=arguments,d=c.length,f=-1,g=k(),h=-1,j=db(),l=b?b.length:0,o=[],p=k();++f<d;){var q=c[f];g[f]=j===a&&(q?q.length:0)>=v&&i(f?c[f]:p)}a:for(;++h<l;){var r=g[0];if(q=b[h],(r?e(r,q):j(p,q))<0){for(f=d,(r||p).push(q);--f;)if(r=g[f],(r?e(r,q):j(c[f],q))<0)continue a;o.push(q)}}for(;d--;)r=g[d],r&&n(r);return m(g),m(p),o}function nc(a,b,d){var e=0,f=a?a.length:0;if("number"!=typeof b&&null!=b){var g=f;for(b=c.createCallback(b,d,3);g--&&b(a[g],g,a);)e++}else if(e=b,null==e||d)return a?a[f-1]:q;return o(a,Kd(0,f-e))}function oc(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?Kd(0,d+c):Ld(c,d-1))+1);d--;)if(a[d]===b)return d;return-1}function pc(a){for(var b=arguments,c=0,d=b.length,e=a?a.length:0;++c<d;)for(var f=-1,g=b[c];++f<e;)a[f]===g&&(Ad.call(a,f--,1),e--);return a}function qc(a,b,c){a=+a||0,c="number"==typeof c?c:+c||1,null==b&&(b=a,a=0);for(var d=-1,e=Kd(0,qd((b-a)/(c||1))),f=cd(e);++d<e;)f[d]=a,a+=c;return f}function rc(a,b,d){var e=-1,f=a?a.length:0,g=[];for(b=c.createCallback(b,d,3);++e<f;){var h=a[e];b(h,e,a)&&(g.push(h),Ad.call(a,e--,1),f--)}return g}function sc(a,b,d){if("number"!=typeof b&&null!=b){var e=0,f=-1,g=a?a.length:0;for(b=c.createCallback(b,d,3);++f<g&&b(a[f],f,a);)e++}else e=null==b||d?1:Kd(0,b);return o(a,e)}function tc(a,b,d,e){var f=0,g=a?a.length:f;for(d=d?c.createCallback(d,e,1):Qc,b=d(b);g>f;){var h=f+g>>>1;d(a[h])<b?f=h+1:g=h}return f}function uc(){return Y(s(arguments,!0,!0))}function vc(a,b,d,e){return"boolean"!=typeof b&&null!=b&&(e=d,d=e&&e[b]===a?null:b,b=!1),null!=d&&(d=c.createCallback(d,e,3)),Y(a,b,d)}function wc(a){return fc(a,Od.call(arguments,1))}function xc(){for(var a=arguments.length>1?arguments:arguments[0],b=-1,c=a?Ub(Wb(a,"length")):0,d=cd(0>c?0:c);++b<c;)d[b]=Wb(a,b);return d}function yc(a,b){for(var c=-1,d=a?a.length:0,e={};++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function zc(a,b){if(!wb(b))throw new ld;return function(){return--a<1?b.apply(this,arguments):void 0}}function Ac(a,b){return arguments.length>2?ab(a,17,Od.call(arguments,2),null,b):ab(a,1,null,null,b)}function Bc(a){for(var b=arguments.length>1?s(arguments,!0,!1,1):nb(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=ab(a[e],1,null,null,a)}return a}function Cc(a,b){return arguments.length>2?ab(b,19,Od.call(arguments,2),null,a):ab(b,3,null,null,a)}function Dc(){for(var a=arguments,b=a.length||1;b--;)if(!wb(a[b]))throw new ld;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}}function Ec(a,b,c){var d=typeof a;if(null==a||"function"==d)return r(a,b,c);if("object"!=d)return function(b){return b[a]};var e=Wd(a),f=e[0],g=a[f];return 1!=e.length||g!==g||xb(g)?function(b){for(var c=e.length,d=!1;c--&&(d=w(b[e[c]],a[e[c]],null,!0)););return d}:function(a){var b=a[f];return g===b&&(0!==g||1/g==1/b)}}function Fc(a,b){return b="number"==typeof b?b:+b||a.length,ab(a,4,null,null,null,b)}function Gc(a,b,c){var d,e,f,g,h,i,j,k=0,l=!1,m=!0;if(!wb(a))throw new ld;if(b=Kd(0,b)||0,c===!0){var n=!0;m=!1}else xb(c)&&(n=c.leading,l="maxWait"in c&&(Kd(b,c.maxWait)||0),m="trailing"in c?c.trailing:m);var o=function(){var c=b-(wd()-g);if(0>=c){e&&rd(e);var l=j;e=i=j=q,l&&(k=wd(),f=a.apply(h,d))}else i=zd(o,c)},p=function(){i&&rd(i),e=i=j=q,(m||l!==b)&&(k=wd(),f=a.apply(h,d))};return function(){if(d=arguments,g=wd(),h=this,j=m&&(i||!n),l===!1)var c=n&&!i;else{e||n||(k=g);var q=l-(g-k);0>=q?(e&&(e=rd(e)),k=g,f=a.apply(h,d)):e||(e=zd(p,q))}return i||b===l||(i=zd(o,b)),c&&(f=a.apply(h,d)),f}}function Hc(a){if(!wb(a))throw new ld;var b=Od.call(arguments,1);return zd(function(){a.apply(q,b)},1)}function Ic(a,b){if(!wb(a))throw new ld;var c=Od.call(arguments,2);return zd(function(){a.apply(q,c)},b)}function Jc(a,b){if(!wb(a))throw new ld;var c=function(){var d=c.cache,e=b?b.apply(this,arguments):u+arguments[0];return vd.call(d,e)?d[e]:d[e]=a.apply(this,arguments)};return c.cache={},c}function Kc(a){var b,c;if(!wb(a))throw new ld;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}}function Lc(a){return ab(a,16,Od.call(arguments,1))}function Mc(a){return ab(a,32,null,Od.call(arguments,1))}function Nc(a,b,c){var d=!0,e=!0;if(!wb(a))throw new ld;c===!1?d=!1:xb(c)&&(d="leading"in c?c.leading:d,e="trailing"in c?c.trailing:e),c=l(),c.leading=d,c.maxWait=b,c.trailing=e;var f=Gc(a,b,c);return n(c),f}function Oc(a,b){if(!wb(b))throw new ld;return function(){var c=[a];return xd.apply(c,arguments),b.apply(this,c)}}function Pc(a){return null==a?"":kd(a).replace($d,cb)}function Qc(a){return a}function Rc(a,b){var e=a,f=!b||wb(e);b||(e=d,b=a,a=c),Qb(nb(b),function(c){var d=a[c]=b[c];f&&(e.prototype[c]=function(){var b=this.__wrapped__,c=[b];xd.apply(c,arguments);var f=d.apply(a,c);return b&&"object"==typeof b&&b===f?this:new e(f)})})}function Sc(){return b._=od,this}function Tc(a,b){null==a&&null==b&&(b=1),a=+a||0,null==b?(b=a,a=0):b=+b||0;var c=Nd();return a%1||b%1?a+Ld(c*(b-a+parseFloat("1e-"+((c+"").length-1))),b):a+sd(c*(b-a+1))}function Uc(a,b){if(a){var c=a[b];return wb(c)?a[b]():c}}function Vc(a,b,d){var e=c.templateSettings;a||(a=""),d=ae({},d,e);var f,g=ae({},d.imports,e.imports),h=Wd(g),i=Jb(g),k=0,l=d.interpolate||G,m="__p += '",n=jd((d.escape||G).source+"|"+l.source+"|"+(l===E?B:G).source+"|"+(d.evaluate||G).source+"|$","g");a.replace(n,function(b,c,d,e,g,h){return d||(d=e),m+=a.slice(k,h).replace(I,j),c&&(m+="' +\n__e("+c+") +\n'"),g&&(f=!0,m+="';\n"+g+";\n__p += '"),d&&(m+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),k=h+b.length,b}),m+="';\n";var o=d.variable,p=o;p||(o="obj",m="with ("+o+") {\n"+m+"\n}\n"),m=(f?m.replace(y,""):m).replace(z,"$1").replace(A,"$1;"),m="function("+o+") {\n"+(p?"":o+" || ("+o+" = {});\n")+"var __t, __p = '', __e = _.escape"+(f?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+m+"return __p\n}";var r="\n/*\n//# sourceURL="+(d.sourceURL||"/lodash/template/source["+K++ +"]")+"\n*/";try{var s=fd(h,"return "+m+r).apply(q,i)}catch(t){throw t.source=m,t}return b?s(b):(s.source=m,s)}function Wc(a,b,c){a=(a=+a)>-1?a:0;var d=-1,e=cd(a);for(b=r(b,c,1);++d<a;)e[d]=b(d);return e}function Xc(a){return null==a?"":kd(a).replace(Zd,fb)}function Yc(a){var b=++t;return kd(null==a?"":a)+b}function Zc(a){return a=new d(a),a.__chain__=!0,a}function $c(a,b){return b(a),a}function _c(){return this.__chain__=!0,this}function ad(){return kd(this.__wrapped__)}function bd(){return this.__wrapped__}b=b?_.defaults(X.Object(),b,_.pick(X,J)):X;var cd=b.Array,dd=b.Boolean,ed=b.Date,fd=b.Function,gd=b.Math,hd=b.Number,id=b.Object,jd=b.RegExp,kd=b.String,ld=b.TypeError,md=[],nd=id.prototype,od=b._,pd=jd("^"+kd(nd.valueOf).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/valueOf|for [^\]]+/g,".+?")+"$"),qd=gd.ceil,rd=b.clearTimeout,sd=gd.floor,td=fd.prototype.toString,ud=pd.test(ud=id.getPrototypeOf)&&ud,vd=nd.hasOwnProperty,wd=pd.test(wd=ed.now)&&wd||function(){return+new ed},xd=md.push,yd=b.setImmediate,zd=b.setTimeout,Ad=md.splice,Bd=nd.toString,Cd=md.unshift,Dd=function(){try{var a={},b=pd.test(b=id.defineProperty)&&b,c=b(a,a,a)&&b}catch(d){}return c}(),Ed=pd.test(Ed=Bd.bind)&&Ed,Fd=pd.test(Fd=id.create)&&Fd,Gd=pd.test(Gd=cd.isArray)&&Gd,Hd=b.isFinite,Id=b.isNaN,Jd=pd.test(Jd=id.keys)&&Jd,Kd=gd.max,Ld=gd.min,Md=b.parseInt,Nd=gd.random,Od=md.slice,Pd=pd.test(b.attachEvent),Qd=Ed&&!/\n|true/.test(Ed+Pd),Rd={};Rd[M]=cd,Rd[N]=dd,Rd[O]=ed,Rd[P]=fd,Rd[R]=id,Rd[Q]=hd,Rd[S]=jd,Rd[T]=kd,d.prototype=c.prototype;var Sd=c.support={};Sd.fastBind=Ed&&!Qd,Sd.funcNames="string"==typeof fd.name,c.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:E,variable:"",imports:{_:c}};var Td=function(a,b){var c=l();c.value=b,Dd(a,"__bindData__",c),n(c)},Ud=Gd||function(a){return a&&"object"==typeof a?Bd.call(a)==M:!1},Vd=function(a){var b,c=a,d=[];if(!c)return d;if(!V[typeof a])return d;for(b in c)vd.call(c,b)&&d.push(b);return d},Wd=Jd?function(a){return xb(a)?Jd(a):[]}:Vd,Xd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Yd=pb(Xd),Zd=jd("("+Wd(Yd).join("|")+")","g"),$d=jd("["+Wd(Xd).join("")+"]","g"),_d=function(a,b,c){var d,e=a,f=e;if(!e)return f;var g=arguments,h=0,i="number"==typeof c?2:g.length;if(i>3&&"function"==typeof g[i-2])var j=r(g[--i-1],g[i--],2);else i>2&&"function"==typeof g[i-1]&&(j=g[--i]);for(;++h<i;)if(e=g[h],e&&V[typeof e])for(var k=-1,l=V[typeof e]&&Wd(e),m=l?l.length:0;++k<m;)d=l[k],f[d]=j?j(f[d],e[d]):e[d];return f},ae=function(a,b,c){var d,e=a,f=e;if(!e)return f;for(var g=arguments,h=0,i="number"==typeof c?2:g.length;++h<i;)if(e=g[h],e&&V[typeof e])for(var j=-1,k=V[typeof e]&&Wd(e),l=k?k.length:0;++j<l;)d=k[j],"undefined"==typeof f[d]&&(f[d]=e[d]);return f},be=function(a,b,c){var d,e=a,f=e;if(!e)return f;if(!V[typeof e])return f;b=b&&"undefined"==typeof c?b:r(b,c,3);for(d in e)if(b(e[d],d,a)===!1)return f;return f},ce=function(a,b,c){var d,e=a,f=e;if(!e)return f;if(!V[typeof e])return f;b=b&&"undefined"==typeof c?b:r(b,c,3);for(var g=-1,h=V[typeof e]&&Wd(e),i=h?h.length:0;++g<i;)if(d=h[g],b(e[d],d,a)===!1)return f;return f},de=function(a){if(!a||Bd.call(a)!=R)return!1;var b=a.valueOf,c="function"==typeof b&&(c=ud(b))&&ud(c);return c?a==c||ud(a)==c:eb(a)},ee=$(function(a,b,c){vd.call(a,c)?a[c]++:a[c]=1}),fe=$(function(a,b,c){(vd.call(a,c)?a[c]:a[c]=[]).push(b)}),ge=$(function(a,b,c){a[c]=b}),he=Nb;Qd&&Z&&"function"==typeof yd&&(Hc=function(a){if(!wb(a))throw new ld;return yd.apply(b,arguments)});var ie=8==Md(x+"08")?Md:function(a,b){return Md(Cb(a)?a.replace(F,""):a,b||0)};return c.after=zc,c.assign=_d,c.at=Kb,c.bind=Ac,c.bindAll=Bc,c.bindKey=Cc,c.chain=Zc,c.compact=ec,c.compose=Dc,c.countBy=ee,c.createCallback=Ec,c.curry=Fc,c.debounce=Gc,c.defaults=ae,c.defer=Hc,c.delay=Ic,c.difference=fc,c.filter=Nb,c.flatten=jc,c.forEach=Qb,c.forEachRight=Rb,c.forIn=be,c.forInRight=lb,c.forOwn=ce,c.forOwnRight=mb,c.functions=nb,c.groupBy=fe,c.indexBy=ge,c.initial=lc,c.intersection=mc,c.invert=pb,c.invoke=Sb,c.keys=Wd,c.map=Tb,c.max=Ub,c.memoize=Jc,c.merge=Eb,c.min=Vb,c.omit=Fb,c.once=Kc,c.pairs=Gb,c.partial=Lc,c.partialRight=Mc,c.pick=Hb,c.pluck=Wb,c.pull=pc,c.range=qc,c.reject=Zb,c.remove=rc,c.rest=sc,c.shuffle=_b,c.sortBy=cc,c.tap=$c,c.throttle=Nc,c.times=Wc,c.toArray=dc,c.transform=Ib,c.union=uc,c.uniq=vc,c.values=Jb,c.where=he,c.without=wc,c.wrap=Oc,c.zip=xc,c.zipObject=yc,c.collect=Tb,c.drop=sc,c.each=Qb,c.eachRight=Rb,c.extend=_d,c.methods=nb,c.object=yc,c.select=Nb,c.tail=sc,c.unique=vc,c.unzip=xc,Rc(c),c.clone=hb,c.cloneDeep=ib,c.contains=Lb,c.escape=Pc,c.every=Mb,c.find=Ob,c.findIndex=gc,c.findKey=jb,c.findLast=Pb,c.findLastIndex=hc,c.findLastKey=kb,c.has=ob,c.identity=Qc,c.indexOf=kc,c.isArguments=gb,c.isArray=Ud,c.isBoolean=qb,c.isDate=rb,c.isElement=sb,c.isEmpty=tb,c.isEqual=ub,c.isFinite=vb,c.isFunction=wb,c.isNaN=yb,c.isNull=zb,c.isNumber=Ab,c.isObject=xb,c.isPlainObject=de,c.isRegExp=Bb,c.isString=Cb,c.isUndefined=Db,c.lastIndexOf=oc,c.mixin=Rc,c.noConflict=Sc,c.parseInt=ie,c.random=Tc,c.reduce=Xb,c.reduceRight=Yb,c.result=Uc,c.runInContext=p,c.size=ac,c.some=bc,c.sortedIndex=tc,c.template=Vc,c.unescape=Xc,c.uniqueId=Yc,c.all=Mb,c.any=bc,c.detect=Ob,c.findWhere=Ob,c.foldl=Xb,c.foldr=Yb,c.include=Lb,c.inject=Xb,ce(c,function(a,b){c.prototype[b]||(c.prototype[b]=function(){var b=[this.__wrapped__],e=this.__chain__;
xd.apply(b,arguments);var f=a.apply(c,b);return e?new d(f,e):f})}),c.first=ic,c.last=nc,c.sample=$b,c.take=ic,c.head=ic,ce(c,function(a,b){var e="sample"!==b;c.prototype[b]||(c.prototype[b]=function(b,c){var f=this.__chain__,g=a(this.__wrapped__,b,c);return f||null!=b&&(!c||e&&"function"==typeof b)?new d(g,f):g})}),c.VERSION="2.0.0",c.prototype.chain=_c,c.prototype.toString=ad,c.prototype.value=bd,c.prototype.valueOf=bd,Qb(["join","pop","shift"],function(a){var b=md[a];c.prototype[a]=function(){var a=this.__chain__,c=b.apply(this.__wrapped__,arguments);return a?new d(c,a):c}}),Qb(["push","reverse","sort","unshift"],function(a){var b=md[a];c.prototype[a]=function(){return b.apply(this.__wrapped__,arguments),this}}),Qb(["concat","slice","splice"],function(a){var b=md[a];c.prototype[a]=function(){return new d(b.apply(this.__wrapped__,arguments),this.__chain__)}}),c}var q,r=[],s=[],t=0,u=+new Date+"",v=75,w=40,x=" 	\f\n\r\u2028\u2029",y=/\b__p \+= '';/g,z=/\b(__p \+=) '' \+/g,A=/(__e\(.*?\)|\b__t\)) \+\n'';/g,B=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,C=/\w*$/,D=/^function[ \n\r\t]+\w/,E=/<%=([\s\S]+?)%>/g,F=RegExp("^["+x+"]*0+(?=.$)"),G=/($^)/,H=(H=/\bthis\b/)&&H.test(p)&&H,I=/['\n\r\t\u2028\u2029\\]/g,J=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setImmediate","setTimeout"],K=0,L="[object Arguments]",M="[object Array]",N="[object Boolean]",O="[object Date]",P="[object Function]",Q="[object Number]",R="[object Object]",S="[object RegExp]",T="[object String]",U={};U[P]=!1,U[L]=U[M]=U[N]=U[O]=U[Q]=U[R]=U[S]=U[T]=!0;var V={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},W={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},X=V[typeof window]&&window||this,Y=V[typeof c]&&c,Z=V[typeof b]&&b&&b.exports==Y&&b,$=V[typeof d]&&d;!$||$.global!==$&&$.window!==$||(X=$);var _=p();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(X._=_,define(function(){return _})):Y&&!Y.nodeType?Z?(Z.exports=_)._=_:Y._=_:X._=_}).call(this)},{}],50:[function(a,b,c){!function(a){function c(a,b){var c=b?P[eb]:P[bb];return c.test(a)?new f(a,b):null}function d(a,b){var d=c(a,b);return d?d.version:null}function e(a,b){var d=c(a,b);return d?d.version:null}function f(a,b){if(a instanceof f){if(a.loose===b)return a;a=a.version}if(!(this instanceof f))return new f(a,b);this.loose=b;var c=a.trim().match(b?P[eb]:P[bb]);if(!c)throw new TypeError("Invalid Version: "+a);this.raw=a,this.major=+c[1],this.minor=+c[2],this.patch=+c[3],this.prerelease=c[4]?c[4].split(".").map(function(a){return/^[0-9]+$/.test(a)?+a:a}):[],this.build=c[5]?c[5].split("."):[],this.format()}function g(a,b,c){try{return new f(a,c).inc(b).version}catch(d){return null}}function h(a,b){var c=Eb.test(a),d=Eb.test(b);return c&&d&&(a=+a,b=+b),c&&!d?-1:d&&!c?1:b>a?-1:a>b?1:0}function i(a,b){return h(b,a)}function j(a,b,c){return new f(a,c).compare(b)}function k(a,b){return j(a,b,!0)}function l(a,b,c){return j(b,a,c)}function m(b,c){return b.sort(function(b,d){return a.compare(b,d,c)})}function n(b,c){return b.sort(function(b,d){return a.rcompare(b,d,c)})}function o(a,b,c){return j(a,b,c)>0}function p(a,b,c){return j(a,b,c)<0}function q(a,b,c){return 0===j(a,b,c)}function r(a,b,c){return 0!==j(a,b,c)}function s(a,b,c){return j(a,b,c)>=0}function t(a,b,c){return j(a,b,c)<=0}function u(a,b,c,d){var e;switch(b){case"===":e=a===c;break;case"!==":e=a!==c;break;case"":case"=":case"==":e=q(a,c,d);break;case"!=":e=r(a,c,d);break;case">":e=o(a,c,d);break;case">=":e=s(a,c,d);break;case"<":e=p(a,c,d);break;case"<=":e=t(a,c,d);break;default:throw new TypeError("Invalid operator: "+b)}return e}function v(a,b){if(a instanceof v){if(a.loose===b)return a;a=a.value}return this instanceof v?(this.loose=b,this.parse(a),this.value=this.semver===Fb?"":this.operator+this.semver.version,void 0):new v(a,b)}function w(a,b){if(a instanceof w&&a.loose===b)return a;if(!(this instanceof w))return new w(a,b);if(this.loose=b,this.raw=a,this.set=a.split(/\s*\|\|\s*/).map(function(a){return this.parseRange(a.trim())},this).filter(function(a){return a.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+a);this.format()}function x(a,b){return new w(a,b).set.map(function(a){return a.map(function(a){return a.value}).join(" ").trim().split(" ")})}function y(a,b){return a=C(a,b),a=A(a,b),a=E(a,b),a=G(a,b)}function z(a){return!a||"x"===a.toLowerCase()||"*"===a}function A(a,b){return a.trim().split(/\s+/).map(function(a){return B(a,b)}).join(" ")}function B(a,b){var c=b?P[qb]:P[pb];return a.replace(c,function(a,b,c,d,e){var f;return z(b)?f="":z(c)?f=">="+b+".0.0-0 <"+(+b+1)+".0.0-0":z(d)?f=">="+b+"."+c+".0-0 <"+b+"."+(+c+1)+".0-0":e?("-"!==e.charAt(0)&&(e="-"+e),f=">="+b+"."+c+"."+d+e+" <"+b+"."+(+c+1)+".0-0"):f=">="+b+"."+c+"."+d+"-0"+" <"+b+"."+(+c+1)+".0-0",f})}function C(a,b){return a.trim().split(/\s+/).map(function(a){return D(a,b)}).join(" ")}function D(a,b){var c=b?P[vb]:P[ub];return a.replace(c,function(a,b,c,d,e){var f;return z(b)?f="":z(c)?f=">="+b+".0.0-0 <"+(+b+1)+".0.0-0":z(d)?f="0"===b?">="+b+"."+c+".0-0 <"+b+"."+(+c+1)+".0-0":">="+b+"."+c+".0-0 <"+(+b+1)+".0.0-0":e?("-"!==e.charAt(0)&&(e="-"+e),f="0"===b?"0"===c?"="+b+"."+c+"."+d+e:">="+b+"."+c+"."+d+e+" <"+b+"."+(+c+1)+".0-0":">="+b+"."+c+"."+d+e+" <"+(+b+1)+".0.0-0"):f="0"===b?"0"===c?"="+b+"."+c+"."+d:">="+b+"."+c+"."+d+"-0"+" <"+b+"."+(+c+1)+".0-0":">="+b+"."+c+"."+d+"-0"+" <"+(+b+1)+".0.0-0",f})}function E(a,b){return a.split(/\s+/).map(function(a){return F(a,b)}).join(" ")}function F(a,b){a=a.trim();var c=b?P[lb]:P[kb];return a.replace(c,function(a,b,c,d,e){var f=z(c),g=f||z(d),h=g||z(e),i=h;return"="===b&&i&&(b=""),b&&i?(f&&(c=0),g&&(d=0),h&&(e=0),">"===b&&(b=">=",f||(g?(c=+c+1,d=0,e=0):h&&(d=+d+1,e=0))),a=b+c+"."+d+"."+e+"-0"):f?a="*":g?a=">="+c+".0.0-0 <"+(+c+1)+".0.0-0":h&&(a=">="+c+"."+d+".0-0 <"+c+"."+(+d+1)+".0-0"),a})}function G(a){return a.trim().replace(P[Cb],"")}function H(a,b,c,d,e,f,g,h,i,j,k,l){return b=z(c)?"":z(d)?">="+c+".0.0-0":z(e)?">="+c+"."+d+".0-0":">="+b,h=z(i)?"":z(j)?"<"+(+i+1)+".0.0-0":z(k)?"<"+i+"."+(+j+1)+".0-0":l?"<="+i+"."+j+"."+k+"-"+l:"<="+h,(b+" "+h).trim()}function I(a,b){for(var c=0;c<a.length;c++)if(!a[c].test(b))return!1;return!0}function J(a,b,c){try{b=new w(b,c)}catch(d){return!1}return b.test(a)}function K(a,b,c){return a.filter(function(a){return J(a,b,c)}).sort(function(a,b){return l(a,b,c)})[0]||null}function L(a,b){try{return new w(a,b).range||"*"}catch(c){return null}}function M(a,b,c){return O(a,b,"<",c)}function N(a,b,c){return O(a,b,">",c)}function O(a,b,c,d){a=new f(a,d),b=new w(b,d);var e,g,h,i,j;switch(c){case">":e=o,g=t,h=p,i=">",j=">=";break;case"<":e=p,g=s,h=o,i="<",j="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(J(a,b,d))return!1;for(var k=0;k<b.set.length;++k){var l=b.set[k],m=null,n=null;if(l.forEach(function(a){m=m||a,n=n||a,e(a.semver,m.semver,d)?m=a:h(a.semver,n.semver,d)&&(n=a)}),m.operator===i||m.operator===j)return!1;if((!n.operator||n.operator===i)&&g(a,n.semver))return!1;if(n.operator===j&&h(a,n.semver))return!1}return!0}"object"==typeof b&&b.exports===a&&(a=b.exports=f),a.SEMVER_SPEC_VERSION="2.0.0";var P=a.re=[],Q=a.src=[],R=0,S=R++;Q[S]="0|[1-9]\\d*";var T=R++;Q[T]="[0-9]+";var U=R++;Q[U]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var V=R++;Q[V]="("+Q[S]+")\\."+"("+Q[S]+")\\."+"("+Q[S]+")";var W=R++;Q[W]="("+Q[T]+")\\."+"("+Q[T]+")\\."+"("+Q[T]+")";var X=R++;Q[X]="(?:"+Q[S]+"|"+Q[U]+")";var Y=R++;Q[Y]="(?:"+Q[T]+"|"+Q[U]+")";var Z=R++;Q[Z]="(?:-("+Q[X]+"(?:\\."+Q[X]+")*))";var $=R++;Q[$]="(?:-?("+Q[Y]+"(?:\\."+Q[Y]+")*))";var _=R++;Q[_]="[0-9A-Za-z-]+";var ab=R++;Q[ab]="(?:\\+("+Q[_]+"(?:\\."+Q[_]+")*))";var bb=R++,cb="v?"+Q[V]+Q[Z]+"?"+Q[ab]+"?";Q[bb]="^"+cb+"$";var db="[v=\\s]*"+Q[W]+Q[$]+"?"+Q[ab]+"?",eb=R++;Q[eb]="^"+db+"$";var fb=R++;Q[fb]="((?:<|>)?=?)";var gb=R++;Q[gb]=Q[T]+"|x|X|\\*";var hb=R++;Q[hb]=Q[S]+"|x|X|\\*";var ib=R++;Q[ib]="[v=\\s]*("+Q[hb]+")"+"(?:\\.("+Q[hb]+")"+"(?:\\.("+Q[hb]+")"+"(?:("+Q[Z]+")"+")?)?)?";var jb=R++;Q[jb]="[v=\\s]*("+Q[gb]+")"+"(?:\\.("+Q[gb]+")"+"(?:\\.("+Q[gb]+")"+"(?:("+Q[$]+")"+")?)?)?";var kb=R++;Q[kb]="^"+Q[fb]+"\\s*"+Q[ib]+"$";var lb=R++;Q[lb]="^"+Q[fb]+"\\s*"+Q[jb]+"$";var mb=R++;Q[mb]="(?:~>?)";var nb=R++;Q[nb]="(\\s*)"+Q[mb]+"\\s+",P[nb]=new RegExp(Q[nb],"g");var ob="$1~",pb=R++;Q[pb]="^"+Q[mb]+Q[ib]+"$";var qb=R++;Q[qb]="^"+Q[mb]+Q[jb]+"$";var rb=R++;Q[rb]="(?:\\^)";var sb=R++;Q[sb]="(\\s*)"+Q[rb]+"\\s+",P[sb]=new RegExp(Q[sb],"g");var tb="$1^",ub=R++;Q[ub]="^"+Q[rb]+Q[ib]+"$";var vb=R++;Q[vb]="^"+Q[rb]+Q[jb]+"$";var wb=R++;Q[wb]="^"+Q[fb]+"\\s*("+db+")$|^$";var xb=R++;Q[xb]="^"+Q[fb]+"\\s*("+cb+")$|^$";var yb=R++;Q[yb]="(\\s*)"+Q[fb]+"\\s*("+db+"|"+Q[ib]+")",P[yb]=new RegExp(Q[yb],"g");var zb="$1$2$3",Ab=R++;Q[Ab]="^\\s*("+Q[ib]+")"+"\\s+-\\s+"+"("+Q[ib]+")"+"\\s*$";var Bb=R++;Q[Bb]="^\\s*("+Q[jb]+")"+"\\s+-\\s+"+"("+Q[jb]+")"+"\\s*$";var Cb=R++;Q[Cb]="(<|>)?=?\\s*\\*";for(var Db=0;R>Db;Db++)P[Db]||(P[Db]=new RegExp(Q[Db]));a.parse=c,a.valid=d,a.clean=e,a.SemVer=f,f.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},f.prototype.inspect=function(){return'<SemVer "'+this+'">'},f.prototype.toString=function(){return this.version},f.prototype.compare=function(a){return a instanceof f||(a=new f(a,this.loose)),this.compareMain(a)||this.comparePre(a)},f.prototype.compareMain=function(a){return a instanceof f||(a=new f(a,this.loose)),h(this.major,a.major)||h(this.minor,a.minor)||h(this.patch,a.patch)},f.prototype.comparePre=function(a){if(a instanceof f||(a=new f(a,this.loose)),this.prerelease.length&&!a.prerelease.length)return-1;if(!this.prerelease.length&&a.prerelease.length)return 1;if(!this.prerelease.lenth&&!a.prerelease.length)return 0;var b=0;do{var c=this.prerelease[b],d=a.prerelease[b];if(void 0===c&&void 0===d)return 0;if(void 0===d)return 1;if(void 0===c)return-1;if(c!==d)return h(c,d)}while(++b)},f.prototype.inc=function(a){switch(a){case"major":this.major++,this.minor=-1;case"minor":this.minor++,this.patch=-1;case"patch":this.patch++,this.prerelease=[];break;case"prerelease":if(0===this.prerelease.length)this.prerelease=[0];else{for(var b=this.prerelease.length;--b>=0;)"number"==typeof this.prerelease[b]&&(this.prerelease[b]++,b=-2);-1===b&&this.prerelease.push(0)}break;default:throw new Error("invalid increment argument: "+a)}return this.format(),this},a.inc=g,a.compareIdentifiers=h;var Eb=/^[0-9]+$/;a.rcompareIdentifiers=i,a.compare=j,a.compareLoose=k,a.rcompare=l,a.sort=m,a.rsort=n,a.gt=o,a.lt=p,a.eq=q,a.neq=r,a.gte=s,a.lte=t,a.cmp=u,a.Comparator=v;var Fb={};v.prototype.parse=function(a){var b=this.loose?P[wb]:P[xb],c=a.match(b);if(!c)throw new TypeError("Invalid comparator: "+a);this.operator=c[1],c[2]?(this.semver=new f(c[2],this.loose),"<"!==this.operator||this.semver.prerelease.length||(this.semver.prerelease=["0"],this.semver.format())):this.semver=Fb},v.prototype.inspect=function(){return'<SemVer Comparator "'+this+'">'},v.prototype.toString=function(){return this.value},v.prototype.test=function(a){return this.semver===Fb?!0:u(a,this.operator,this.semver,this.loose)},a.Range=w,w.prototype.inspect=function(){return'<SemVer Range "'+this.range+'">'},w.prototype.format=function(){return this.range=this.set.map(function(a){return a.join(" ").trim()}).join("||").trim(),this.range},w.prototype.toString=function(){return this.range},w.prototype.parseRange=function(a){var b=this.loose;a=a.trim();var c=b?P[Bb]:P[Ab];a=a.replace(c,H),a=a.replace(P[yb],zb),a=a.replace(P[nb],ob),a=a.replace(P[sb],tb),a=a.split(/\s+/).join(" ");var d=b?P[wb]:P[xb],e=a.split(" ").map(function(a){return y(a,b)}).join(" ").split(/\s+/);return this.loose&&(e=e.filter(function(a){return!!a.match(d)})),e=e.map(function(a){return new v(a,b)})},a.toComparators=x,w.prototype.test=function(a){if(!a)return!1;for(var b=0;b<this.set.length;b++)if(I(this.set[b],a))return!0;return!1},a.satisfies=J,a.maxSatisfying=K,a.validRange=L,a.ltr=M,a.gtr=N,a.outside=O,"function"==typeof define&&define.amd&&define(a)}("object"==typeof c?c:"function"==typeof define&&define.amd?{}:semver={})},{}],51:[function(a,b,c){function d(a){for(var b in a)return!0;return!1}var e=a("./doc").Doc,f=a("./query").Query,g=a("./microevent"),h=c.Connection=function(a){this.collections={},this.nextQueryId=1,this.queries={},this.state="disconnected",this.canSend=!1,this.reset(),this.debug=!1,this.messageBuffer=[],this.bindToSocket(a)};g.mixin(h),h.prototype.bindToSocket=function(a){this.socket&&(delete this.socket.onopen,delete this.socket.onclose,delete this.socket.onmessage,delete this.socket.onerror),this.socket=a,this.state=0===a.readyState||1===a.readyState?"connecting":"disconnected",this.canSend="connecting"===this.state;var b=this;a.onmessage=function(a){for(b.debug&&console.log("RECV",JSON.stringify(a)),b.messageBuffer.push({t:(new Date).toTimeString(),recv:JSON.stringify(a)});b.messageBuffer.length>100;)b.messageBuffer.shift();try{b.handleMessage(a)}catch(c){b.emit("error",c)}},a.onopen=function(){b._setState("connecting")},a.onerror=function(a){b.emit("connection error",a)},a.onclose=function(a){b._setState("disconnected",a),("Closed"===a||"Stopped by server"===a)&&b._setState("stopped",a)}},h.prototype.handleMessage=function(a){switch(a.a){case"init":if(0!==a.protocol)throw new Error("Invalid protocol version");if("string"!=typeof a.id)throw new Error("Invalid client id");this.id=a.id,this._setState("connected");break;case"qfetch":case"qsub":case"q":case"qunsub":var b=this.queries[a.id];b&&b._onMessage(a);break;default:var c,d;a.d?(c=this._lastReceivedCollection=a.c,d=this._lastReceivedDoc=a.d):(c=a.c=this._lastReceivedCollection,d=a.d=this._lastReceivedDoc),this.get(c,d)._onMessage(a)}},h.prototype.reset=function(){this.id=this.lastError=this._lastReceivedCollection=this._lastReceivedDoc=this._lastSentCollection=this._lastSentDoc=null,this.seq=1},h.prototype._setState=function(a,b){if(this.state!==a){if("connecting"===a&&"disconnected"!==this.state&&"stopped"!==this.state||"connected"===a&&"connecting"!==this.state)throw new Error("Cannot transition directly from "+this.state+" to "+a);this.state=a,this.canSend="connecting"===a||"connected"===a,"disconnected"===a&&this.reset(),this.emit(a,b),this.opQueue=[],this.subscribeData={};for(var c in this.collections){var d=this.collections[c];for(var e in d)d[e]._onConnectionStateChanged(a,b)}this.opQueue.sort(function(a,b){return a.seq-b.seq});for(var f=0;f<this.opQueue.length;f++)this.send(this.opQueue[f]);for(var g in this.subscribeData){this.send({a:"bs",s:this.subscribeData});break}this.opQueue=null,this.subscribeData=null;for(var h in this.queries)this.queries[h]._onConnectionStateChanged(a,b)}},h.prototype.sendOp=function(a){this.opQueue?this.opQueue.push(a):this.send(a)},h.prototype.sendSubscribe=function(a,b,c){if(this.subscribeData){var d=this.subscribeData;d[a]||(d[a]={}),d[a][b]=c||null}else{var e={a:"sub",c:a,d:b};null!=c&&(e.v=c),this.send(e)}},h.prototype.send=function(a){for(this.debug&&console.log("SEND",JSON.stringify(a)),this.messageBuffer.push({t:Date.now(),send:JSON.stringify(a)});this.messageBuffer.length>100;)this.messageBuffer.shift();if(a.d){var b=a.c,c=a.d;b===this._lastSentCollection&&c===this._lastSentDoc?(delete a.c,delete a.d):(this._lastSentCollection=b,this._lastSentDoc=c)}this.socket.send(a)},h.prototype.disconnect=function(){this.socket.close()},h.prototype.getExisting=function(a,b){return console.trace("getExisting is deprecated. Use get() instead"),this.collections[a]?this.collections[a][b]:void 0},h.prototype.getOrCreate=function(a,b,c){return console.trace("getOrCreate is deprecated. Use get() instead"),this.get(a,b,c)},h.prototype.get=function(a,b,c){var d=this.collections[a];d||(d=this.collections[a]={});var f=d[b];return f||(f=d[b]=new e(this,a,b)),c&&void 0!==c.data&&!f.state&&f.injestData(c),f},h.prototype._destroyDoc=function(a){var b=this.collections[a.collection];b&&(delete b[a.name],d(b)||delete this.collections[a.collection])},h.prototype._createQuery=function(a,b,c,d,e){if("fetch"!==a&&"sub"!==a)throw new Error("Invalid query type: "+a);d||(d={});var g=this.nextQueryId++,h=new f(a,this,g,b,c,d,e);return this.queries[g]=h,h._execute(),h},h.prototype._destroyQuery=function(a){delete this.queries[a.id]},h.prototype.createFetchQuery=function(a,b,c,d){return this._createQuery("fetch",a,b,c,d)},h.prototype.createSubscribeQuery=function(a,b,c,d){return this._createQuery("sub",a,b,c,d)}},{"./doc":52,"./microevent":54,"./query":55}],52:[function(a,b,c){var d=a("ottypes"),e=a("./microevent"),f=c.Doc=function(a,b,c){this.connection=a,this.collection=b,this.name=c,this.version=this.type=null,this.action=null,this.state=null,this.subscribed=!1,this.wantSubscribe=!1,this._subscribeCallbacks=[],this.provides={},this.editingContexts=[],this.inflightData=null,this.pendingData=[],this.type=null};e.mixin(f),f.prototype.destroy=function(a){var b=this;this.unsubscribe(function(){setTimeout(function(){for(var a=0;a<b._subscribeCallbacks.length;a++)b._subscribeCallbacks[a]("Document destroyed");b._subscribeCallbacks.length=0},0),b.connection._destroyDoc(b),b.removeContexts(),a&&a()})},f.prototype._setType=function(a){if("string"==typeof a){if(!d[a])throw new Error("Missing type "+a);a=d[a]}this.removeContexts(),this.type=a,a?a.api&&(this.provides=a.api.provides):this.provides={}},f.prototype.injestData=function(a){if(this.state)return"undefined"!=typeof console&&console.warn("Ignoring attempt to injest data in state",this.state),void 0;if("number"!=typeof a.v)throw new Error("Missing version in injested data");this.version=a.v,this.snapshot=a.data||a.snapshot,this._setType(a.type),this.state="ready",this.emit("ready")},f.prototype.getSnapshot=function(){return this.snapshot},f.prototype.whenReady=function(a){"ready"===this.state?a():this.on("ready",a)},f.prototype.hasPending=function(){return null!=this.inflightData||!!this.pendingData.length},f.prototype._send=function(a){a.c=this.collection,a.d=this.name,this.connection.send(a)},f.prototype._handleSubscribe=function(a,b){a&&"Already subscribed"!==a?(console&&console.error("Could not subscribe: "+a),this.emit("error",a),this._setWantSubscribe(!1,null,a)):(b&&this.injestData(b),this.subscribed=!0,this.emit("subscribe"),this._finishSub(!0)),this._clearAction("subscribe")},f.prototype._onMessage=function(a){if(a.c!==this.collection||a.d!==this.name)throw new Error("Got message for wrong document.");switch(a.a){case"fetch":a.data&&this.injestData(a.data),this._finishSub("fetch",a.error),"fetch"===this.wantSubscribe&&(this.wantSubscribe=!1),this._clearAction("fetch");break;case"sub":this._handleSubscribe(a.error,a.data);break;case"unsub":this.subscribed=!1,this.emit("unsubscribe"),this._finishSub(!1,a.error),this._clearAction("unsubscribe");break;case"ack":a.error&&"Op already submitted"!==a.error&&(this.inflightData?(console.warn("Operation was rejected ("+a.error+"). Trying to rollback change locally."),this._tryRollback(this.inflightData)):console&&console.warn("Second acknowledgement message (error) received",a,this),this._clearInflightOp(a.error));break;case"op":if(this.inflightData&&a.src===this.inflightData.src&&a.seq===this.inflightData.seq){this._opAcknowledged(a);break}if(a.v!==this.version)break;this.inflightData&&j(this.inflightData,a);for(var b=0;b<this.pendingData.length;b++)j(this.pendingData[b],a);this.version++,this._otApply(a,!1);break;case"meta":console&&console.warn("Unhandled meta op:",a);break;default:console&&console.warn("Unhandled document message:",a)}},f.prototype._onConnectionStateChanged=function(a){"connecting"===a?this.inflightData?this._sendOpData():this.flush():"connected"===a?this.flush():"disconnected"===a&&(this.action=null,this.subscribed=!1,this.subscribed&&this.emit("unsubscribed"))},f.prototype._clearAction=function(a){this.action!==a&&console.warn("Unexpected action "+this.action+" expected: "+a),this.action=null,this.flush()},f.prototype.flush=function(){if(this.connection.canSend&&!this.action){for(var a;this.pendingData.length&&h(a=this.pendingData[0]);){for(var b=a.callbacks,c=0;c<b.length;c++)b[c](a.error);this.pendingData.shift()}this.subscribed&&!this.wantSubscribe?(this.action="unsubscribe",this._send({a:"unsub"})):this.subscribed||"fetch"!==this.wantSubscribe?!this.subscribed&&this.wantSubscribe?(this.action="subscribe",this.connection.sendSubscribe(this.collection,this.name,"ready"===this.state?this.version:null)):!this.paused&&this.pendingData.length&&"connected"===this.connection.state&&(this.inflightData=this.pendingData.shift(),this._sendOpData()):(this.action="fetch",this._send("ready"===this.state?{a:"fetch",v:this.version}:{a:"fetch"}))}},f.prototype._setWantSubscribe=function(a,b,c){if(this.subscribed===this.wantSubscribe&&(this.subscribed===a||"fetch"===a&&this.subscribed))return b&&b(c),void 0;if(!this.wantSubscribe!=!a){for(var d=0;d<this._subscribeCallbacks.length;d++)this._subscribeCallbacks[d](c);this._subscribeCallbacks.length=0}("fetch"!==a||this.wantSubscribe!==!0)&&(this.wantSubscribe=a),b&&this._subscribeCallbacks.push(b),this.flush()},f.prototype.subscribe=function(a){this._setWantSubscribe(!0,a)},f.prototype.unsubscribe=function(a){this._setWantSubscribe(!1,a)},f.prototype.fetch=function(a){this._setWantSubscribe("fetch",a)},f.prototype._finishSub=function(a,b){if(a===this.wantSubscribe){for(var c=0;c<this._subscribeCallbacks.length;c++)this._subscribeCallbacks[c](b);this._subscribeCallbacks.length=0}};var g=function(a){delete a.op,delete a.create,delete a.del},h=function(a){return!a.op&&!a.create&&!a.del},i=function(a,b,c){if(b.create&&c.del)g(b);else if(b.create&&c.op){var d=void 0===b.create.data?a.create():b.create.data;b.create.data=a.apply(d,c.op)}else if(h(b))b.create=c.create,b.del=c.del,b.op=c.op;else{if(!(b.op&&c.op&&a.compose))return!1;b.op=a.compose(b.op,c.op)}return!0},j=function(a,b){if(b.create||b.del)return g(a);if(a.create)throw new Error("Invalid state. This is a bug.");if(a.del)return g(b);if(b.op&&a.op)if(a.type.transformX){var c=a.type.transformX(a.op,b.op);a.op=c[0],b.op=c[1]}else{var d=a.type.transform(a.op,b.op,"left"),e=a.type.transform(b.op,a.op,"right");a.op=d,b.op=e}};f.prototype._otApply=function(a,b){if(this.locked=!0,a.create){var c=a.create;this._setType(c.type),this.snapshot=this.type.create(c.data),this.once("unlock",function(){this.emit("create",b)})}else if(a.del){var d=this.snapshot;this._setType(null),this.once("unlock",function(){this.emit("del",b,d)})}else if(a.op){if(!this.type)throw new Error("Document does not exist");for(var e=this.type,f=a.op,g=0;g<this.editingContexts.length;g++){var h=this.editingContexts[g];h!=b&&h._beforeOp&&h._beforeOp(a.op)}if(this.emit("before op",f,b),this.incremental&&e.incrementalApply){var i=this;e.incrementalApply(this.snapshot,f,function(a,c){i.snapshot=c,i.emit("op",a,b)})}else this.snapshot=e.apply(this.snapshot,f),this.emit("op",f,b)}if(this.locked=!1,this.emit("unlock"),a.op){for(var j=this.editingContexts,g=0;g<j.length;g++){var h=j[g];h!=b&&h._onOp&&h._onOp(a.op)}for(var g=0;g<j.length;g++)j.remove&&j.splice(g--,1);return this.emit("after op",a.op,b)}},f.prototype._sendOpData=function(){var a=this.inflightData;if(this.action)throw new Error("invalid state "+this.action+" for sendOpData");this.action="submit";var b={a:"op",v:this.version};a.src&&(b.src=a.src,b.seq=a.seq),a.op&&(b.op=a.op),a.create&&(b.create=a.create),a.del&&(b.del=a.del),b.c=this.collection,b.d=this.name,this.connection.sendOp(b),a.src||(a.src=this.connection.id,a.seq=this.connection.seq++)},f.prototype._submitOpData=function(a,b,c){"function"==typeof b&&(c=b,b=!0),null==b&&(b=!0);var d=function(a){c?c(a):console&&console.warn("Failed attempt to submitOp:",a)};if(this.locked)return d("Cannot call submitOp from inside an 'op' event handler");if(a.op){if(!this.type)return d("Document has not been created");this.type.normalize&&(a.op=this.type.normalize(a.op))}this.state||(this.state="floating"),a.type=this.type,a.callbacks=[];var e,f=this.pendingData[this.pendingData.length-1];f&&i(this.type,f,a)?e=f:(e=a,this.pendingData.push(a)),c&&e.callbacks.push(c),this._otApply(a,b);var g=this;setTimeout(function(){g.flush()},0)},f.prototype.submitOp=function(a,b,c){this._submitOpData({op:a},b,c)},f.prototype.create=function(a,b,c,d){return"function"==typeof b&&(c=b,b=void 0),this.type?(d&&d("Document already exists"),void 0):(this._submitOpData({create:{type:a,data:b}},c,d),void 0)},f.prototype.del=function(a,b){return this.type?(this._submitOpData({del:!0},a,b),void 0):(b&&b("Document does not exist"),void 0)},f.prototype.pause=function(){this.paused=!0},f.prototype.resume=function(){this.paused=!1,this.flush()},f.prototype._tryRollback=function(a){if(a.create)this._setType(null),"floating"===this.state?this.state=null:console.warn("Rollback a create from state "+this.state);else if(a.op&&a.type.invert){a.op=a.type.invert(a.op);for(var b=0;b<this.pendingData.length;b++)j(this.pendingData[b],a);this._otApply(a,!1)}else(a.op||a.del)&&(this._setType(null),this.version=null,this.state=null,this.subscribed=!1,this.emit("error","Op apply failed and the operation could not be reverted"),this.fetch(),this.flush())},f.prototype._clearInflightOp=function(a){for(var b=this.inflightData.callbacks,c=0;c<b.length;c++)b[c](a||this.inflightData.error);this.inflightData=null,this._clearAction("submit"),this.pendingData.length||this.emit("nothing pending")},f.prototype._opAcknowledged=function(a){if(!this.state)throw new Error("opAcknowledged called from a null state. This should never happen.");if("floating"===this.state){if(!this.inflightData.create)throw new Error("Cannot acknowledge an op.");this.version=a.v,this.state="ready";var b=this;setTimeout(function(){b.emit("ready")},0)}else if(a.v!==this.version)throw new Error("Invalid version from server. This can happen when you submit ops in a submitOp callback.");this.version++,this._clearInflightOp()},f.prototype.createContext=function(){var a=this.type;if(!a)throw new Error("Missing type");var b=this,c={getSnapshot:function(){return b.snapshot},submitOp:function(a,d){b.submitOp(a,c,d)},destroy:function(){this.detach&&(this.detach(),delete this.detach),delete this._onOp,this.remove=!0},_doc:this};if(a.api)for(var d in a.api)c[d]=a.api[d];else c.provides={};return this.editingContexts.push(c),c},f.prototype.removeContexts=function(){for(var a=0;a<this.editingContexts.length;a++)this.editingContexts[a].destroy();this.editingContexts.length=0}},{"./microevent":54,ottypes:57}],53:[function(a,b,c){c.Connection=a("./connection").Connection,c.Doc=a("./doc").Doc},{"./connection":51,"./doc":52}],54:[function(a,b){var c=b.exports=function(){};c.prototype.on=function(a,b){var c=this._events=this._events||{};(c[a]=c[a]||[]).push(b)},c.prototype.removeListener=function(a,b){for(var c=this._events=this._events||{},d=c[a]=c[a]||[],e=0;e<d.length;)d[e]===b&&(d[e]=void 0),e++;setTimeout(function(){c[a]=[];for(var b,e=0;e<d.length;e++)(b=d[e])&&c[a].push(b)},0)},c.prototype.emit=function(a){var b=this._events,c=Array.prototype.splice.call(arguments,1);if(!b||!b[a])return"error"==a&&console&&console.error.apply(console,c),void 0;for(var d=b[a],e=0;e<d.length;e++)d[e]&&d[e].apply(this,c)},c.prototype.once=function(a,b){var c,d=this;this.on(a,c=function(){d.removeListener(a,c),b.apply(d,arguments)})},c.mixin=function(a){var b=a.prototype||a;return b.on=c.prototype.on,b.removeListener=c.prototype.removeListener,b.emit=c.prototype.emit,b.once=c.prototype.once,a}},{}],55:[function(a,b,c){a("./doc").Doc;var d=c.Query=function(a,b,c,d,e,f,g){this.type=a,this.connection=b,this.id=c,this.collection=d,this.query=e,this.docMode=f.docMode,"subscribe"===this.docMode&&(this.docMode="sub"),this.poll=f.poll,this.backend=f.backend||f.source,this.knownDocs=f.knownDocs||[],this.results=[],this.ready=!1,this.callback=g};a("./microevent").mixin(d),d.prototype.action="qsub",d.prototype._execute=function(){if(this.connection.canSend){if(this.docMode)for(var a={},b=0;b<this.knownDocs.length;b++){var c=this.knownDocs[b],d=a[c.collection]=a[c.collection]||{};d[c.name]=c.version}var e={a:"q"+this.type,id:this.id,c:this.collection,o:{},q:this.query};this.docMode&&(e.o.m=this.docMode,e.o.vs=a),null!=this.backend&&(e.o.b=this.backend),void 0!==this.poll&&(e.o.p=this.poll),this.connection.send(e)}},d.prototype._dataToDocs=function(a){for(var b,c=[],d=0;d<a.length;d++){var e=a[d];e.type?b=e.type:e.type=b;var f=this.connection.get(e.c||this.collection,e.d,e);"sub"===this.docMode&&(f.subscribed=!0,f._setWantSubscribe(!0),f.emit("subscribe"),f._finishSub(!0)),c.push(f)}return c},d.prototype.destroy=function(){this.connection.canSend&&"sub"===this.type&&this.connection.send({a:"qunsub",id:this.id}),this.connection._destroyQuery(this)},d.prototype._onConnectionStateChanged=function(){"connecting"===this.connection.state&&this._execute()},d.prototype._onMessage=function(a){if("qfetch"===a.a!=("fetch"===this.type))return console&&console.warn("Invalid message sent to query",a,this),void 0;switch(a.error&&this.emit("error",a.error),a.a){case"qfetch":var b=a.data?this._dataToDocs(a.data):void 0;this.callback&&this.callback(a.error,b,a.extra),this.connection._destroyQuery(this);break;case"q":if(a.diff){for(var c=0;c<a.diff.length;c++){var d=a.diff[c];"insert"===d.type&&(d.values=this._dataToDocs(d.values))}for(var c=0;c<a.diff.length;c++){var d=a.diff[c];switch(d.type){case"insert":var e=d.values;Array.prototype.splice.apply(this.results,[d.index,0].concat(e)),this.emit("insert",e,d.index);break;case"remove":var f=d.howMany||1,g=this.results.splice(d.index,f);this.emit("remove",g,d.index);break;case"move":var f=d.howMany||1,h=this.results.splice(d.from,f);Array.prototype.splice.apply(this.results,[d.to,0].concat(h)),this.emit("move",h,d.from,d.to)}}}a.extra&&this.emit("extra",a.extra);break;case"qsub":if(!a.error){var i=this.results;this.results=this.knownDocs=this._dataToDocs(a.data),this.extra=a.extra,this.ready=!0,this.emit("change",this.results,i)}this.callback&&(this.callback(a.error,this.results,this.extra),delete this.callback)}},d.prototype.setQuery=function(a){if("sub"!==this.type)throw new Error("cannot change a fetch query");this.query=a,this.connection.canSend&&(this.connection.send({a:"qunsub",id:this.id}),this._execute())}},{"./doc":52,"./microevent":54}],56:[function(a,b,c){c._bootstrapTransform=function(a,b,c,d){var e,f;return e=function(a,c,d,e){return b(d,a,c,"left"),b(e,c,a,"right")},a.transformX=a.transformX=f=function(a,b){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;for(c(a),c(b),k=[],p=0,t=b.length;t>p;p++){for(o=b[p],j=[],g=0;g<a.length;){if(l=[],e(a[g],o,j,l),g++,1!==l.length){if(0===l.length){for(x=a.slice(g),q=0,u=x.length;u>q;q++)h=x[q],d(j,h);o=null;break}for(y=f(a.slice(g),l),i=y[0],n=y[1],r=0,v=i.length;v>r;r++)h=i[r],d(j,h);for(s=0,w=n.length;w>s;s++)m=n[s],d(k,m);o=null;break}o=l[0]}null!=o&&d(k,o),a=j}return[a,k]},a.transform=a.transform=function(a,c,d){if("left"!==d&&"right"!==d)throw new Error("type must be 'left' or 'right'");return 0===c.length?a:1===a.length&&1===c.length?b([],a[0],c[0],d):"left"===d?f(a,c)[0]:f(c,a)[1]}}},{}],57:[function(a,b,c){var d=function(a){return c[a.name]=a,a.uri?c[a.uri]=a:void 0};d(a("./simple")),d(a("./text")),d(a("./text-tp2")),d(a("./json0"))},{"./json0":58,"./simple":59,"./text":62,"./text-tp2":61}],58:[function(a,b,c){var d=function(a){return"[object Array]"==Object.prototype.toString.call(a)},e=function(a){return JSON.parse(JSON.stringify(a))},f="undefined"!=typeof a?a("./text-old"):window.ottypes.text,g={name:"json0",uri:"http://sharejs.org/types/JSONv0"};g.create=function(a){return void 0===a?null:a},g.invertComponent=function(a){var b={p:a.p};return void 0!==a.si&&(b.sd=a.si),void 0!==a.sd&&(b.si=a.sd),void 0!==a.oi&&(b.od=a.oi),void 0!==a.od&&(b.oi=a.od),void 0!==a.li&&(b.ld=a.li),void 0!==a.ld&&(b.li=a.ld),void 0!==a.na&&(b.na=-a.na),void 0!==a.lm&&(b.lm=a.p[a.p.length-1],b.p=a.p.slice(0,a.p.length-1).concat([a.lm])),b
},g.invert=function(a){for(var b=a.slice().reverse(),c=[],d=0;d<b.length;d++)c.push(g.invertComponent(b[d]));return c},g.checkValidOp=function(a){for(var b=0;b<a.length;b++)if(!d(a[b].p))throw new Error("Missing path")},g.checkList=function(a){if(!d(a))throw new Error("Referenced element not a list")},g.checkObj=function(a){if(a.constructor!==Object)throw new Error("Referenced element not an object (it was "+JSON.stringify(a)+")")},g.apply=function(a,b){g.checkValidOp(b),b=e(b);for(var c={data:a},d=0;d<b.length;d++){for(var f=b[d],h=null,i=null,j=c,k="data",l=0;l<f.p.length;l++){var m=f.p[l];if(h=j,i=k,j=j[k],k=m,null==h)throw new Error("Path invalid")}if(void 0!==f.na){if("number"!=typeof j[k])throw new Error("Referenced element not a number");j[k]+=f.na}else if(void 0!==f.si){if("string"!=typeof j)throw new Error("Referenced element not a string (it was "+JSON.stringify(j)+")");h[i]=j.slice(0,k)+f.si+j.slice(k)}else if(void 0!==f.sd){if("string"!=typeof j)throw new Error("Referenced element not a string");if(j.slice(k,k+f.sd.length)!==f.sd)throw new Error("Deleted string does not match");h[i]=j.slice(0,k)+j.slice(k+f.sd.length)}else if(void 0!==f.li&&void 0!==f.ld)g.checkList(j),j[k]=f.li;else if(void 0!==f.li)g.checkList(j),j.splice(k,0,f.li);else if(void 0!==f.ld)g.checkList(j),j.splice(k,1);else if(void 0!==f.lm){if(g.checkList(j),f.lm!=k){var n=j[k];j.splice(k,1),j.splice(f.lm,0,n)}}else if(void 0!==f.oi)g.checkObj(j),j[k]=f.oi;else{if(void 0===f.od)throw new Error("invalid / missing instruction in op");g.checkObj(j),delete j[k]}}return c.data},g.incrementalApply=function(a,b,c){for(var d=0;d<b.length;d++){var e=[b[d]];a=g.apply(a,e),c(e,a)}return a};var h=g.pathMatches=function(a,b,c){if(a.length!=b.length)return!1;for(var d=0;d<a.length;d++)if(a[d]!==b[d]&&(!c||d!==a.length-1))return!1;return!0},i=function(a){var b={p:a.p[a.p.length-1]};return null!=a.si?b.i=a.si:b.d=a.sd,b};g.append=function(a,b){b=e(b);var c;if(0!=a.length&&h(b.p,(c=a[a.length-1]).p))null!=c.na&&null!=b.na?a[a.length-1]={p:c.p,na:c.na+b.na}:void 0!==c.li&&void 0===b.li&&b.ld===c.li?void 0!==c.ld?delete c.li:a.pop():void 0!==c.od&&void 0===c.oi&&void 0!==b.oi&&void 0===b.od?c.oi=b.oi:void 0!==c.oi&&void 0!==b.od?void 0!==b.oi?c.oi=b.oi:void 0!==c.od?delete c.oi:a.pop():void 0!==b.lm&&b.p[b.p.length-1]===b.lm||a.push(b);else if(0!=a.length&&h(b.p,c.p,!0))if(null==b.si&&null==b.sd||null==c.si&&null==c.sd)a.push(b);else{var d=[i(c)];if(f._append(d,i(b)),1!==d.length)a.push(b);else{var g=d[0];c.p[c.p.length-1]=g.p,null!=g.i?c.si=g.i:c.sd=g.d}}else a.push(b)},g.compose=function(a,b){g.checkValidOp(a),g.checkValidOp(b);for(var c=e(a),d=0;d<b.length;d++)g.append(c,b[d]);return c},g.normalize=function(a){var b=[];a=d(a)?a:[a];for(var c=0;c<a.length;c++){var e=a[c];null==e.p&&(e.p=[]),g.append(b,e)}return b},g.canOpAffectOp=function(a,b){if(0===a.length)return!0;if(0===b.length)return!1;b=b.slice(0,b.length-1),a=a.slice(0,a.length-1);for(var c=0;c<a.length;c++){var d=a[c];if(c>=b.length||d!=b[c])return!1}return!0},g.transformComponent=function(a,b,c,d){b=e(b),void 0!==b.na&&b.p.push(0),void 0!==c.na&&c.p.push(0);var h;g.canOpAffectOp(c.p,b.p)&&(h=c.p.length-1);var j;g.canOpAffectOp(b.p,c.p)&&(j=b.p.length-1);var k=b.p.length,l=c.p.length;if(void 0!==b.na&&b.p.pop(),void 0!==c.na&&c.p.pop(),c.na){if(null!=j&&l>=k&&c.p[j]==b.p[j])if(void 0!==b.ld){var m=e(c);m.p=m.p.slice(k),b.ld=g.apply(e(b.ld),[m])}else if(void 0!==b.od){var m=e(c);m.p=m.p.slice(k),b.od=g.apply(e(b.od),[m])}return g.append(a,b),a}if(null!=j&&l>k&&b.p[j]==c.p[j])if(void 0!==b.ld){var m=e(c);m.p=m.p.slice(k),b.ld=g.apply(e(b.ld),[m])}else if(void 0!==b.od){var m=e(c);m.p=m.p.slice(k),b.od=g.apply(e(b.od),[m])}if(null!=h){var n=k==l;if(void 0!==c.na);else if(void 0!==c.si||void 0!==c.sd){if(void 0!==b.si||void 0!==b.sd){if(!n)throw new Error("must be a string?");var o=i(b),p=i(c),q=[];f._tc(q,o,p,d);for(var r=0;r<q.length;r++){var s=q[r],t={p:b.p.slice(0,h)};t.p.push(s.p),null!=s.i&&(t.si=s.i),null!=s.d&&(t.sd=s.d),g.append(a,t)}return a}}else if(void 0!==c.li&&void 0!==c.ld){if(c.p[h]===b.p[h]){if(!n)return a;if(void 0!==b.ld){if(void 0===b.li||"left"!==d)return a;b.ld=e(c.li)}}}else if(void 0!==c.li)void 0!==b.li&&void 0===b.ld&&n&&b.p[h]===c.p[h]?"right"===d&&b.p[h]++:c.p[h]<=b.p[h]&&b.p[h]++,void 0!==b.lm&&n&&c.p[h]<=b.lm&&b.lm++;else if(void 0!==c.ld){if(void 0!==b.lm&&n){if(c.p[h]===b.p[h])return a;var u=c.p[h],v=b.p[h],w=b.lm;(w>u||u===w&&w>v)&&b.lm--}if(c.p[h]<b.p[h])b.p[h]--;else if(c.p[h]===b.p[h]){if(k>l)return a;if(void 0!==b.ld){if(void 0===b.li)return a;delete b.ld}}}else if(void 0!==c.lm)if(void 0!==b.lm&&k===l){var v=b.p[h],w=b.lm,x=c.p[h],y=c.lm;if(x!==y)if(v===x){if("left"!==d)return a;b.p[h]=y,v===w&&(b.lm=y)}else v>x&&b.p[h]--,v>y?b.p[h]++:v===y&&x>y&&(b.p[h]++,v===w&&b.lm++),w>x?b.lm--:w===x&&w>v&&b.lm--,w>y?b.lm++:w===y&&(y>x&&w>v||x>y&&v>w?"right"===d&&b.lm++:w>v?b.lm++:w===x&&b.lm--)}else if(void 0!==b.li&&void 0===b.ld&&n){var v=c.p[h],w=c.lm;u=b.p[h],u>v&&b.p[h]--,u>w&&b.p[h]++}else{var v=c.p[h],w=c.lm;u=b.p[h],u===v?b.p[h]=w:(u>v&&b.p[h]--,u>w?b.p[h]++:u===w&&v>w&&b.p[h]++)}else if(void 0!==c.oi&&void 0!==c.od){if(b.p[h]===c.p[h]){if(void 0===b.oi||!n)return a;if("right"===d)return a;b.od=c.oi}}else if(void 0!==c.oi){if(void 0!==b.oi&&b.p[h]===c.p[h]){if("left"!==d)return a;g.append(a,{p:b.p,od:c.oi})}}else if(void 0!==c.od&&b.p[h]==c.p[h]){if(!n)return a;if(void 0===b.oi)return a;delete b.od}}return g.append(a,b),a},"undefined"!=typeof a?a("./helpers")._bootstrapTransform(g,g.transformComponent,g.checkValidOp,g.append):c._bootstrapTransform(g,g.transformComponent,g.checkValidOp,g.append),b.exports=g},{"./helpers":56,"./text-old":60}],59:[function(a,b){b.exports={name:"simple",uri:"http://sharejs.org/types/simple",create:function(a){return null==a&&(a=""),{str:a}},apply:function(a,b){if(b.position<0||b.position>a.str.length)throw new Error("Invalid position");var c=a.str;return c=c.slice(0,b.position)+b.text+c.slice(b.position),{str:c}},transform:function(a,b,c){var d=a.position;return(b.position<d||b.position===d&&"left"===c)&&(d+=b.text.length),{position:d,text:a.text}}}},{}],60:[function(a,b,c){var d,e,f,g,h,i,j,k;i={name:"text-old",uri:"http://sharejs.org/types/textv0",create:function(){return""}},h=function(a,b,c){return a.slice(0,b)+c+a.slice(b)},e=function(a){var b,c;if("number"!=typeof a.p)throw new Error("component missing position field");if(c=typeof a.i,b=typeof a.d,!("string"===c^"string"===b))throw new Error("component needs an i or d field");if(!(a.p>=0))throw new Error("position cannot be negative")},f=function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)b=a[c],e(b);return!0},i.apply=function(a,b){var c,d,e,g;for(f(b),e=0,g=b.length;g>e;e++)if(c=b[e],null!=c.i)a=h(a,c.p,c.i);else{if(d=a.slice(c.p,c.p+c.d.length),c.d!==d)throw new Error("Delete component '"+c.d+"' does not match deleted text '"+d+"'");a=a.slice(0,c.p)+a.slice(c.p+c.d.length)}return a},i._append=d=function(a,b){var c,d,e;if(""!==b.i&&""!==b.d)return 0===a.length?a.push(b):(c=a[a.length-1],null!=c.i&&null!=b.i&&c.p<=(d=b.p)&&d<=c.p+c.i.length?a[a.length-1]={i:h(c.i,b.p-c.p,b.i),p:c.p}:null!=c.d&&null!=b.d&&b.p<=(e=c.p)&&e<=b.p+b.d.length?a[a.length-1]={d:h(b.d,c.p-b.p,c.d),p:b.p}:a.push(b))},i.compose=function(a,b){var c,e,g,h;for(f(a),f(b),e=a.slice(),g=0,h=b.length;h>g;g++)c=b[g],d(e,c);return e},i.compress=function(a){return i.compose([],a)},i.normalize=function(a){var b,c,e,f,g;for(c=[],(null!=a.i||null!=a.p)&&(a=[a]),e=0,f=a.length;f>e;e++)b=a[e],null==(g=b.p)&&(b.p=0),d(c,b);return c},k=function(a,b,c){return null!=b.i?b.p<a||b.p===a&&c?a+b.i.length:a:a<=b.p?a:a<=b.p+b.d.length?b.p:a-b.d.length},i.transformCursor=function(a,b,c){var d,e,f,g;for(e="right"===c,f=0,g=b.length;g>f;f++)d=b[f],a=k(a,d,e);return a},i._tc=j=function(a,b,c,e){var g,h,i,j,l,m;if(f([b]),f([c]),null!=b.i)d(a,{i:b.i,p:k(b.p,c,"right"===e)});else if(null!=c.i)m=b.d,b.p<c.p&&(d(a,{d:m.slice(0,c.p-b.p),p:b.p}),m=m.slice(c.p-b.p)),""!==m&&d(a,{d:m,p:b.p+c.i.length});else if(b.p>=c.p+c.d.length)d(a,{d:b.d,p:b.p-c.d.length});else if(b.p+b.d.length<=c.p)d(a,b);else{if(j={d:"",p:b.p},b.p<c.p&&(j.d=b.d.slice(0,c.p-b.p)),b.p+b.d.length>c.p+c.d.length&&(j.d+=b.d.slice(c.p+c.d.length-b.p)),i=Math.max(b.p,c.p),h=Math.min(b.p+b.d.length,c.p+c.d.length),g=b.d.slice(i-b.p,h-b.p),l=c.d.slice(i-c.p,h-c.p),g!==l)throw new Error("Delete ops delete different text in the same region of the document");""!==j.d&&(j.p=k(j.p,c),d(a,j))}return a},g=function(a){return null!=a.i?{d:a.i,p:a.p}:{i:a.d,p:a.p}},i.invert=function(a){var b,c,d,e,f;for(e=a.slice().reverse(),f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(g(b));return f},"undefined"==typeof a?c._bootstrapTransform(i,i.transformComponent,i.checkValidOp,i.append):a("./helpers")._bootstrapTransform(i,i.transformComponent,i.checkValidOp,i.append),b.exports=i},{"./helpers":56}],61:[function(a,b){var c=b.exports={name:"text-tp2",tp2:!0,uri:"http://sharejs.org/types/text-tp2v1",create:function(a){if(null==a)a="";else if("string"!=typeof a)throw new Error("Initial data must be a string");return{charLength:a.length,totalLength:a.length,data:a.length?[a]:[]}},serialize:function(a){if(!a.data)throw new Error("invalid doc snapshot");return a.data},deserialize:function(a){var b=c.create();b.data=a;for(var d=0;d<a.length;d++){var e=a[d];"string"==typeof e?(b.charLength+=e.length,b.totalLength+=e.length):b.totalLength+=e}return b}},d=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)},e=function(a){if(!d(a))throw new Error("Op must be an array of components");for(var b=null,c=0;c<a.length;c++){var e=a[c];if("object"==typeof e)if(void 0!==e.i){if(!("string"==typeof e.i&&e.i.length>0||"number"==typeof e.i&&e.i>0))throw new Error("Inserts must insert a string or a +ive number")}else{if(void 0===e.d)throw new Error("Operation component must define .i or .d");if(!("number"==typeof e.d&&e.d>0))throw new Error("Deletes must be a +ive number")}else{if("number"!=typeof e)throw new Error("Op components must be objects or numbers");if(0>=e)throw new Error("Skip components must be a positive number");if("number"==typeof b)throw new Error("Adjacent skip components should be combined")}b=e}},f=c._takeDoc=function(a,b,c,d){if(b.index>=a.data.length)throw new Error("Operation goes past the end of the document");var e,f=a.data[b.index];e="string"==typeof f?null!=c?f.slice(b.offset,b.offset+c):f.slice(b.offset):null==c||d?f-b.offset:Math.min(c,f-b.offset);var g=e.length||e;return(f.length||f)-b.offset>g?b.offset+=g:(b.index++,b.offset=0),e},g=c._appendDoc=function(a,b){if(0!==b&&""!==b){"string"==typeof b?(a.charLength+=b.length,a.totalLength+=b.length):a.totalLength+=b;var c=a.data;0===c.length?c.push(b):typeof c[c.length-1]==typeof b?c[c.length-1]+=b:c.push(b)}};c.apply=function(a,b){if(null==a.totalLength||null==a.charLength||!d(a.data))throw new Error("Snapshot is invalid");e(b);for(var h=c.create(),i={index:0,offset:0},j=0;j<b.length;j++){var k,l,m=b[j];if("number"==typeof m)for(k=m;k>0;)l=f(a,i,k),g(h,l),k-=l.length||l;else if(void 0!==m.i)g(h,m.i);else if(void 0!==m.d){for(k=m.d;k>0;)l=f(a,i,k),k-=l.length||l;g(h,m.d)}}return h};var h=c._append=function(a,b){var c;0===b||""===b.i||0===b.i||0===b.d||(0===a.length?a.push(b):(c=a[a.length-1],"number"==typeof b&&"number"==typeof c?a[a.length-1]+=b:null!=b.i&&null!=c.i&&typeof c.i==typeof b.i?c.i+=b.i:null!=b.d&&null!=c.d?c.d+=b.d:a.push(b)))},i=function(a){var b=0,c=0,d=function(d,e){if(b===a.length)return null;var f,g,h=a[b];if("number"==typeof(f=h)||"number"==typeof(f=h.i)||null!=(f=h.d)){var i;return null==d||d>=f-c||e&&null!=h.i?(i=f-c,++b,c=0):(c+=d,i=d),null!=h.i?{i:i}:null!=h.d?{d:i}:i}return null==d||h.i.length-c<=d||e?(g={i:h.i.slice(c)},++b,c=0):(g={i:h.i.slice(c,c+d)},c+=d),g},e=function(){return a[b]};return[d,e]},j=function(a){return"number"==typeof a?a:"string"==typeof a.i?a.i.length:a.d||a.i};c.normalize=function(a){for(var b=[],c=0;c<a.length;c++)h(b,a[c]);return b};var k=function(a,b,c,d){e(a),e(b);for(var f=[],g=i(a),k=g[0],l=g[1],m=0;m<b.length;m++){var n,o=b[m],p=j(o);if(null!=o.i)if(c){if("left"===d)for(var q;(q=l())&&null!=q.i;)h(f,k());h(f,p)}else for(;p>0;){if(n=k(p,!0),null===n)throw new Error("The transformed op is invalid");if(null!=n.d)throw new Error("The transformed op deletes locally inserted characters - it cannot be purged of the insert.");"number"==typeof n?p-=n:h(f,n)}else for(;p>0;){if(n=k(p,!0),null===n)throw new Error("The op traverses more elements than the document has");h(f,n),n.i||(p-=j(n))}}for(var o;o=k();){if(void 0===o.i)throw new Error("Remaining fragments in the op: "+o);h(f,o)}return f};c.transform=function(a,b,c){if("left"!=c&&"right"!=c)throw new Error("side ("+c+") should be 'left' or 'right'");return k(a,b,!0,c)},c.prune=function(a,b){return k(a,b,!1)},c.compose=function(a,b){if(null==a)return b;e(a),e(b);for(var c,d=[],f=i(a)[0],g=0;g<b.length;g++){c=b[g];var k,l;if("number"==typeof c)for(k=c;k>0;){if(l=f(k),null===l)throw new Error("The op traverses more elements than the document has");h(d,l),k-=j(l)}else if(void 0!==c.i)h(d,{i:c.i});else for(k=c.d;k>0;){if(l=f(k),null===l)throw new Error("The op traverses more elements than the document has");var m=j(l);void 0!==l.i?h(d,{i:m}):h(d,{d:m}),k-=m}}for(;c=f();){if(void 0===c.i)throw new Error("Remaining fragments in op1: "+c);h(d,c)}return d}},{}],62:[function(a,b,c){c.name="text",c.uri="http://sharejs.org/types/textv1",c.create=function(a){if(null!=a&&"string"!=typeof a)throw new Error("Initial data must be a string");return a||""};var d=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},e=function(a){if(!d(a))throw new Error("Op must be an array of components");for(var b=null,c=0;c<a.length;c++){var e=a[c];switch(typeof e){case"object":if(!("number"==typeof e.d&&e.d>0))throw new Error("Object components must be deletes of size > 0");break;case"string":if(!(e.length>0))throw new Error("Inserts cannot be empty");break;case"number":if(!(e>0))throw new Error("Skip components must be >0");if("number"==typeof b)throw new Error("Adjacent skip components should be combined")}b=e}if("number"==typeof b)throw new Error("Op has a trailing skip")},f=function(a){return function(b){return b&&0!==b.d?0===a.length?a.push(b):typeof b==typeof a[a.length-1]?"object"==typeof b?a[a.length-1].d+=b.d:a[a.length-1]+=b:a.push(b):void 0}},g=function(a){var b=0,c=0,d=function(d,e){if(b===a.length)return-1===d?null:d;var f,g=a[b];return"number"==typeof g?-1===d||d>=g-c?(f=g-c,++b,c=0,f):(c+=d,d):"string"==typeof g?-1===d||"i"===e||g.length-c<=d?(f=g.slice(c),++b,c=0,f):(f=g.slice(c,c+d),c+=d,f):-1===d||"d"===e||g.d-c<=d?(f={d:g.d-c},++b,c=0,f):(c+=d,{d:d})},e=function(){return a[b]};return[d,e]},h=function(a){return"number"==typeof a?a:a.length||a.d},i=function(a){return a.length>0&&"number"==typeof a[a.length-1]&&a.pop(),a};c.normalize=function(a){for(var b=[],c=f(b),d=0;d<a.length;d++)c(a[d]);return i(b)},c.apply=function(a,b){if("string"!=typeof a)throw new Error("Snapshot should be a string");e(b);for(var c=[],d=0;d<b.length;d++){var f=b[d];switch(typeof f){case"number":if(f>a.length)throw new Error("The op is too long for this document");c.push(a.slice(0,f)),a=a.slice(f);break;case"string":c.push(f);break;case"object":a=a.slice(f.d)}}return c.join("")+a},c.transform=function(a,b,c){if("left"!=c&&"right"!=c)throw new Error("side ("+c+") must be 'left' or 'right'");e(a),e(b);for(var d=[],j=f(d),k=g(a),l=k[0],m=k[1],n=0;n<b.length;n++){var o,p,q=b[n];switch(typeof q){case"number":for(o=q;o>0;)p=l(o,"i"),j(p),"string"!=typeof p&&(o-=h(p));break;case"string":"left"===c&&"string"==typeof m()&&j(l(-1)),j(q.length);break;case"object":for(o=q.d;o>0;)switch(p=l(o,"i"),typeof p){case"number":o-=p;break;case"string":j(p);break;case"object":o-=p.d}}}for(;q=l(-1);)j(q);return i(d)},c.compose=function(a,b){e(a),e(b);for(var c=[],d=f(c),j=g(a)[0],k=0;k<b.length;k++){var l,m,n=b[k];switch(typeof n){case"number":for(l=n;l>0;)m=j(l,"d"),d(m),"object"!=typeof m&&(l-=h(m));break;case"string":d(n);break;case"object":for(l=n.d;l>0;)switch(m=j(l,"d"),typeof m){case"number":d({d:m}),l-=m;break;case"string":l-=m.length;break;case"object":d(m)}}}for(;n=j(-1);)d(n);return i(c)};var j=function(a,b){for(var c=0,d=0;d<b.length;d++){var e=b[d];if(c>=a)break;switch(typeof e){case"number":if(c+e>=a)return a;c+=e;break;case"string":c+=e.length,a+=e.length;break;case"object":a-=Math.min(e.d,a-c)}}return a};c.transformCursor=function(a,b,c){var d=0;if(c){for(var e=0;e<b.length;e++){var f=b[e];switch(typeof f){case"number":d+=f;break;case"string":d+=f.length}}return[d,d]}return[j(a[0],b),j(a[1],b)]}},{}]},{},[9]);